<div
  class="textfield"
  [ngClass]="[
    'textfield--' + size,
    state === 'error' ? 'textfield--error' : 'textfield--' + state,
    state === 'error' ? 'color-error' : 'color-' + color
  ]"
>
  <!-- Label -->
  <label class="textfield__label">{{ label }}</label>

  <!-- Input wrapper -->
  <div class="textfield__input-wrapper">

    <!-- ใช้ FormControl ถ้ามี -->
    <input
      *ngIf="control; else ngModelInput"
      type="text"
      class="textfield__input"
      [formControl]="control"
      [placeholder]="placeholder"
      (blur)="onBlur()"
      (keydown)="onKeyDown($event)"
    />

    <!-- ถ้าไม่มี FormControl ใช้ ngModel -->
    <ng-template #ngModelInput>
      <input
        type="text"
        class="textfield__input"
        [(ngModel)]="value"
        [placeholder]="placeholder"
        (blur)="onBlur()"
        (keydown)="onKeyDown($event)"
      />
    </ng-template>

    <!-- ปุ่ม clear -->
    <button
      *ngIf="hasValue"
      type="button"
      class="textfield__clear"
      (click)="clearInput()"
    >
      clear
    </button>

  </div>

  <!-- ข้อความ error -->
  <p *ngIf="state === 'error'" class="textfield__error">{{ errorText }}</p>

  <!-- helper text แสดงตลอด -->
  <p class="textfield__helper">{{ helperText }}</p>
</div>