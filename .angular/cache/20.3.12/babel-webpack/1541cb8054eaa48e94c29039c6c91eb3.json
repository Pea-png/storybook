{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { TextfieldComponent } from 'my-lib';\nconst meta = {\n  title: 'MyLib/Textfield',\n  component: TextfieldComponent,\n  tags: ['autodocs'],\n  argTypes: {\n    valueChange: {\n      action: 'valueChange'\n    },\n    size: {\n      control: {\n        type: 'select'\n      },\n      options: ['sm', 'md', 'lg']\n    },\n    color: {\n      control: {\n        type: 'select'\n      },\n      options: ['primary', 'secondary', 'success', 'error']\n    }\n  }\n};\nexport default meta;\n// helper: create FormControl\nconst withControl = (value, required = false) => {\n  const validators = required ? [Validators.required, Validators.maxLength(10)] : [Validators.maxLength(10)];\n  return new FormControl(value || '', validators);\n};\n// shared renderer with logging\nconst renderTemplate = args => {\n  const valueAction = action('valueChange'); // ✅ สร้าง action instance\n  const control = withControl(args.value, args.color === 'error');\n  // subscribe valueChanges เพื่อส่งค่าไปที่ action\n  control.valueChanges.subscribe(val => {\n    console.groupCollapsed(`Field Update: ${args.label || 'Field'}`);\n    console.table({\n      value: val,\n      valid: control.valid,\n      invalid: control.invalid,\n      touched: control.touched,\n      dirty: control.dirty,\n      pristine: control.pristine,\n      errors: control.errors\n    });\n    console.groupEnd();\n    valueAction(val); // ✅ ส่งค่าจริงไป Action\n  });\n  return {\n    props: {\n      ...args,\n      control,\n      valueChange: valueAction // ✅ bind action ที่มีค่า\n    },\n    template: `\n      <app-textfield\n        [label]=\"label\"\n        [placeholder]=\"placeholder\"\n        [size]=\"size\"\n        [color]=\"color\"\n        [helperText]=\"helperText\"\n        [disabled]=\"disabled\"\n        [onlyNumbers]=\"onlyNumbers\"\n        [control]=\"control\"\n        (valueChange)=\"valueChange($event)\"\n      >\n        <span class=\"material-symbols-outlined\">clear</span>\n      </app-textfield>\n    `\n  };\n};\n// stories\nexport const Default = {\n  render: renderTemplate,\n  args: {\n    label: 'Username',\n    placeholder: 'Enter text',\n    value: '',\n    size: 'sm',\n    color: 'primary',\n    helperText: 'Max 10 characters',\n    disabled: false,\n    onlyNumbers: false\n  }\n};\nexport const WithValue = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    value: 'Pre-filled text'\n  }\n};\nexport const ErrorState = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    value: '',\n    color: 'error'\n  }\n};\n// Size Stories\nexport const Small = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    size: 'sm'\n  }\n};\nexport const Medium = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    size: 'md'\n  }\n};\nexport const Large = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    size: 'lg'\n  }\n};\n// Color Stories\nexport const Primary = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    color: 'primary'\n  }\n};\nexport const Secondary = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    color: 'secondary'\n  }\n};\nexport const Success = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    color: 'success'\n  }\n};\nexport const Error = {\n  render: renderTemplate,\n  args: {\n    ...Default.args,\n    color: 'error'\n  }\n};","map":{"version":3,"names":["FormControl","Validators","TextfieldComponent","meta","title","component","tags","argTypes","valueChange","action","size","control","type","options","color","withControl","value","required","validators","maxLength","renderTemplate","args","valueAction","valueChanges","subscribe","val","console","groupCollapsed","label","table","valid","invalid","touched","dirty","pristine","errors","groupEnd","props","template","Default","render","placeholder","helperText","disabled","onlyNumbers","WithValue","ErrorState","Small","Medium","Large","Primary","Secondary","Success","Error"],"sources":["/Users/pea/Desktop/work/my-workspace/projects/my-lib/src/lib/textfield/textfield.stories.ts"],"sourcesContent":["import { FormControl, Validators } from '@angular/forms';\nimport { TextfieldComponent } from 'my-lib';\nconst meta = {\n    title: 'MyLib/Textfield',\n    component: TextfieldComponent,\n    tags: ['autodocs'],\n    argTypes: {\n        valueChange: { action: 'valueChange' },\n        size: {\n            control: { type: 'select' },\n            options: ['sm', 'md', 'lg'],\n        },\n        color: {\n            control: { type: 'select' },\n            options: ['primary', 'secondary', 'success', 'error'],\n        },\n    },\n};\nexport default meta;\n// helper: create FormControl\nconst withControl = (value, required = false) => {\n    const validators = required\n        ? [Validators.required, Validators.maxLength(10)]\n        : [Validators.maxLength(10)];\n    return new FormControl(value || '', validators);\n};\n// shared renderer with logging\nconst renderTemplate = (args) => {\n    const valueAction = action('valueChange'); // ✅ สร้าง action instance\n    const control = withControl(args.value, args.color === 'error');\n    // subscribe valueChanges เพื่อส่งค่าไปที่ action\n    control.valueChanges.subscribe((val) => {\n        console.groupCollapsed(`Field Update: ${args.label || 'Field'}`);\n        console.table({\n            value: val,\n            valid: control.valid,\n            invalid: control.invalid,\n            touched: control.touched,\n            dirty: control.dirty,\n            pristine: control.pristine,\n            errors: control.errors,\n        });\n        console.groupEnd();\n        valueAction(val); // ✅ ส่งค่าจริงไป Action\n    });\n    return {\n        props: {\n            ...args,\n            control,\n            valueChange: valueAction, // ✅ bind action ที่มีค่า\n        },\n        template: `\n      <app-textfield\n        [label]=\"label\"\n        [placeholder]=\"placeholder\"\n        [size]=\"size\"\n        [color]=\"color\"\n        [helperText]=\"helperText\"\n        [disabled]=\"disabled\"\n        [onlyNumbers]=\"onlyNumbers\"\n        [control]=\"control\"\n        (valueChange)=\"valueChange($event)\"\n      >\n        <span class=\"material-symbols-outlined\">clear</span>\n      </app-textfield>\n    `,\n    };\n};\n// stories\nexport const Default = {\n    render: renderTemplate,\n    args: {\n        label: 'Username',\n        placeholder: 'Enter text',\n        value: '',\n        size: 'sm',\n        color: 'primary',\n        helperText: 'Max 10 characters',\n        disabled: false,\n        onlyNumbers: false,\n    },\n};\nexport const WithValue = {\n    render: renderTemplate,\n    args: {\n        ...Default.args,\n        value: 'Pre-filled text',\n    },\n};\nexport const ErrorState = {\n    render: renderTemplate,\n    args: {\n        ...Default.args,\n        value: '',\n        color: 'error',\n    },\n};\n// Size Stories\nexport const Small = {\n    render: renderTemplate,\n    args: { ...Default.args, size: 'sm' },\n};\nexport const Medium = {\n    render: renderTemplate,\n    args: { ...Default.args, size: 'md' },\n};\nexport const Large = {\n    render: renderTemplate,\n    args: { ...Default.args, size: 'lg' },\n};\n// Color Stories\nexport const Primary = {\n    render: renderTemplate,\n    args: { ...Default.args, color: 'primary' },\n};\nexport const Secondary = {\n    render: renderTemplate,\n    args: { ...Default.args, color: 'secondary' },\n};\nexport const Success = {\n    render: renderTemplate,\n    args: { ...Default.args, color: 'success' },\n};\nexport const Error = {\n    render: renderTemplate,\n    args: { ...Default.args, color: 'error' },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}