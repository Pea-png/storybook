{"ast":null,"code":"import _asyncToGenerator from \"/Users/pea/Desktop/work/my-workspace/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { isTestEnvironment, pauseAnimations, waitForAnimations } from \"./chunk-IPA5A322.js\";\nimport { require_main } from \"./chunk-3OXGAGBE.js\";\nimport { SNIPPET_RENDERED, combineParameters } from \"./chunk-VYJQ7RU5.js\";\nimport { isEqual } from \"./chunk-3IAH5M2U.js\";\nimport { invariant } from \"./chunk-AS2HQEYC.js\";\nimport { require_ansi_to_html } from \"./chunk-YKE5S47A.js\";\nimport { mapValues, pickBy } from \"./chunk-AIOS4NGK.js\";\nimport { isPlainObject } from \"./chunk-GFLS4VP3.js\";\nimport { require_memoizerific } from \"./chunk-WJYERY3R.js\";\nimport { dedent } from \"./chunk-JP7NCOJX.js\";\nimport { __toESM } from \"./chunk-A242L54C.js\";\n\n// src/preview-api/modules/addons/main.ts\nimport { global } from \"@storybook/global\";\n\n// src/preview-api/modules/addons/storybook-channel-mock.ts\nimport { Channel } from \"storybook/internal/channels\";\nfunction mockChannel() {\n  let transport = {\n    setHandler: () => {},\n    send: () => {}\n  };\n  return new Channel({\n    transport\n  });\n}\n\n// src/preview-api/modules/addons/main.ts\nvar AddonStore = class {\n    constructor() {\n      this.getChannel = () => {\n        if (!this.channel) {\n          let channel = mockChannel();\n          return this.setChannel(channel), channel;\n        }\n        return this.channel;\n      };\n      this.ready = () => this.promise;\n      this.hasChannel = () => !!this.channel;\n      this.setChannel = channel => {\n        this.channel = channel, this.resolve();\n      };\n      this.promise = new Promise(res => {\n        this.resolve = () => res(this.getChannel());\n      });\n    }\n  },\n  KEY = \"__STORYBOOK_ADDONS_PREVIEW\";\nfunction getAddonsStore() {\n  return global[KEY] || (global[KEY] = new AddonStore()), global[KEY];\n}\nvar addons = getAddonsStore();\n\n// src/preview-api/modules/addons/hooks.ts\nimport { logger } from \"storybook/internal/client-logger\";\nimport { FORCE_RE_RENDER, RESET_STORY_ARGS, STORY_RENDERED, UPDATE_GLOBALS, UPDATE_STORY_ARGS } from \"storybook/internal/core-events\";\nimport { global as global2 } from \"@storybook/global\";\nvar HooksContext = class {\n  constructor() {\n    this.hookListsMap = void 0;\n    this.mountedDecorators = void 0;\n    this.prevMountedDecorators = void 0;\n    this.currentHooks = void 0;\n    this.nextHookIndex = void 0;\n    this.currentPhase = void 0;\n    this.currentEffects = void 0;\n    this.prevEffects = void 0;\n    this.currentDecoratorName = void 0;\n    this.hasUpdates = void 0;\n    this.currentContext = void 0;\n    this.renderListener = storyId => {\n      storyId === this.currentContext?.id && (this.triggerEffects(), this.currentContext = null, this.removeRenderListeners());\n    };\n    this.init();\n  }\n  init() {\n    this.hookListsMap = /* @__PURE__ */new WeakMap(), this.mountedDecorators = /* @__PURE__ */new Set(), this.prevMountedDecorators = /* @__PURE__ */new Set(), this.currentHooks = [], this.nextHookIndex = 0, this.currentPhase = \"NONE\", this.currentEffects = [], this.prevEffects = [], this.currentDecoratorName = null, this.hasUpdates = !1, this.currentContext = null;\n  }\n  clean() {\n    this.prevEffects.forEach(effect => {\n      effect.destroy && effect.destroy();\n    }), this.init(), this.removeRenderListeners();\n  }\n  getNextHook() {\n    let hook = this.currentHooks[this.nextHookIndex];\n    return this.nextHookIndex += 1, hook;\n  }\n  triggerEffects() {\n    this.prevEffects.forEach(effect => {\n      !this.currentEffects.includes(effect) && effect.destroy && effect.destroy();\n    }), this.currentEffects.forEach(effect => {\n      this.prevEffects.includes(effect) || (effect.destroy = effect.create());\n    }), this.prevEffects = this.currentEffects, this.currentEffects = [];\n  }\n  addRenderListeners() {\n    this.removeRenderListeners(), addons.getChannel().on(STORY_RENDERED, this.renderListener);\n  }\n  removeRenderListeners() {\n    addons.getChannel().removeListener(STORY_RENDERED, this.renderListener);\n  }\n};\nfunction hookify(fn) {\n  let hookified = (...args) => {\n    let {\n        hooks\n      } = typeof args[0] == \"function\" ? args[1] : args[0],\n      prevPhase = hooks.currentPhase,\n      prevHooks = hooks.currentHooks,\n      prevNextHookIndex = hooks.nextHookIndex,\n      prevDecoratorName = hooks.currentDecoratorName;\n    hooks.currentDecoratorName = fn.name, hooks.prevMountedDecorators.has(fn) ? (hooks.currentPhase = \"UPDATE\", hooks.currentHooks = hooks.hookListsMap.get(fn) || []) : (hooks.currentPhase = \"MOUNT\", hooks.currentHooks = [], hooks.hookListsMap.set(fn, hooks.currentHooks), hooks.prevMountedDecorators.add(fn)), hooks.nextHookIndex = 0;\n    let prevContext = global2.STORYBOOK_HOOKS_CONTEXT;\n    global2.STORYBOOK_HOOKS_CONTEXT = hooks;\n    let result = fn(...args);\n    if (global2.STORYBOOK_HOOKS_CONTEXT = prevContext, hooks.currentPhase === \"UPDATE\" && hooks.getNextHook() != null) throw new Error(\"Rendered fewer hooks than expected. This may be caused by an accidental early return statement.\");\n    return hooks.currentPhase = prevPhase, hooks.currentHooks = prevHooks, hooks.nextHookIndex = prevNextHookIndex, hooks.currentDecoratorName = prevDecoratorName, result;\n  };\n  return hookified.originalFn = fn, hookified;\n}\nvar numberOfRenders = 0,\n  RENDER_LIMIT = 25,\n  applyHooks = applyDecorators => (storyFn, decorators) => {\n    let decorated = applyDecorators(hookify(storyFn), decorators.map(decorator => hookify(decorator)));\n    return context => {\n      let {\n        hooks\n      } = context;\n      hooks.prevMountedDecorators ??= /* @__PURE__ */new Set(), hooks.mountedDecorators = /* @__PURE__ */new Set([storyFn, ...decorators]), hooks.currentContext = context, hooks.hasUpdates = !1;\n      let result = decorated(context);\n      for (numberOfRenders = 1; hooks.hasUpdates;) if (hooks.hasUpdates = !1, hooks.currentEffects = [], result = decorated(context), numberOfRenders += 1, numberOfRenders > RENDER_LIMIT) throw new Error(\"Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.\");\n      return hooks.addRenderListeners(), result;\n    };\n  },\n  areDepsEqual = (deps, nextDeps) => deps.length === nextDeps.length && deps.every((dep, i) => dep === nextDeps[i]),\n  invalidHooksError = () => new Error(\"Storybook preview hooks can only be called inside decorators and story functions.\");\nfunction getHooksContextOrNull() {\n  return global2.STORYBOOK_HOOKS_CONTEXT || null;\n}\nfunction getHooksContextOrThrow() {\n  let hooks = getHooksContextOrNull();\n  if (hooks == null) throw invalidHooksError();\n  return hooks;\n}\nfunction useHook(name, callback, deps) {\n  let hooks = getHooksContextOrThrow();\n  if (hooks.currentPhase === \"MOUNT\") {\n    deps != null && !Array.isArray(deps) && logger.warn(`${name} received a final argument that is not an array (instead, received ${deps}). When specified, the final argument must be an array.`);\n    let hook = {\n      name,\n      deps\n    };\n    return hooks.currentHooks.push(hook), callback(hook), hook;\n  }\n  if (hooks.currentPhase === \"UPDATE\") {\n    let hook = hooks.getNextHook();\n    if (hook == null) throw new Error(\"Rendered more hooks than during the previous render.\");\n    return hook.name !== name && logger.warn(`Storybook has detected a change in the order of Hooks${hooks.currentDecoratorName ? ` called by ${hooks.currentDecoratorName}` : \"\"}. This will lead to bugs and errors if not fixed.`), deps != null && hook.deps == null && logger.warn(`${name} received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.`), deps != null && hook.deps != null && deps.length !== hook.deps.length && logger.warn(`The final argument passed to ${name} changed size between renders. The order and size of this array must remain constant.\nPrevious: ${hook.deps}\nIncoming: ${deps}`), (deps == null || hook.deps == null || !areDepsEqual(deps, hook.deps)) && (callback(hook), hook.deps = deps), hook;\n  }\n  throw invalidHooksError();\n}\nfunction useMemoLike(name, nextCreate, deps) {\n  let {\n    memoizedState\n  } = useHook(name, hook => {\n    hook.memoizedState = nextCreate();\n  }, deps);\n  return memoizedState;\n}\nfunction useMemo(nextCreate, deps) {\n  return useMemoLike(\"useMemo\", nextCreate, deps);\n}\nfunction useCallback(callback, deps) {\n  return useMemoLike(\"useCallback\", () => callback, deps);\n}\nfunction useRefLike(name, initialValue) {\n  return useMemoLike(name, () => ({\n    current: initialValue\n  }), []);\n}\nfunction useRef(initialValue) {\n  return useRefLike(\"useRef\", initialValue);\n}\nfunction triggerUpdate() {\n  let hooks = getHooksContextOrNull();\n  if (hooks != null && hooks.currentPhase !== \"NONE\") hooks.hasUpdates = !0;else try {\n    addons.getChannel().emit(FORCE_RE_RENDER);\n  } catch {\n    logger.warn(\"State updates of Storybook preview hooks work only in browser\");\n  }\n}\nfunction useStateLike(name, initialState) {\n  let stateRef = useRefLike(name,\n    // @ts-expect-error S type should never be function, but there's no way to tell that to TypeScript\n    typeof initialState == \"function\" ? initialState() : initialState),\n    setState = update => {\n      stateRef.current = typeof update == \"function\" ? update(stateRef.current) : update, triggerUpdate();\n    };\n  return [stateRef.current, setState];\n}\nfunction useState(initialState) {\n  return useStateLike(\"useState\", initialState);\n}\nfunction useReducer(reducer, initialArg, init) {\n  let initialState = init != null ? () => init(initialArg) : initialArg,\n    [state, setState] = useStateLike(\"useReducer\", initialState);\n  return [state, action => setState(prevState => reducer(prevState, action))];\n}\nfunction useEffect(create, deps) {\n  let hooks = getHooksContextOrThrow(),\n    effect = useMemoLike(\"useEffect\", () => ({\n      create\n    }), deps);\n  hooks.currentEffects.includes(effect) || hooks.currentEffects.push(effect);\n}\nfunction useChannel(eventMap, deps = []) {\n  let channel = addons.getChannel();\n  return useEffect(() => (Object.entries(eventMap).forEach(([type, listener]) => channel.on(type, listener)), () => {\n    Object.entries(eventMap).forEach(([type, listener]) => channel.removeListener(type, listener));\n  }), [...Object.keys(eventMap), ...deps]), useCallback(channel.emit.bind(channel), [channel]);\n}\nfunction useStoryContext() {\n  let {\n    currentContext\n  } = getHooksContextOrThrow();\n  if (currentContext == null) throw invalidHooksError();\n  return currentContext;\n}\nfunction useParameter(parameterKey, defaultValue) {\n  let {\n    parameters\n  } = useStoryContext();\n  if (parameterKey) return parameters[parameterKey] ?? defaultValue;\n}\nfunction useArgs() {\n  let channel = addons.getChannel(),\n    {\n      id: storyId,\n      args\n    } = useStoryContext(),\n    updateArgs = useCallback(updatedArgs => channel.emit(UPDATE_STORY_ARGS, {\n      storyId,\n      updatedArgs\n    }), [channel, storyId]),\n    resetArgs = useCallback(argNames => channel.emit(RESET_STORY_ARGS, {\n      storyId,\n      argNames\n    }), [channel, storyId]);\n  return [args, updateArgs, resetArgs];\n}\nfunction useGlobals() {\n  let channel = addons.getChannel(),\n    {\n      globals\n    } = useStoryContext(),\n    updateGlobals = useCallback(newGlobals => channel.emit(UPDATE_GLOBALS, {\n      globals: newGlobals\n    }), [channel]);\n  return [globals, updateGlobals];\n}\n\n// src/preview-api/modules/addons/make-decorator.ts\nvar makeDecorator = ({\n  name,\n  parameterName,\n  wrapper,\n  skipIfNoParametersOrOptions = !1\n}) => {\n  let decorator = options => (storyFn, context) => {\n    let parameters = context.parameters && context.parameters[parameterName];\n    return parameters && parameters.disable || skipIfNoParametersOrOptions && !options && !parameters ? storyFn(context) : wrapper(storyFn, context, {\n      options,\n      parameters\n    });\n  };\n  return (...args) => typeof args[0] == \"function\" ? decorator()(...args) : (...innerArgs) => {\n    if (innerArgs.length > 1) return args.length > 1 ? decorator(args)(...innerArgs) : decorator(...args)(...innerArgs);\n    throw new Error(`Passing stories directly into ${name}() is not allowed,\n        instead use addDecorator(${name}) and pass options with the '${parameterName}' parameter`);\n  };\n};\n\n// src/preview-api/modules/store/StoryStore.ts\nimport { getCoreAnnotations as getCoreAnnotations2 } from \"storybook/internal/csf\";\nimport { CalledExtractOnStoreError, MissingStoryFromCsfFileError } from \"storybook/internal/preview-errors\";\nvar import_memoizerific2 = __toESM(require_memoizerific(), 1);\n\n// src/preview-api/modules/store/args.ts\nimport { once } from \"storybook/internal/client-logger\";\nvar INCOMPATIBLE = Symbol(\"incompatible\"),\n  map = (arg, argType) => {\n    let type = argType.type;\n    if (arg == null || !type || argType.mapping) return arg;\n    switch (type.name) {\n      case \"string\":\n        return String(arg);\n      case \"enum\":\n        return arg;\n      case \"number\":\n        return Number(arg);\n      case \"boolean\":\n        return String(arg) === \"true\";\n      case \"array\":\n        return !type.value || !Array.isArray(arg) ? INCOMPATIBLE : arg.reduce((acc, item, index) => {\n          let mapped = map(item, {\n            type: type.value\n          });\n          return mapped !== INCOMPATIBLE && (acc[index] = mapped), acc;\n        }, new Array(arg.length));\n      case \"object\":\n        return typeof arg == \"string\" || typeof arg == \"number\" ? arg : !type.value || typeof arg != \"object\" ? INCOMPATIBLE : Object.entries(arg).reduce((acc, [key, val]) => {\n          let mapped = map(val, {\n            type: type.value[key]\n          });\n          return mapped === INCOMPATIBLE ? acc : Object.assign(acc, {\n            [key]: mapped\n          });\n        }, {});\n      case \"other\":\n        {\n          let isPrimitiveArg = typeof arg == \"string\" || typeof arg == \"number\" || typeof arg == \"boolean\";\n          return type.value === \"ReactNode\" && isPrimitiveArg ? arg : INCOMPATIBLE;\n        }\n      default:\n        return INCOMPATIBLE;\n    }\n  },\n  mapArgsToTypes = (args, argTypes) => Object.entries(args).reduce((acc, [key, value]) => {\n    if (!argTypes[key]) return acc;\n    let mapped = map(value, argTypes[key]);\n    return mapped === INCOMPATIBLE ? acc : Object.assign(acc, {\n      [key]: mapped\n    });\n  }, {}),\n  combineArgs = (value, update) => Array.isArray(value) && Array.isArray(update) ? update.reduce((acc, upd, index) => (acc[index] = combineArgs(value[index], update[index]), acc), [...value]).filter(v => v !== void 0) : !isPlainObject(value) || !isPlainObject(update) ? update : Object.keys({\n    ...value,\n    ...update\n  }).reduce((acc, key) => {\n    if (key in update) {\n      let combined = combineArgs(value[key], update[key]);\n      combined !== void 0 && (acc[key] = combined);\n    } else acc[key] = value[key];\n    return acc;\n  }, {}),\n  validateOptions = (args, argTypes) => Object.entries(argTypes).reduce((acc, [key, {\n    options\n  }]) => {\n    function allowArg() {\n      return key in args && (acc[key] = args[key]), acc;\n    }\n    if (!options) return allowArg();\n    if (!Array.isArray(options)) return once.error(dedent`\n        Invalid argType: '${key}.options' should be an array.\n\n        More info: https://storybook.js.org/docs/api/arg-types?ref=error\n      `), allowArg();\n    if (options.some(opt => opt && [\"object\", \"function\"].includes(typeof opt))) return once.error(dedent`\n        Invalid argType: '${key}.options' should only contain primitives. Use a 'mapping' for complex values.\n\n        More info: https://storybook.js.org/docs/writing-stories/args?ref=error#mapping-to-complex-arg-values\n      `), allowArg();\n    let isArray = Array.isArray(args[key]),\n      invalidIndex = isArray && args[key].findIndex(val => !options.includes(val)),\n      isValidArray = isArray && invalidIndex === -1;\n    if (args[key] === void 0 || options.includes(args[key]) || isValidArray) return allowArg();\n    let field = isArray ? `${key}[${invalidIndex}]` : key,\n      supportedOptions = options.map(opt => typeof opt == \"string\" ? `'${opt}'` : String(opt)).join(\", \");\n    return once.warn(`Received illegal value for '${field}'. Supported options: ${supportedOptions}`), acc;\n  }, {}),\n  DEEPLY_EQUAL = Symbol(\"Deeply equal\"),\n  deepDiff = (value, update) => {\n    if (typeof value != typeof update) return update;\n    if (isEqual(value, update)) return DEEPLY_EQUAL;\n    if (Array.isArray(value) && Array.isArray(update)) {\n      let res = update.reduce((acc, upd, index) => {\n        let diff = deepDiff(value[index], upd);\n        return diff !== DEEPLY_EQUAL && (acc[index] = diff), acc;\n      }, new Array(update.length));\n      return update.length >= value.length ? res : res.concat(new Array(value.length - update.length).fill(void 0));\n    }\n    return isPlainObject(value) && isPlainObject(update) ? Object.keys({\n      ...value,\n      ...update\n    }).reduce((acc, key) => {\n      let diff = deepDiff(value?.[key], update?.[key]);\n      return diff === DEEPLY_EQUAL ? acc : Object.assign(acc, {\n        [key]: diff\n      });\n    }, {}) : update;\n  },\n  UNTARGETED = \"UNTARGETED\";\nfunction groupArgsByTarget({\n  args,\n  argTypes\n}) {\n  let groupedArgs = {};\n  return Object.entries(args).forEach(([name, value]) => {\n    let {\n      target = UNTARGETED\n    } = argTypes[name] || {};\n    groupedArgs[target] = groupedArgs[target] || {}, groupedArgs[target][name] = value;\n  }), groupedArgs;\n}\n\n// src/preview-api/modules/store/ArgsStore.ts\nfunction deleteUndefined(obj) {\n  return Object.keys(obj).forEach(key => obj[key] === void 0 && delete obj[key]), obj;\n}\nvar ArgsStore = class {\n  constructor() {\n    this.initialArgsByStoryId = {};\n    this.argsByStoryId = {};\n  }\n  get(storyId) {\n    if (!(storyId in this.argsByStoryId)) throw new Error(`No args known for ${storyId} -- has it been rendered yet?`);\n    return this.argsByStoryId[storyId];\n  }\n  setInitial(story) {\n    if (!this.initialArgsByStoryId[story.id]) this.initialArgsByStoryId[story.id] = story.initialArgs, this.argsByStoryId[story.id] = story.initialArgs;else if (this.initialArgsByStoryId[story.id] !== story.initialArgs) {\n      let delta = deepDiff(this.initialArgsByStoryId[story.id], this.argsByStoryId[story.id]);\n      this.initialArgsByStoryId[story.id] = story.initialArgs, this.argsByStoryId[story.id] = story.initialArgs, delta !== DEEPLY_EQUAL && this.updateFromDelta(story, delta);\n    }\n  }\n  updateFromDelta(story, delta) {\n    let validatedDelta = validateOptions(delta, story.argTypes);\n    this.argsByStoryId[story.id] = combineArgs(this.argsByStoryId[story.id], validatedDelta);\n  }\n  updateFromPersisted(story, persisted) {\n    let mappedPersisted = mapArgsToTypes(persisted, story.argTypes);\n    return this.updateFromDelta(story, mappedPersisted);\n  }\n  update(storyId, argsUpdate) {\n    if (!(storyId in this.argsByStoryId)) throw new Error(`No args known for ${storyId} -- has it been rendered yet?`);\n    this.argsByStoryId[storyId] = deleteUndefined({\n      ...this.argsByStoryId[storyId],\n      ...argsUpdate\n    });\n  }\n};\n\n// src/preview-api/modules/store/GlobalsStore.ts\nimport { logger as logger2 } from \"storybook/internal/client-logger\";\n\n// src/preview-api/modules/store/csf/getValuesFromArgTypes.ts\nvar getValuesFromArgTypes = (argTypes = {}) => Object.entries(argTypes).reduce((acc, [arg, {\n  defaultValue\n}]) => (typeof defaultValue < \"u\" && (acc[arg] = defaultValue), acc), {});\n\n// src/preview-api/modules/store/GlobalsStore.ts\nvar GlobalsStore = class {\n  constructor({\n    globals = {},\n    globalTypes = {}\n  }) {\n    this.set({\n      globals,\n      globalTypes\n    });\n  }\n  set({\n    globals = {},\n    globalTypes = {}\n  }) {\n    let delta = this.initialGlobals && deepDiff(this.initialGlobals, this.globals);\n    this.allowedGlobalNames = /* @__PURE__ */new Set([...Object.keys(globals), ...Object.keys(globalTypes)]);\n    let defaultGlobals = getValuesFromArgTypes(globalTypes);\n    this.initialGlobals = {\n      ...defaultGlobals,\n      ...globals\n    }, this.globals = this.initialGlobals, delta && delta !== DEEPLY_EQUAL && this.updateFromPersisted(delta);\n  }\n  filterAllowedGlobals(globals) {\n    return Object.entries(globals).reduce((acc, [key, value]) => (this.allowedGlobalNames.has(key) ? acc[key] = value : logger2.warn(`Attempted to set a global (${key}) that is not defined in initial globals or globalTypes`), acc), {});\n  }\n  updateFromPersisted(persisted) {\n    let allowedUrlGlobals = this.filterAllowedGlobals(persisted);\n    this.globals = {\n      ...this.globals,\n      ...allowedUrlGlobals\n    };\n  }\n  get() {\n    return this.globals;\n  }\n  update(newGlobals) {\n    this.globals = {\n      ...this.globals,\n      ...this.filterAllowedGlobals(newGlobals)\n    };\n    for (let key in newGlobals) newGlobals[key] === void 0 && (this.globals[key] = this.initialGlobals[key]);\n  }\n};\n\n// src/preview-api/modules/store/StoryIndexStore.ts\nvar import_memoizerific = __toESM(require_memoizerific(), 1);\nimport { MissingStoryAfterHmrError } from \"storybook/internal/preview-errors\";\nvar getImportPathMap = (0, import_memoizerific.default)(1)(entries => Object.values(entries).reduce((acc, entry) => (acc[entry.importPath] = acc[entry.importPath] || entry, acc), {})),\n  StoryIndexStore = class {\n    constructor({\n      entries\n    } = {\n      v: 5,\n      entries: {}\n    }) {\n      this.entries = entries;\n    }\n    entryFromSpecifier(specifier) {\n      let entries = Object.values(this.entries);\n      if (specifier === \"*\") return entries[0];\n      if (typeof specifier == \"string\") return this.entries[specifier] ? this.entries[specifier] : entries.find(entry => entry.id.startsWith(specifier));\n      let {\n        name,\n        title\n      } = specifier;\n      return entries.find(entry => entry.name === name && entry.title === title);\n    }\n    storyIdToEntry(storyId) {\n      let storyEntry = this.entries[storyId];\n      if (!storyEntry) throw new MissingStoryAfterHmrError({\n        storyId\n      });\n      return storyEntry;\n    }\n    importPathToEntry(importPath) {\n      return getImportPathMap(this.entries)[importPath];\n    }\n  };\n\n// src/preview-api/modules/store/csf/normalizeInputTypes.ts\nvar normalizeType = type => typeof type == \"string\" ? {\n    name: type\n  } : type,\n  normalizeControl = control => typeof control == \"string\" ? {\n    type: control\n  } : control,\n  normalizeInputType = (inputType, key) => {\n    let {\n        type,\n        control,\n        ...rest\n      } = inputType,\n      normalized = {\n        name: key,\n        ...rest\n      };\n    return type && (normalized.type = normalizeType(type)), control ? normalized.control = normalizeControl(control) : control === !1 && (normalized.control = {\n      disable: !0\n    }), normalized;\n  },\n  normalizeInputTypes = inputTypes => mapValues(inputTypes, normalizeInputType);\n\n// src/preview-api/modules/store/csf/normalizeStory.ts\nimport { deprecate, logger as logger3 } from \"storybook/internal/client-logger\";\nimport { storyNameFromExport, toId } from \"storybook/internal/csf\";\n\n// src/preview-api/modules/store/csf/normalizeArrays.ts\nvar normalizeArrays = array => Array.isArray(array) ? array : array ? [array] : [];\n\n// src/preview-api/modules/store/csf/normalizeStory.ts\nvar deprecatedStoryAnnotation = dedent`\nCSF .story annotations deprecated; annotate story functions directly:\n- StoryFn.story.name => StoryFn.storyName\n- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.\n`;\nfunction normalizeStory(key, storyAnnotations, meta) {\n  let storyObject = storyAnnotations,\n    userStoryFn = typeof storyAnnotations == \"function\" ? storyAnnotations : null,\n    {\n      story\n    } = storyObject;\n  story && (logger3.debug(\"deprecated story\", story), deprecate(deprecatedStoryAnnotation));\n  let exportName = storyNameFromExport(key),\n    name = typeof storyObject != \"function\" && storyObject.name || storyObject.storyName || story?.name || exportName,\n    decorators = [...normalizeArrays(storyObject.decorators), ...normalizeArrays(story?.decorators)],\n    parameters = {\n      ...story?.parameters,\n      ...storyObject.parameters\n    },\n    args = {\n      ...story?.args,\n      ...storyObject.args\n    },\n    argTypes = {\n      ...story?.argTypes,\n      ...storyObject.argTypes\n    },\n    loaders = [...normalizeArrays(storyObject.loaders), ...normalizeArrays(story?.loaders)],\n    beforeEach = [...normalizeArrays(storyObject.beforeEach), ...normalizeArrays(story?.beforeEach)],\n    afterEach = [...normalizeArrays(storyObject.afterEach), ...normalizeArrays(story?.afterEach)],\n    {\n      render,\n      play,\n      tags = [],\n      globals = {}\n    } = storyObject,\n    id = parameters.__id || toId(meta.id, exportName);\n  return {\n    moduleExport: storyAnnotations,\n    id,\n    name,\n    tags,\n    decorators,\n    parameters,\n    args,\n    argTypes: normalizeInputTypes(argTypes),\n    loaders,\n    beforeEach,\n    afterEach,\n    globals,\n    ...(render && {\n      render\n    }),\n    ...(userStoryFn && {\n      userStoryFn\n    }),\n    ...(play && {\n      play\n    })\n  };\n}\n\n// src/preview-api/modules/store/csf/processCSFFile.ts\nimport { logger as logger4 } from \"storybook/internal/client-logger\";\nimport { getStoryChildren, isExportStory, isStory, toTestId } from \"storybook/internal/csf\";\n\n// src/preview-api/modules/store/csf/normalizeComponentAnnotations.ts\nimport { sanitize } from \"storybook/internal/csf\";\nfunction normalizeComponentAnnotations(defaultExport, title = defaultExport.title, importPath) {\n  let {\n    id,\n    argTypes\n  } = defaultExport;\n  return {\n    id: sanitize(id || title),\n    ...defaultExport,\n    title,\n    ...(argTypes && {\n      argTypes: normalizeInputTypes(argTypes)\n    }),\n    parameters: {\n      fileName: importPath,\n      ...defaultExport.parameters\n    }\n  };\n}\n\n// src/preview-api/modules/store/csf/processCSFFile.ts\nvar checkGlobals = parameters => {\n    let {\n      globals,\n      globalTypes\n    } = parameters;\n    (globals || globalTypes) && logger4.error(\"Global args/argTypes can only be set globally\", JSON.stringify({\n      globals,\n      globalTypes\n    }));\n  },\n  checkStorySort = parameters => {\n    let {\n      options\n    } = parameters;\n    options?.storySort && logger4.error(\"The storySort option parameter can only be set globally\");\n  },\n  checkDisallowedParameters = parameters => {\n    parameters && (checkGlobals(parameters), checkStorySort(parameters));\n  };\nfunction processCSFFile(moduleExports, importPath, title) {\n  let {\n      default: defaultExport,\n      __namedExportsOrder,\n      ...namedExports\n    } = moduleExports,\n    firstStory = Object.values(namedExports)[0];\n  if (isStory(firstStory)) {\n    let meta2 = normalizeComponentAnnotations(firstStory.meta.input, title, importPath);\n    checkDisallowedParameters(meta2.parameters);\n    let csfFile2 = {\n      meta: meta2,\n      stories: {},\n      moduleExports\n    };\n    return Object.keys(namedExports).forEach(key => {\n      if (isExportStory(key, meta2)) {\n        let story = namedExports[key],\n          storyMeta = normalizeStory(key, story.input, meta2);\n        checkDisallowedParameters(storyMeta.parameters), csfFile2.stories[storyMeta.id] = storyMeta, getStoryChildren(story).forEach(child => {\n          let name = child.input.name,\n            childId = toTestId(storyMeta.id, name);\n          child.input.parameters ??= {}, child.input.parameters.__id = childId, csfFile2.stories[childId] = normalizeStory(name, child.input, meta2);\n        });\n      }\n    }), csfFile2.projectAnnotations = firstStory.meta.preview.composed, csfFile2;\n  }\n  let meta = normalizeComponentAnnotations(defaultExport, title, importPath);\n  checkDisallowedParameters(meta.parameters);\n  let csfFile = {\n    meta,\n    stories: {},\n    moduleExports\n  };\n  return Object.keys(namedExports).forEach(key => {\n    if (isExportStory(key, meta)) {\n      let storyMeta = normalizeStory(key, namedExports[key], meta);\n      checkDisallowedParameters(storyMeta.parameters), csfFile.stories[storyMeta.id] = storyMeta;\n    }\n  }), csfFile;\n}\n\n// src/preview-api/modules/store/csf/prepareStory.ts\nimport { combineTags, includeConditionalArg } from \"storybook/internal/csf\";\nimport { NoRenderFunctionError } from \"storybook/internal/preview-errors\";\nimport { global as global3 } from \"@storybook/global\";\nimport { global as globalThis2 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/render/mount-utils.ts\nfunction mountDestructured(playFunction) {\n  return playFunction != null && getUsedProps(playFunction).includes(\"mount\");\n}\nfunction getUsedProps(fn) {\n  let match = fn.toString().match(/[^(]*\\(([^)]*)/);\n  if (!match) return [];\n  let args = splitByComma(match[1]);\n  if (!args.length) return [];\n  let first = args[0];\n  return first.startsWith(\"{\") && first.endsWith(\"}\") ? splitByComma(first.slice(1, -1).replace(/\\s/g, \"\")).map(prop => prop.replace(/:.*|=.*/g, \"\")) : [];\n}\nfunction splitByComma(s) {\n  let result = [],\n    stack = [],\n    start = 0;\n  for (let i = 0; i < s.length; i++) if (s[i] === \"{\" || s[i] === \"[\") stack.push(s[i] === \"{\" ? \"}\" : \"]\");else if (s[i] === stack[stack.length - 1]) stack.pop();else if (!stack.length && s[i] === \",\") {\n    let token = s.substring(start, i).trim();\n    token && result.push(token), start = i + 1;\n  }\n  let lastToken = s.substring(start).trim();\n  return lastToken && result.push(lastToken), result;\n}\n\n// src/preview-api/modules/store/decorators.ts\nfunction decorateStory(storyFn, decorator, bindWithContext) {\n  let boundStoryFunction = bindWithContext(storyFn);\n  return context => decorator(boundStoryFunction, context);\n}\nfunction sanitizeStoryContextUpdate({\n  componentId,\n  title,\n  kind,\n  id,\n  name,\n  story,\n  parameters,\n  initialArgs,\n  argTypes,\n  ...update\n} = {}) {\n  return update;\n}\nfunction defaultDecorateStory(storyFn, decorators) {\n  let contextStore = {},\n    bindWithContext = decoratedStoryFn => update => {\n      if (!contextStore.value) throw new Error(\"Decorated function called without init\");\n      return contextStore.value = {\n        ...contextStore.value,\n        ...sanitizeStoryContextUpdate(update)\n      }, decoratedStoryFn(contextStore.value);\n    },\n    decoratedWithContextStore = decorators.reduce((story, decorator) => decorateStory(story, decorator, bindWithContext), storyFn);\n  return context => (contextStore.value = context, decoratedWithContextStore(context));\n}\n\n// src/preview-api/modules/store/csf/prepareStory.ts\nfunction prepareStory(storyAnnotations, componentAnnotations, projectAnnotations) {\n  let {\n      moduleExport,\n      id,\n      name\n    } = storyAnnotations || {},\n    partialAnnotations = preparePartialAnnotations(storyAnnotations, componentAnnotations, projectAnnotations),\n    applyLoaders = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (context) {\n        let loaded = {};\n        for (let loaders of [normalizeArrays(projectAnnotations.loaders), normalizeArrays(componentAnnotations.loaders), normalizeArrays(storyAnnotations.loaders)]) {\n          if (context.abortSignal.aborted) return loaded;\n          let loadResults = yield Promise.all(loaders.map(loader => loader(context)));\n          Object.assign(loaded, ...loadResults);\n        }\n        return loaded;\n      });\n      return function applyLoaders(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    applyBeforeEach = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (context) {\n        let cleanupCallbacks = new Array();\n        for (let beforeEach of [...normalizeArrays(projectAnnotations.beforeEach), ...normalizeArrays(componentAnnotations.beforeEach), ...normalizeArrays(storyAnnotations.beforeEach)]) {\n          if (context.abortSignal.aborted) return cleanupCallbacks;\n          let cleanup = yield beforeEach(context);\n          cleanup && cleanupCallbacks.push(cleanup);\n        }\n        return cleanupCallbacks;\n      });\n      return function applyBeforeEach(_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    applyAfterEach = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(function* (context) {\n        let reversedFinalizers = [...normalizeArrays(projectAnnotations.afterEach), ...normalizeArrays(componentAnnotations.afterEach), ...normalizeArrays(storyAnnotations.afterEach)].reverse();\n        for (let finalizer of reversedFinalizers) {\n          if (context.abortSignal.aborted) return;\n          yield finalizer(context);\n        }\n      });\n      return function applyAfterEach(_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    undecoratedStoryFn = context => context.originalStoryFn(context.args, context),\n    {\n      applyDecorators = defaultDecorateStory,\n      runStep\n    } = projectAnnotations,\n    decorators = [...normalizeArrays(storyAnnotations?.decorators), ...normalizeArrays(componentAnnotations?.decorators), ...normalizeArrays(projectAnnotations?.decorators)],\n    render = storyAnnotations?.userStoryFn || storyAnnotations?.render || componentAnnotations.render || projectAnnotations.render,\n    decoratedStoryFn = applyHooks(applyDecorators)(undecoratedStoryFn, decorators),\n    unboundStoryFn = context => decoratedStoryFn(context),\n    playFunction = storyAnnotations?.play ?? componentAnnotations?.play,\n    usesMount = mountDestructured(playFunction);\n  if (!render && !usesMount) throw new NoRenderFunctionError({\n    id\n  });\n  let defaultMount = context => /*#__PURE__*/_asyncToGenerator(function* () {\n      return yield context.renderToCanvas(), context.canvas;\n    }),\n    mount = storyAnnotations.mount ?? componentAnnotations.mount ?? projectAnnotations.mount ?? defaultMount,\n    testingLibraryRender = projectAnnotations.testingLibraryRender;\n  return {\n    storyGlobals: {},\n    ...partialAnnotations,\n    moduleExport,\n    id,\n    name,\n    story: name,\n    originalStoryFn: render,\n    undecoratedStoryFn,\n    unboundStoryFn,\n    applyLoaders,\n    applyBeforeEach,\n    applyAfterEach,\n    playFunction,\n    runStep,\n    mount,\n    testingLibraryRender,\n    renderToCanvas: projectAnnotations.renderToCanvas,\n    usesMount\n  };\n}\nfunction prepareMeta(componentAnnotations, projectAnnotations, moduleExport) {\n  return {\n    ...preparePartialAnnotations(void 0, componentAnnotations, projectAnnotations),\n    moduleExport\n  };\n}\nfunction preparePartialAnnotations(storyAnnotations, componentAnnotations, projectAnnotations) {\n  let defaultTags = [\"dev\", \"test\"],\n    extraTags = globalThis2.DOCS_OPTIONS?.autodocs === !0 ? [\"autodocs\"] : [],\n    overrideTags = storyAnnotations?.tags?.includes(\"test-fn\") ? [\"!autodocs\"] : [],\n    tags = combineTags(...defaultTags, ...extraTags, ...(projectAnnotations.tags ?? []), ...(componentAnnotations.tags ?? []), ...overrideTags, ...(storyAnnotations?.tags ?? [])),\n    parameters = combineParameters(projectAnnotations.parameters, componentAnnotations.parameters, storyAnnotations?.parameters),\n    {\n      argTypesEnhancers = [],\n      argsEnhancers = []\n    } = projectAnnotations,\n    passedArgTypes = combineParameters(projectAnnotations.argTypes, componentAnnotations.argTypes, storyAnnotations?.argTypes);\n  if (storyAnnotations) {\n    let render = storyAnnotations?.userStoryFn || storyAnnotations?.render || componentAnnotations.render || projectAnnotations.render;\n    parameters.__isArgsStory = render && render.length > 0;\n  }\n  let passedArgs = {\n      ...projectAnnotations.args,\n      ...componentAnnotations.args,\n      ...storyAnnotations?.args\n    },\n    storyGlobals = {\n      ...componentAnnotations.globals,\n      ...storyAnnotations?.globals\n    },\n    contextForEnhancers = {\n      componentId: componentAnnotations.id,\n      title: componentAnnotations.title,\n      kind: componentAnnotations.title,\n      // Back compat\n      id: storyAnnotations?.id || componentAnnotations.id,\n      // if there's no story name, we create a fake one since enhancers expect a name\n      name: storyAnnotations?.name || \"__meta\",\n      story: storyAnnotations?.name || \"__meta\",\n      // Back compat\n      component: componentAnnotations.component,\n      subcomponents: componentAnnotations.subcomponents,\n      tags,\n      parameters,\n      initialArgs: passedArgs,\n      argTypes: passedArgTypes,\n      storyGlobals\n    };\n  contextForEnhancers.argTypes = argTypesEnhancers.reduce((accumulatedArgTypes, enhancer) => enhancer({\n    ...contextForEnhancers,\n    argTypes: accumulatedArgTypes\n  }), contextForEnhancers.argTypes);\n  let initialArgsBeforeEnhancers = {\n    ...passedArgs\n  };\n  contextForEnhancers.initialArgs = [...argsEnhancers].reduce((accumulatedArgs, enhancer) => ({\n    ...accumulatedArgs,\n    ...enhancer({\n      ...contextForEnhancers,\n      initialArgs: accumulatedArgs\n    })\n  }), initialArgsBeforeEnhancers);\n  let {\n    name,\n    story,\n    ...withoutStoryIdentifiers\n  } = contextForEnhancers;\n  return withoutStoryIdentifiers;\n}\nfunction prepareContext(context) {\n  let {\n      args: unmappedArgs\n    } = context,\n    targetedContext = {\n      ...context,\n      allArgs: void 0,\n      argsByTarget: void 0\n    };\n  if (global3.FEATURES?.argTypeTargetsV7) {\n    let argsByTarget = groupArgsByTarget(context);\n    targetedContext = {\n      ...context,\n      allArgs: context.args,\n      argsByTarget,\n      args: argsByTarget[UNTARGETED] || {}\n    };\n  }\n  let mappedArgs = Object.entries(targetedContext.args).reduce((acc, [key, val]) => {\n      if (!targetedContext.argTypes[key]?.mapping) return acc[key] = val, acc;\n      let mappingFn = originalValue => {\n        let mapping = targetedContext.argTypes[key].mapping;\n        return mapping && originalValue in mapping ? mapping[originalValue] : originalValue;\n      };\n      return acc[key] = Array.isArray(val) ? val.map(mappingFn) : mappingFn(val), acc;\n    }, {}),\n    includedArgs = Object.entries(mappedArgs).reduce((acc, [key, val]) => {\n      let argType = targetedContext.argTypes[key] || {};\n      return includeConditionalArg(argType, mappedArgs, targetedContext.globals) && (acc[key] = val), acc;\n    }, {});\n  return {\n    ...targetedContext,\n    unmappedArgs,\n    args: includedArgs\n  };\n}\n\n// src/preview-api/modules/store/inferArgTypes.ts\nimport { logger as logger5 } from \"storybook/internal/client-logger\";\nvar inferType = (value, name, visited) => {\n    let type = typeof value;\n    switch (type) {\n      case \"boolean\":\n      case \"string\":\n      case \"number\":\n      case \"function\":\n      case \"symbol\":\n        return {\n          name: type\n        };\n      default:\n        break;\n    }\n    return value ? visited.has(value) ? (logger5.warn(dedent`\n        We've detected a cycle in arg '${name}'. Args should be JSON-serializable.\n\n        Consider using the mapping feature or fully custom args:\n        - Mapping: https://storybook.js.org/docs/writing-stories/args#mapping-to-complex-arg-values\n        - Custom args: https://storybook.js.org/docs/essentials/controls#fully-custom-args\n      `), {\n      name: \"other\",\n      value: \"cyclic object\"\n    }) : (visited.add(value), Array.isArray(value) ? {\n      name: \"array\",\n      value: value.length > 0 ? inferType(value[0], name, new Set(visited)) : {\n        name: \"other\",\n        value: \"unknown\"\n      }\n    } : {\n      name: \"object\",\n      value: mapValues(value, field => inferType(field, name, new Set(visited)))\n    }) : {\n      name: \"object\",\n      value: {}\n    };\n  },\n  inferArgTypes = context => {\n    let {\n        id,\n        argTypes: userArgTypes = {},\n        initialArgs = {}\n      } = context,\n      argTypes = mapValues(initialArgs, (arg, key) => ({\n        name: key,\n        type: inferType(arg, `${id}.${key}`, /* @__PURE__ */new Set())\n      })),\n      userArgTypesNames = mapValues(userArgTypes, (argType, key) => ({\n        name: key\n      }));\n    return combineParameters(argTypes, userArgTypesNames, userArgTypes);\n  };\ninferArgTypes.secondPass = !0;\n\n// src/preview-api/modules/store/inferControls.ts\nimport { logger as logger6 } from \"storybook/internal/client-logger\";\n\n// src/preview-api/modules/store/filterArgTypes.ts\nvar matches = (name, descriptor) => Array.isArray(descriptor) ? descriptor.includes(name) : name.match(descriptor),\n  filterArgTypes = (argTypes, include, exclude) => !include && !exclude ? argTypes : argTypes && pickBy(argTypes, (argType, key) => {\n    let name = argType.name || key.toString();\n    return !!(!include || matches(name, include)) && (!exclude || !matches(name, exclude));\n  });\n\n// src/preview-api/modules/store/inferControls.ts\nvar inferControl = (argType, name, matchers) => {\n    let {\n      type,\n      options\n    } = argType;\n    if (type) {\n      if (matchers.color && matchers.color.test(name)) {\n        let controlType = type.name;\n        if (controlType === \"string\") return {\n          control: {\n            type: \"color\"\n          }\n        };\n        controlType !== \"enum\" && logger6.warn(`Addon controls: Control of type color only supports string, received \"${controlType}\" instead`);\n      }\n      if (matchers.date && matchers.date.test(name)) return {\n        control: {\n          type: \"date\"\n        }\n      };\n      switch (type.name) {\n        case \"array\":\n          return {\n            control: {\n              type: \"object\"\n            }\n          };\n        case \"boolean\":\n          return {\n            control: {\n              type: \"boolean\"\n            }\n          };\n        case \"string\":\n          return {\n            control: {\n              type: \"text\"\n            }\n          };\n        case \"number\":\n          return {\n            control: {\n              type: \"number\"\n            }\n          };\n        case \"enum\":\n          {\n            let {\n              value\n            } = type;\n            return {\n              control: {\n                type: value?.length <= 5 ? \"radio\" : \"select\"\n              },\n              options: value\n            };\n          }\n        case \"function\":\n        case \"symbol\":\n          return null;\n        default:\n          return {\n            control: {\n              type: options ? \"select\" : \"object\"\n            }\n          };\n      }\n    }\n  },\n  inferControls = context => {\n    let {\n      argTypes,\n      parameters: {\n        __isArgsStory,\n        controls: {\n          include = null,\n          exclude = null,\n          matchers = {}\n        } = {}\n      }\n    } = context;\n    if (!__isArgsStory) return argTypes;\n    let filteredArgTypes = filterArgTypes(argTypes, include, exclude),\n      withControls = mapValues(filteredArgTypes, (argType, name) => argType?.type && inferControl(argType, name.toString(), matchers));\n    return combineParameters(withControls, filteredArgTypes);\n  };\ninferControls.secondPass = !0;\n\n// src/preview-api/modules/store/csf/normalizeProjectAnnotations.ts\nfunction normalizeProjectAnnotations({\n  argTypes,\n  globalTypes,\n  argTypesEnhancers,\n  decorators,\n  loaders,\n  beforeEach,\n  afterEach,\n  initialGlobals,\n  ...annotations\n}) {\n  return {\n    ...(argTypes && {\n      argTypes: normalizeInputTypes(argTypes)\n    }),\n    ...(globalTypes && {\n      globalTypes: normalizeInputTypes(globalTypes)\n    }),\n    decorators: normalizeArrays(decorators),\n    loaders: normalizeArrays(loaders),\n    beforeEach: normalizeArrays(beforeEach),\n    afterEach: normalizeArrays(afterEach),\n    argTypesEnhancers: [...(argTypesEnhancers || []), inferArgTypes,\n    // There's an architectural decision to be made regarding embedded addons in core:\n    //\n    // Option 1: Keep embedded addons but ensure consistency by moving addon-specific code\n    // (like inferControls) to live alongside the addon code itself. This maintains the\n    // concept of core addons while improving code organization.\n    //\n    // Option 2: Fully integrate these addons into core, potentially moving UI components\n    // into the manager and treating them as core features rather than addons. This is a\n    // bigger architectural change requiring careful consideration.\n    //\n    // For now, we're keeping inferControls here as we need time to properly evaluate\n    // these options and their implications. Some features (like Angular's cleanArgsDecorator)\n    // currently rely on this behavior.\n    //\n    // TODO: Make an architectural decision on the handling of core addons\n    inferControls],\n    initialGlobals,\n    ...annotations\n  };\n}\n\n// src/preview-api/modules/store/csf/composeConfigs.ts\nimport { global as global4 } from \"@storybook/global\";\n\n// src/preview-api/modules/store/csf/beforeAll.ts\nvar composeBeforeAllHooks = hooks => /*#__PURE__*/_asyncToGenerator(function* () {\n  let cleanups2 = [];\n  for (let hook of hooks) {\n    let cleanup = yield hook();\n    cleanup && cleanups2.unshift(cleanup);\n  }\n  return /*#__PURE__*/_asyncToGenerator(function* () {\n    for (let cleanup of cleanups2) yield cleanup();\n  });\n});\n\n// src/preview-api/modules/store/csf/stepRunners.ts\nfunction composeStepRunners(stepRunners) {\n  return /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator(function* (label, play, playContext) {\n      yield stepRunners.reduceRight((innerPlay, stepRunner) => /*#__PURE__*/_asyncToGenerator(function* () {\n        return stepRunner(label, innerPlay, playContext);\n      }), /*#__PURE__*/_asyncToGenerator(function* () {\n        return play(playContext);\n      }))();\n    });\n    return function (_x4, _x5, _x6) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n}\n\n// src/preview-api/modules/store/csf/composeConfigs.ts\nfunction getField(moduleExportList, field) {\n  return moduleExportList.map(xs => xs.default?.[field] ?? xs[field]).filter(Boolean);\n}\nfunction getArrayField(moduleExportList, field, options = {}) {\n  return getField(moduleExportList, field).reduce((prev, cur) => {\n    let normalized = normalizeArrays(cur);\n    return options.reverseFileOrder ? [...normalized, ...prev] : [...prev, ...normalized];\n  }, []);\n}\nfunction getObjectField(moduleExportList, field) {\n  return Object.assign({}, ...getField(moduleExportList, field));\n}\nfunction getSingletonField(moduleExportList, field) {\n  return getField(moduleExportList, field).pop();\n}\nfunction composeConfigs(moduleExportList) {\n  let allArgTypeEnhancers = getArrayField(moduleExportList, \"argTypesEnhancers\"),\n    stepRunners = getField(moduleExportList, \"runStep\"),\n    beforeAllHooks = getArrayField(moduleExportList, \"beforeAll\");\n  return {\n    parameters: combineParameters(...getField(moduleExportList, \"parameters\")),\n    decorators: getArrayField(moduleExportList, \"decorators\", {\n      reverseFileOrder: !(global4.FEATURES?.legacyDecoratorFileOrder ?? !1)\n    }),\n    args: getObjectField(moduleExportList, \"args\"),\n    argsEnhancers: getArrayField(moduleExportList, \"argsEnhancers\"),\n    argTypes: getObjectField(moduleExportList, \"argTypes\"),\n    argTypesEnhancers: [...allArgTypeEnhancers.filter(e => !e.secondPass), ...allArgTypeEnhancers.filter(e => e.secondPass)],\n    initialGlobals: getObjectField(moduleExportList, \"initialGlobals\"),\n    globalTypes: getObjectField(moduleExportList, \"globalTypes\"),\n    loaders: getArrayField(moduleExportList, \"loaders\"),\n    beforeAll: composeBeforeAllHooks(beforeAllHooks),\n    beforeEach: getArrayField(moduleExportList, \"beforeEach\"),\n    afterEach: getArrayField(moduleExportList, \"afterEach\"),\n    render: getSingletonField(moduleExportList, \"render\"),\n    renderToCanvas: getSingletonField(moduleExportList, \"renderToCanvas\"),\n    applyDecorators: getSingletonField(moduleExportList, \"applyDecorators\"),\n    runStep: composeStepRunners(stepRunners),\n    tags: getArrayField(moduleExportList, \"tags\"),\n    mount: getSingletonField(moduleExportList, \"mount\"),\n    testingLibraryRender: getSingletonField(moduleExportList, \"testingLibraryRender\")\n  };\n}\n\n// src/preview-api/modules/store/csf/portable-stories.ts\nimport { isExportStory as isExportStory2 } from \"storybook/internal/csf\";\nimport { getCoreAnnotations } from \"storybook/internal/csf\";\nimport { MountMustBeDestructuredError } from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/store/reporter-api.ts\nvar ReporterAPI = class {\n  constructor() {\n    this.reports = [];\n  }\n  addReport(report) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.reports.push(report);\n    })();\n  }\n};\n\n// src/preview-api/modules/store/csf/csf-factory-utils.ts\nimport { isMeta, isStory as isStory2 } from \"storybook/internal/csf\";\nfunction getCsfFactoryAnnotations(story, meta, projectAnnotations) {\n  return isStory2(story) ? {\n    story: story.input,\n    meta: story.meta.input,\n    preview: story.meta.preview.composed\n  } : {\n    story,\n    meta: isMeta(meta) ? meta.input : meta,\n    preview: projectAnnotations\n  };\n}\n\n// src/preview-api/modules/store/csf/portable-stories.ts\nfunction setDefaultProjectAnnotations(_defaultProjectAnnotations) {\n  globalThis.defaultProjectAnnotations = _defaultProjectAnnotations;\n}\nvar DEFAULT_STORY_TITLE = \"ComposedStory\",\n  DEFAULT_STORY_NAME = \"Unnamed Story\";\nfunction extractAnnotation(annotation) {\n  return annotation ? composeConfigs([annotation]) : {};\n}\nfunction setProjectAnnotations(projectAnnotations) {\n  let annotations = Array.isArray(projectAnnotations) ? projectAnnotations : [projectAnnotations];\n  return globalThis.globalProjectAnnotations = composeConfigs([...getCoreAnnotations(), globalThis.defaultProjectAnnotations ?? {}, composeConfigs(annotations.map(extractAnnotation))]), globalThis.globalProjectAnnotations ?? {};\n}\nvar cleanups = [];\nfunction composeStory(storyAnnotations, componentAnnotations, projectAnnotations, defaultConfig, exportsName) {\n  if (storyAnnotations === void 0) throw new Error(\"Expected a story but received undefined.\");\n  componentAnnotations.title = componentAnnotations.title ?? DEFAULT_STORY_TITLE;\n  let normalizedComponentAnnotations = normalizeComponentAnnotations(componentAnnotations),\n    storyName = exportsName || storyAnnotations.storyName || storyAnnotations.story?.name || storyAnnotations.name || DEFAULT_STORY_NAME,\n    normalizedStory = normalizeStory(storyName, storyAnnotations, normalizedComponentAnnotations),\n    normalizedProjectAnnotations = normalizeProjectAnnotations(composeConfigs([defaultConfig ?? globalThis.globalProjectAnnotations ?? {}, projectAnnotations ?? {}])),\n    story = prepareStory(normalizedStory, normalizedComponentAnnotations, normalizedProjectAnnotations),\n    globals = {\n      ...getValuesFromArgTypes(normalizedProjectAnnotations.globalTypes),\n      ...normalizedProjectAnnotations.initialGlobals,\n      ...story.storyGlobals\n    },\n    reporting = new ReporterAPI(),\n    initializeContext = () => {\n      let context = prepareContext({\n        hooks: new HooksContext(),\n        globals,\n        args: {\n          ...story.initialArgs\n        },\n        viewMode: \"story\",\n        reporting,\n        loaded: {},\n        abortSignal: new AbortController().signal,\n        step: (label, play2) => story.runStep(label, play2, context),\n        canvasElement: null,\n        canvas: {},\n        userEvent: {},\n        globalTypes: normalizedProjectAnnotations.globalTypes,\n        ...story,\n        context: null,\n        mount: null\n      });\n      return context.parameters.__isPortableStory = !0, context.context = context, story.renderToCanvas && (context.renderToCanvas = /*#__PURE__*/_asyncToGenerator(function* () {\n        let unmount = yield story.renderToCanvas?.({\n          componentId: story.componentId,\n          title: story.title,\n          id: story.id,\n          name: story.name,\n          tags: story.tags,\n          showMain: () => {},\n          showError: error => {\n            throw new Error(`${error.title}\n${error.description}`);\n          },\n          showException: error => {\n            throw error;\n          },\n          forceRemount: !0,\n          storyContext: context,\n          storyFn: () => story.unboundStoryFn(context),\n          unboundStoryFn: story.unboundStoryFn\n        }, context.canvasElement);\n        unmount && cleanups.push(unmount);\n      })), context.mount = story.mount(context), context;\n    },\n    loadedContext,\n    play = /*#__PURE__*/function () {\n      var _ref1 = _asyncToGenerator(function* (extraContext) {\n        let context = initializeContext();\n        return context.canvasElement ??= globalThis?.document?.body, loadedContext && (context.loaded = loadedContext.loaded), Object.assign(context, extraContext), story.playFunction(context);\n      });\n      return function play(_x7) {\n        return _ref1.apply(this, arguments);\n      };\n    }(),\n    run = extraContext => {\n      let context = initializeContext();\n      return Object.assign(context, extraContext), runStory(story, context);\n    },\n    playFunction = story.playFunction ? play : void 0;\n  return Object.assign(function (extraArgs) {\n    let context = initializeContext();\n    return loadedContext && (context.loaded = loadedContext.loaded), context.args = {\n      ...context.initialArgs,\n      ...extraArgs\n    }, story.unboundStoryFn(context);\n  }, {\n    id: story.id,\n    storyName,\n    load: function () {\n      var _ref10 = _asyncToGenerator(function* () {\n        for (let callback of [...cleanups].reverse()) yield callback();\n        cleanups.length = 0;\n        let context = initializeContext();\n        context.loaded = yield story.applyLoaders(context), cleanups.push(...(yield story.applyBeforeEach(context)).filter(Boolean)), loadedContext = context;\n      });\n      return function load() {\n        return _ref10.apply(this, arguments);\n      };\n    }(),\n    globals,\n    args: story.initialArgs,\n    parameters: story.parameters,\n    argTypes: story.argTypes,\n    play: playFunction,\n    run,\n    reporting,\n    tags: story.tags\n  });\n}\nvar defaultComposeStory = (story, component, project, exportsName) => composeStory(story, component, project, {}, exportsName);\nfunction composeStories(storiesImport, globalConfig, composeStoryFn = defaultComposeStory) {\n  let {\n      default: metaExport,\n      __esModule,\n      __namedExportsOrder,\n      ...stories\n    } = storiesImport,\n    meta = metaExport;\n  return Object.entries(stories).reduce((storiesMap, [exportsName, story]) => {\n    let {\n      story: storyAnnotations,\n      meta: componentAnnotations\n    } = getCsfFactoryAnnotations(story);\n    return !meta && componentAnnotations && (meta = componentAnnotations), isExportStory2(exportsName, meta) ? Object.assign(storiesMap, {\n      [exportsName]: composeStoryFn(storyAnnotations, meta, globalConfig, exportsName)\n    }) : storiesMap;\n  }, {});\n}\nfunction createPlaywrightTest(baseTest) {\n  return baseTest.extend({\n    mount: function () {\n      var _ref11 = _asyncToGenerator(function* ({\n        mount: _mount,\n        page\n      }, use) {\n        yield use(/*#__PURE__*/function () {\n          var _ref12 = _asyncToGenerator(function* (storyRef, ...restArgs) {\n            if (!(\"__pw_type\" in storyRef) || \"__pw_type\" in storyRef && storyRef.__pw_type !== \"jsx\") throw new Error(dedent`\n              Portable stories in Playwright CT only work when referencing JSX elements.\n              Please use JSX format for your components such as:\n\n              instead of:\n              await mount(MyComponent, { props: { foo: 'bar' } })\n\n              do:\n              await mount(<MyComponent foo=\"bar\"/>)\n\n              More info: https://storybook.js.org/docs/api/portable-stories/portable-stories-playwright?ref=error\n            `);\n            let {\n              props,\n              ...storyRefWithoutProps\n            } = storyRef;\n            yield page.evaluate(/*#__PURE__*/function () {\n              var _ref13 = _asyncToGenerator(function* (wrappedStoryRef) {\n                let unwrappedStoryRef = yield globalThis.__pwUnwrapObject?.(wrappedStoryRef);\n                return (\"__pw_type\" in unwrappedStoryRef ? unwrappedStoryRef.type : unwrappedStoryRef)?.load?.();\n              });\n              return function (_x1) {\n                return _ref13.apply(this, arguments);\n              };\n            }(), storyRefWithoutProps);\n            let mountResult = yield _mount(storyRef, ...restArgs);\n            return yield page.evaluate(/*#__PURE__*/function () {\n              var _ref14 = _asyncToGenerator(function* (wrappedStoryRef) {\n                let unwrappedStoryRef = yield globalThis.__pwUnwrapObject?.(wrappedStoryRef),\n                  story = \"__pw_type\" in unwrappedStoryRef ? unwrappedStoryRef.type : unwrappedStoryRef,\n                  canvasElement = document.querySelector(\"#root\");\n                return story?.play?.({\n                  canvasElement\n                });\n              });\n              return function (_x10) {\n                return _ref14.apply(this, arguments);\n              };\n            }(), storyRefWithoutProps), mountResult;\n          });\n          return function (_x0) {\n            return _ref12.apply(this, arguments);\n          };\n        }());\n      });\n      return function mount(_x8, _x9) {\n        return _ref11.apply(this, arguments);\n      };\n    }()\n  });\n}\nfunction runStory(_x11, _x12) {\n  return _runStory.apply(this, arguments);\n} // src/preview-api/modules/store/StoryStore.ts\nfunction _runStory() {\n  _runStory = _asyncToGenerator(function* (story, context) {\n    for (let callback of [...cleanups].reverse()) yield callback();\n    if (cleanups.length = 0, !context.canvasElement) {\n      let container = document.createElement(\"div\");\n      globalThis?.document?.body?.appendChild(container), context.canvasElement = container, cleanups.push(() => {\n        globalThis?.document?.body?.contains(container) && globalThis?.document?.body?.removeChild(container);\n      });\n    }\n    if (context.loaded = yield story.applyLoaders(context), context.abortSignal.aborted) return;\n    cleanups.push(...(yield story.applyBeforeEach(context)).filter(Boolean));\n    let playFunction = story.playFunction,\n      isMountDestructured = story.usesMount;\n    if (isMountDestructured || (yield context.mount()), context.abortSignal.aborted) return;\n    playFunction && (isMountDestructured || (context.mount = /*#__PURE__*/_asyncToGenerator(function* () {\n      throw new MountMustBeDestructuredError({\n        playFunction: playFunction.toString()\n      });\n    })), yield playFunction(context));\n    let cleanUp;\n    isTestEnvironment() ? cleanUp = pauseAnimations() : yield waitForAnimations(context.abortSignal), yield story.applyAfterEach(context), yield cleanUp?.();\n  });\n  return _runStory.apply(this, arguments);\n}\nvar CSF_CACHE_SIZE = 1e3,\n  STORY_CACHE_SIZE = 1e4,\n  StoryStore = class {\n    constructor(storyIndex, importFn, projectAnnotations) {\n      this.importFn = importFn;\n      this.storyIndex = new StoryIndexStore(storyIndex), this.projectAnnotations = normalizeProjectAnnotations(composeConfigs([...getCoreAnnotations2(), projectAnnotations]));\n      let {\n        initialGlobals,\n        globalTypes\n      } = this.projectAnnotations;\n      this.args = new ArgsStore(), this.userGlobals = new GlobalsStore({\n        globals: initialGlobals,\n        globalTypes\n      }), this.hooks = {}, this.cleanupCallbacks = {}, this.processCSFFileWithCache = (0, import_memoizerific2.default)(CSF_CACHE_SIZE)(processCSFFile), this.prepareMetaWithCache = (0, import_memoizerific2.default)(CSF_CACHE_SIZE)(prepareMeta), this.prepareStoryWithCache = (0, import_memoizerific2.default)(STORY_CACHE_SIZE)(prepareStory);\n    }\n    setProjectAnnotations(projectAnnotations) {\n      this.projectAnnotations = normalizeProjectAnnotations(projectAnnotations);\n      let {\n        initialGlobals,\n        globalTypes\n      } = projectAnnotations;\n      this.userGlobals.set({\n        globals: initialGlobals,\n        globalTypes\n      });\n    }\n    // This means that one of the CSF files has changed.\n    // If the `importFn` has changed, we will invalidate both caches.\n    // If the `storyIndex` data has changed, we may or may not invalidate the caches, depending\n    // on whether we've loaded the relevant files yet.\n    onStoriesChanged(_x13) {\n      var _this2 = this;\n      return _asyncToGenerator(function* ({\n        importFn,\n        storyIndex\n      }) {\n        importFn && (_this2.importFn = importFn), storyIndex && (_this2.storyIndex.entries = storyIndex.entries), _this2.cachedCSFFiles && (yield _this2.cacheAllCSFFiles());\n      }).apply(this, arguments);\n    }\n    // Get an entry from the index, waiting on initialization if necessary\n    storyIdToEntry(storyId) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        return _this3.storyIndex.storyIdToEntry(storyId);\n      })();\n    }\n    // To load a single CSF file to service a story we need to look up the importPath in the index\n    loadCSFFileByStoryId(storyId) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        let {\n            importPath,\n            title\n          } = _this4.storyIndex.storyIdToEntry(storyId),\n          moduleExports = yield _this4.importFn(importPath);\n        return _this4.processCSFFileWithCache(moduleExports, importPath, title);\n      })();\n    }\n    loadAllCSFFiles() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        let importPaths = {};\n        return Object.entries(_this5.storyIndex.entries).forEach(([storyId, {\n          importPath\n        }]) => {\n          importPaths[importPath] = storyId;\n        }), (yield Promise.all(Object.entries(importPaths).map(/*#__PURE__*/function () {\n          var _ref15 = _asyncToGenerator(function* ([importPath, storyId]) {\n            return {\n              importPath,\n              csfFile: yield _this5.loadCSFFileByStoryId(storyId)\n            };\n          });\n          return function (_x14) {\n            return _ref15.apply(this, arguments);\n          };\n        }()))).reduce((acc, {\n          importPath,\n          csfFile\n        }) => (acc[importPath] = csfFile, acc), {});\n      })();\n    }\n    cacheAllCSFFiles() {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        _this6.cachedCSFFiles = yield _this6.loadAllCSFFiles();\n      })();\n    }\n    preparedMetaFromCSFFile({\n      csfFile\n    }) {\n      let componentAnnotations = csfFile.meta;\n      return this.prepareMetaWithCache(componentAnnotations, this.projectAnnotations, csfFile.moduleExports.default);\n    }\n    // Load the CSF file for a story and prepare the story from it and the project annotations.\n    loadStory(_x15) {\n      var _this7 = this;\n      return _asyncToGenerator(function* ({\n        storyId\n      }) {\n        let csfFile = yield _this7.loadCSFFileByStoryId(storyId);\n        return _this7.storyFromCSFFile({\n          storyId,\n          csfFile\n        });\n      }).apply(this, arguments);\n    }\n    // This function is synchronous for convenience -- often times if you have a CSF file already\n    // it is easier not to have to await `loadStory`.\n    storyFromCSFFile({\n      storyId,\n      csfFile\n    }) {\n      let storyAnnotations = csfFile.stories[storyId];\n      if (!storyAnnotations) throw new MissingStoryFromCsfFileError({\n        storyId\n      });\n      let componentAnnotations = csfFile.meta,\n        story = this.prepareStoryWithCache(storyAnnotations, componentAnnotations, csfFile.projectAnnotations ?? this.projectAnnotations);\n      return this.args.setInitial(story), this.hooks[story.id] = this.hooks[story.id] || new HooksContext(), story;\n    }\n    // If we have a CSF file we can get all the stories from it synchronously\n    componentStoriesFromCSFFile({\n      csfFile\n    }) {\n      return Object.keys(this.storyIndex.entries).filter(storyId => !!csfFile.stories[storyId]).map(storyId => this.storyFromCSFFile({\n        storyId,\n        csfFile\n      }));\n    }\n    loadEntry(id) {\n      var _this8 = this;\n      return _asyncToGenerator(function* () {\n        let entry = yield _this8.storyIdToEntry(id),\n          storyImports = entry.type === \"docs\" ? entry.storiesImports : [],\n          [entryExports, ...csfFiles] = yield Promise.all([_this8.importFn(entry.importPath), ...storyImports.map(storyImportPath => {\n            let firstStoryEntry = _this8.storyIndex.importPathToEntry(storyImportPath);\n            return _this8.loadCSFFileByStoryId(firstStoryEntry.id);\n          })]);\n        return {\n          entryExports,\n          csfFiles\n        };\n      })();\n    }\n    // A prepared story does not include args, globals or hooks. These are stored in the story store\n    // and updated separately to the (immutable) story.\n    getStoryContext(story, {\n      forceInitialArgs = !1\n    } = {}) {\n      let userGlobals = this.userGlobals.get(),\n        {\n          initialGlobals\n        } = this.userGlobals,\n        reporting = new ReporterAPI();\n      return prepareContext({\n        ...story,\n        args: forceInitialArgs ? story.initialArgs : this.args.get(story.id),\n        initialGlobals,\n        globalTypes: this.projectAnnotations.globalTypes,\n        userGlobals,\n        reporting,\n        globals: {\n          ...userGlobals,\n          ...story.storyGlobals\n        },\n        hooks: this.hooks[story.id]\n      });\n    }\n    addCleanupCallbacks(story, ...callbacks) {\n      this.cleanupCallbacks[story.id] = (this.cleanupCallbacks[story.id] || []).concat(callbacks);\n    }\n    cleanupStory(story) {\n      var _this9 = this;\n      return _asyncToGenerator(function* () {\n        _this9.hooks[story.id].clean();\n        let callbacks = _this9.cleanupCallbacks[story.id];\n        if (callbacks) for (let callback of [...callbacks].reverse()) yield callback();\n        delete _this9.cleanupCallbacks[story.id];\n      })();\n    }\n    extract(options = {\n      includeDocsOnly: !1\n    }) {\n      let {\n        cachedCSFFiles\n      } = this;\n      if (console.log(\"extract: extracting stories\", cachedCSFFiles), !cachedCSFFiles) throw new CalledExtractOnStoreError();\n      let stories = Object.entries(this.storyIndex.entries).reduce((acc, [storyId, entry]) => {\n        if (entry.type === \"docs\") return acc;\n        let csfFile = cachedCSFFiles[entry.importPath],\n          story = this.storyFromCSFFile({\n            storyId,\n            csfFile\n          });\n        return !options.includeDocsOnly && story.parameters.docsOnly || (acc[storyId] = Object.entries(story).reduce((storyAcc, [key, value]) => key === \"story\" && entry.subtype === \"test\" ? {\n          ...storyAcc,\n          story: entry.parentName\n        } : key === \"moduleExport\" || typeof value == \"function\" ? storyAcc : Array.isArray(value) ? Object.assign(storyAcc, {\n          [key]: value.slice().sort()\n        }) : Object.assign(storyAcc, {\n          [key]: value\n        }), {\n          args: story.initialArgs,\n          globals: {\n            ...this.userGlobals.initialGlobals,\n            ...this.userGlobals.globals,\n            ...story.storyGlobals\n          },\n          storyId: entry.parent ? entry.parent : storyId\n        })), acc;\n      }, {});\n      return console.log(\"extract: stories\", stories), stories;\n    }\n  };\n\n// src/preview-api/modules/store/autoTitle.ts\nimport { once as once2 } from \"storybook/internal/client-logger\";\n\n// ../node_modules/slash/index.js\nfunction slash(path) {\n  return path.startsWith(\"\\\\\\\\?\\\\\") ? path : path.replace(/\\\\/g, \"/\");\n}\n\n// src/preview-api/modules/store/autoTitle.ts\nvar sanitize2 = parts => {\n  if (parts.length === 0) return parts;\n  let last = parts[parts.length - 1],\n    lastStripped = last?.replace(/(?:[.](?:story|stories))?([.][^.]+)$/i, \"\");\n  if (parts.length === 1) return [lastStripped];\n  let nextToLast = parts[parts.length - 2];\n  return lastStripped && nextToLast && lastStripped.toLowerCase() === nextToLast.toLowerCase() ? [...parts.slice(0, -2), lastStripped] : lastStripped && (/^(story|stories)([.][^.]+)$/i.test(last) || /^index$/i.test(lastStripped)) ? parts.slice(0, -1) : [...parts.slice(0, -1), lastStripped];\n};\nfunction pathJoin(paths) {\n  return paths.flatMap(p => p.split(\"/\")).filter(Boolean).join(\"/\");\n}\nvar userOrAutoTitleFromSpecifier = (fileName, entry, userTitle) => {\n    let {\n      directory,\n      importPathMatcher,\n      titlePrefix = \"\"\n    } = entry || {};\n    typeof fileName == \"number\" && once2.warn(dedent`\n      CSF Auto-title received a numeric fileName. This typically happens when\n      webpack is mis-configured in production mode. To force webpack to produce\n      filenames, set optimization.moduleIds = \"named\" in your webpack config.\n    `);\n    let normalizedFileName = slash(String(fileName));\n    if (importPathMatcher.exec(normalizedFileName)) {\n      if (!userTitle) {\n        let suffix = normalizedFileName.replace(directory, \"\"),\n          parts = pathJoin([titlePrefix, suffix]).split(\"/\");\n        return parts = sanitize2(parts), parts.join(\"/\");\n      }\n      return titlePrefix ? pathJoin([titlePrefix, userTitle]) : userTitle;\n    }\n  },\n  userOrAutoTitle = (fileName, storiesEntries, userTitle) => {\n    for (let i = 0; i < storiesEntries.length; i += 1) {\n      let title = userOrAutoTitleFromSpecifier(fileName, storiesEntries[i], userTitle);\n      if (title) return title;\n    }\n    return userTitle || void 0;\n  };\n\n// src/preview-api/modules/store/storySort.ts\nvar STORY_KIND_PATH_SEPARATOR = /\\s*\\/\\s*/,\n  storySort = (options = {}) => (a, b) => {\n    if (a.title === b.title && !options.includeNames) return 0;\n    let method = options.method || \"configure\",\n      order = options.order || [],\n      storyTitleA = a.title.trim().split(STORY_KIND_PATH_SEPARATOR),\n      storyTitleB = b.title.trim().split(STORY_KIND_PATH_SEPARATOR);\n    options.includeNames && (storyTitleA.push(a.name), storyTitleB.push(b.name));\n    let depth = 0;\n    for (; storyTitleA[depth] || storyTitleB[depth];) {\n      if (!storyTitleA[depth]) return -1;\n      if (!storyTitleB[depth]) return 1;\n      let nameA = storyTitleA[depth],\n        nameB = storyTitleB[depth];\n      if (nameA !== nameB) {\n        let indexA = order.indexOf(nameA),\n          indexB = order.indexOf(nameB),\n          indexWildcard = order.indexOf(\"*\");\n        return indexA !== -1 || indexB !== -1 ? (indexA === -1 && (indexWildcard !== -1 ? indexA = indexWildcard : indexA = order.length), indexB === -1 && (indexWildcard !== -1 ? indexB = indexWildcard : indexB = order.length), indexA - indexB) : method === \"configure\" ? 0 : nameA.localeCompare(nameB, options.locales ? options.locales : void 0, {\n          numeric: !0,\n          sensitivity: \"accent\"\n        });\n      }\n      let index = order.indexOf(nameA);\n      index === -1 && (index = order.indexOf(\"*\")), order = index !== -1 && Array.isArray(order[index + 1]) ? order[index + 1] : [], depth += 1;\n    }\n    return 0;\n  };\n\n// src/preview-api/modules/store/sortStories.ts\nvar sortStoriesCommon = (stories, storySortParameter, fileNameOrder) => {\n    if (storySortParameter) {\n      let sortFn;\n      typeof storySortParameter == \"function\" ? sortFn = storySortParameter : sortFn = storySort(storySortParameter), stories.sort(sortFn);\n    } else stories.sort((s1, s2) => fileNameOrder.indexOf(s1.importPath) - fileNameOrder.indexOf(s2.importPath));\n    return stories;\n  },\n  sortStoriesV7 = (stories, storySortParameter, fileNameOrder) => {\n    try {\n      return sortStoriesCommon(stories, storySortParameter, fileNameOrder);\n    } catch (err) {\n      throw new Error(dedent`\n    Error sorting stories with sort parameter ${storySortParameter}:\n\n    > ${err.message}\n\n    Are you using a V6-style sort function in V7 mode?\n\n    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort\n  `);\n    }\n  };\n\n// src/preview-api/modules/preview-web/Preview.tsx\nimport { deprecate as deprecate2, logger as logger7 } from \"storybook/internal/client-logger\";\nimport { ARGTYPES_INFO_REQUEST, ARGTYPES_INFO_RESPONSE, CONFIG_ERROR, FORCE_REMOUNT, FORCE_RE_RENDER as FORCE_RE_RENDER2, GLOBALS_UPDATED, PREVIEW_INITIALIZED, RESET_STORY_ARGS as RESET_STORY_ARGS2, SET_GLOBALS, STORY_ARGS_UPDATED, STORY_HOT_UPDATED, STORY_INDEX_INVALIDATED, UPDATE_GLOBALS as UPDATE_GLOBALS2, UPDATE_STORY_ARGS as UPDATE_STORY_ARGS2 } from \"storybook/internal/core-events\";\nimport { CalledPreviewMethodBeforeInitializationError, MissingRenderToCanvasError, StoryIndexFetchError, StoryStoreAccessedBeforeInitializationError } from \"storybook/internal/preview-errors\";\nimport { global as global5 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/render/StoryRender.ts\nimport { PLAY_FUNCTION_THREW_EXCEPTION, STORY_FINISHED, STORY_RENDERED as STORY_RENDERED2, STORY_RENDER_PHASE_CHANGED, UNHANDLED_ERRORS_WHILE_PLAYING } from \"storybook/internal/core-events\";\nimport { MountMustBeDestructuredError as MountMustBeDestructuredError2, NoStoryMountedError } from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/preview-web/render/Render.ts\nvar PREPARE_ABORTED = new Error(\"prepareAborted\");\n\n// src/preview-api/modules/preview-web/render/StoryRender.ts\nvar {\n  AbortController: AbortController2\n} = globalThis;\nfunction serializeError(error) {\n  try {\n    let {\n      name = \"Error\",\n      message = String(error),\n      stack\n    } = error;\n    return {\n      name,\n      message,\n      stack\n    };\n  } catch {\n    return {\n      name: \"Error\",\n      message: String(error)\n    };\n  }\n}\nvar StoryRender = class {\n  constructor(channel, store, renderToScreen, callbacks, id, viewMode, renderOptions = {\n    autoplay: !0,\n    forceInitialArgs: !1\n  }, story) {\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.renderOptions = renderOptions;\n    this.type = \"story\";\n    this.notYetRendered = !0;\n    this.rerenderEnqueued = !1;\n    this.disableKeyListeners = !1;\n    this.teardownRender = () => {};\n    this.torndown = !1;\n    this.abortController = new AbortController2(), this.renderId = Date.now(), story && (this.story = story, this.phase = \"preparing\");\n  }\n  runPhase(signal, phase, phaseFn) {\n    var _this0 = this;\n    return _asyncToGenerator(function* () {\n      _this0.phase = phase, _this0.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n        newPhase: _this0.phase,\n        renderId: _this0.renderId,\n        storyId: _this0.id\n      }), phaseFn && (yield phaseFn(), _this0.checkIfAborted(signal));\n    })();\n  }\n  checkIfAborted(signal) {\n    return signal.aborted && ![\"finished\", \"aborted\", \"errored\"].includes(this.phase) && (this.phase = \"aborted\", this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n      newPhase: this.phase,\n      renderId: this.renderId,\n      storyId: this.id\n    })), signal.aborted;\n  }\n  prepare() {\n    var _this1 = this;\n    return _asyncToGenerator(function* () {\n      if (yield _this1.runPhase(_this1.abortController.signal, \"preparing\", /*#__PURE__*/_asyncToGenerator(function* () {\n        _this1.story = yield _this1.store.loadStory({\n          storyId: _this1.id\n        });\n      })), _this1.abortController.signal.aborted) throw yield _this1.store.cleanupStory(_this1.story), PREPARE_ABORTED;\n    })();\n  }\n  // The two story \"renders\" are equal and have both loaded the same story\n  isEqual(other) {\n    return !!(this.id === other.id && this.story && this.story === other.story);\n  }\n  isPreparing() {\n    return [\"preparing\"].includes(this.phase);\n  }\n  isPending() {\n    return [\"loading\", \"beforeEach\", \"rendering\", \"playing\", \"afterEach\"].includes(this.phase);\n  }\n  renderToElement(canvasElement) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      return _this10.canvasElement = canvasElement, _this10.render({\n        initial: !0,\n        forceRemount: !0\n      });\n    })();\n  }\n  storyContext() {\n    if (!this.story) throw new Error(\"Cannot call storyContext before preparing\");\n    let {\n      forceInitialArgs\n    } = this.renderOptions;\n    return this.store.getStoryContext(this.story, {\n      forceInitialArgs\n    });\n  }\n  render() {\n    var _this11 = this;\n    return _asyncToGenerator(function* ({\n      initial = !1,\n      forceRemount = !1\n    } = {}) {\n      let {\n        canvasElement\n      } = _this11;\n      if (!_this11.story) throw new Error(\"cannot render when not prepared\");\n      let story = _this11.story;\n      if (!canvasElement) throw new Error(\"cannot render when canvasElement is unset\");\n      let {\n        id,\n        componentId,\n        title,\n        name,\n        tags,\n        applyLoaders,\n        applyBeforeEach,\n        applyAfterEach,\n        unboundStoryFn,\n        playFunction,\n        runStep\n      } = story;\n      forceRemount && !initial && (_this11.cancelRender(), _this11.abortController = new AbortController2());\n      let abortSignal = _this11.abortController.signal,\n        mounted = !1,\n        isMountDestructured = story.usesMount;\n      try {\n        let context = {\n          ..._this11.storyContext(),\n          viewMode: _this11.viewMode,\n          abortSignal,\n          canvasElement,\n          loaded: {},\n          step: (label, play) => runStep(label, play, context),\n          context: null,\n          canvas: {},\n          userEvent: {},\n          renderToCanvas: function () {\n            var _ref17 = _asyncToGenerator(function* () {\n              let teardown = yield _this11.renderToScreen(renderContext, canvasElement);\n              _this11.teardownRender = teardown || (() => {}), mounted = !0;\n            });\n            return function renderToCanvas() {\n              return _ref17.apply(this, arguments);\n            };\n          }(),\n          // The story provides (set in a renderer) a mount function that is a higher order function\n          // (context) => (...args) => Canvas\n          //\n          // Before assigning it to the context, we resolve the context dependency,\n          // so that a user can just call it as await mount(...args) in their play function.\n          mount: function () {\n            var _ref18 = _asyncToGenerator(function* (...args) {\n              _this11.callbacks.showStoryDuringRender?.();\n              let mountReturn = null;\n              return yield _this11.runPhase(abortSignal, \"rendering\", /*#__PURE__*/_asyncToGenerator(function* () {\n                mountReturn = yield story.mount(context)(...args);\n              })), isMountDestructured && (yield _this11.runPhase(abortSignal, \"playing\")), mountReturn;\n            });\n            return function mount() {\n              return _ref18.apply(this, arguments);\n            };\n          }()\n        };\n        context.context = context;\n        let renderContext = {\n          componentId,\n          title,\n          kind: title,\n          id,\n          name,\n          story: name,\n          tags,\n          ..._this11.callbacks,\n          showError: error => (_this11.phase = \"errored\", _this11.callbacks.showError(error)),\n          showException: error => (_this11.phase = \"errored\", _this11.callbacks.showException(error)),\n          forceRemount: forceRemount || _this11.notYetRendered,\n          storyContext: context,\n          storyFn: () => unboundStoryFn(context),\n          unboundStoryFn\n        };\n        if (yield _this11.runPhase(abortSignal, \"loading\", /*#__PURE__*/_asyncToGenerator(function* () {\n          context.loaded = yield applyLoaders(context);\n        })), abortSignal.aborted) return;\n        let cleanupCallbacks = yield applyBeforeEach(context);\n        if (_this11.store.addCleanupCallbacks(story, ...cleanupCallbacks), _this11.checkIfAborted(abortSignal) || (!mounted && !isMountDestructured && (yield context.mount()), _this11.notYetRendered = !1, abortSignal.aborted)) return;\n        let ignoreUnhandledErrors = _this11.story.parameters?.test?.dangerouslyIgnoreUnhandledErrors === !0,\n          unhandledErrors = /* @__PURE__ */new Set(),\n          onError = event => {\n            event.error && unhandledErrors.add(event.error);\n          },\n          onUnhandledRejection = event => {\n            event.reason && unhandledErrors.add(event.reason);\n          };\n        if (_this11.renderOptions.autoplay && forceRemount && playFunction && _this11.phase !== \"errored\") {\n          window?.addEventListener?.(\"error\", onError), window?.addEventListener?.(\"unhandledrejection\", onUnhandledRejection), _this11.disableKeyListeners = !0;\n          try {\n            if (isMountDestructured ? yield playFunction(context) : (context.mount = /*#__PURE__*/_asyncToGenerator(function* () {\n              throw new MountMustBeDestructuredError2({\n                playFunction: playFunction.toString()\n              });\n            }), yield _this11.runPhase(abortSignal, \"playing\", /*#__PURE__*/_asyncToGenerator(function* () {\n              return playFunction(context);\n            }))), !mounted) throw new NoStoryMountedError();\n            _this11.checkIfAborted(abortSignal), !ignoreUnhandledErrors && unhandledErrors.size > 0 ? yield _this11.runPhase(abortSignal, \"errored\") : yield _this11.runPhase(abortSignal, \"played\");\n          } catch (error) {\n            if (_this11.callbacks.showStoryDuringRender?.(), yield _this11.runPhase(abortSignal, \"errored\", /*#__PURE__*/_asyncToGenerator(function* () {\n              _this11.channel.emit(PLAY_FUNCTION_THREW_EXCEPTION, serializeError(error));\n            })), _this11.story.parameters.throwPlayFunctionExceptions !== !1) throw error;\n            console.error(error);\n          }\n          if (!ignoreUnhandledErrors && unhandledErrors.size > 0 && _this11.channel.emit(UNHANDLED_ERRORS_WHILE_PLAYING, Array.from(unhandledErrors).map(serializeError)), _this11.disableKeyListeners = !1, window?.removeEventListener?.(\"unhandledrejection\", onUnhandledRejection), window?.removeEventListener?.(\"error\", onError), abortSignal.aborted) return;\n        }\n        yield _this11.runPhase(abortSignal, \"completing\", /*#__PURE__*/_asyncToGenerator(function* () {\n          isTestEnvironment() ? _this11.store.addCleanupCallbacks(story, pauseAnimations()) : yield waitForAnimations(abortSignal);\n        })), yield _this11.runPhase(abortSignal, \"completed\", /*#__PURE__*/_asyncToGenerator(function* () {\n          _this11.channel.emit(STORY_RENDERED2, id);\n        })), _this11.phase !== \"errored\" && (yield _this11.runPhase(abortSignal, \"afterEach\", /*#__PURE__*/_asyncToGenerator(function* () {\n          yield applyAfterEach(context);\n        })));\n        let hasUnhandledErrors = !ignoreUnhandledErrors && unhandledErrors.size > 0,\n          hasSomeReportsFailed = context.reporting.reports.some(report => report.status === \"failed\"),\n          hasStoryErrored = hasUnhandledErrors || hasSomeReportsFailed;\n        yield _this11.runPhase(abortSignal, \"finished\", /*#__PURE__*/_asyncToGenerator(function* () {\n          return _this11.channel.emit(STORY_FINISHED, {\n            storyId: id,\n            status: hasStoryErrored ? \"error\" : \"success\",\n            reporters: context.reporting.reports\n          });\n        }));\n      } catch (err) {\n        _this11.phase = \"errored\", _this11.callbacks.showException(err), yield _this11.runPhase(abortSignal, \"finished\", /*#__PURE__*/_asyncToGenerator(function* () {\n          return _this11.channel.emit(STORY_FINISHED, {\n            storyId: id,\n            status: \"error\",\n            reporters: []\n          });\n        }));\n      }\n      _this11.rerenderEnqueued && (_this11.rerenderEnqueued = !1, _this11.render());\n    }).apply(this, arguments);\n  }\n  /**\n   * Rerender the story. If the story is currently pending (loading/rendering), the rerender will be\n   * enqueued, and will be executed after the current render is completed. Rerendering while playing\n   * will not be enqueued, and will be executed immediately, to support rendering args changes while\n   * playing.\n   */\n  rerender() {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      if (_this12.isPending() && _this12.phase !== \"playing\") _this12.rerenderEnqueued = !0;else return _this12.render();\n    })();\n  }\n  remount() {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      return yield _this13.teardown(), _this13.render({\n        forceRemount: !0\n      });\n    })();\n  }\n  // If the story is torn down (either a new story is rendered or the docs page removes it)\n  // we need to consider the fact that the initial render may not be finished\n  // (possibly the loaders or the play function are still running). We use the controller\n  // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n  // happens inside the user's code.\n  cancelRender() {\n    this.abortController.abort();\n  }\n  cancelPlayFunction() {\n    this.phase === \"playing\" && (this.abortController.abort(), this.runPhase(this.abortController.signal, \"aborted\"));\n  }\n  teardown() {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      _this14.torndown = !0, _this14.cancelRender(), _this14.story && (yield _this14.store.cleanupStory(_this14.story));\n      for (let i = 0; i < 3; i += 1) {\n        if (!_this14.isPending()) {\n          yield _this14.teardownRender();\n          return;\n        }\n        yield new Promise(resolve => setTimeout(resolve, 0));\n      }\n      window?.location?.reload?.(), yield new Promise(() => {});\n    })();\n  }\n};\n\n// src/preview-api/modules/preview-web/Preview.tsx\nvar {\n    fetch\n  } = global5,\n  STORY_INDEX_PATH = \"./index.json\",\n  Preview = class {\n    constructor(importFn, getProjectAnnotations, channel = addons.getChannel(), shouldInitialize = !0) {\n      this.importFn = importFn;\n      this.getProjectAnnotations = getProjectAnnotations;\n      this.channel = channel;\n      this.storyRenders = [];\n      this.storeInitializationPromise = new Promise((resolve, reject) => {\n        this.resolveStoreInitializationPromise = resolve, this.rejectStoreInitializationPromise = reject;\n      }), shouldInitialize && this.initialize();\n    }\n    // Create a proxy object for `__STORYBOOK_STORY_STORE__` and `__STORYBOOK_PREVIEW__.storyStore`\n    // That proxies through to the store once ready, and errors beforehand. This means we can set\n    // `__STORYBOOK_STORY_STORE__ = __STORYBOOK_PREVIEW__.storyStore` without having to wait, and\n    // similarly integrators can access the `storyStore` on the preview at any time, although\n    // it is considered deprecated and we will no longer allow access in 9.0\n    get storyStore() {\n      return new Proxy({}, {\n        get: (_, method) => {\n          if (this.storyStoreValue) return deprecate2(\"Accessing the Story Store is deprecated and will be removed in 9.0\"), this.storyStoreValue[method];\n          throw new StoryStoreAccessedBeforeInitializationError();\n        }\n      });\n    }\n    // INITIALIZATION\n    initialize() {\n      var _this15 = this;\n      return _asyncToGenerator(function* () {\n        _this15.setupListeners();\n        try {\n          let projectAnnotations = yield _this15.getProjectAnnotationsOrRenderError();\n          yield _this15.runBeforeAllHook(projectAnnotations), yield _this15.initializeWithProjectAnnotations(projectAnnotations);\n          let userAgent = globalThis?.navigator?.userAgent;\n          yield _this15.channel.emit(PREVIEW_INITIALIZED, {\n            userAgent\n          });\n        } catch (err) {\n          _this15.rejectStoreInitializationPromise(err);\n        }\n      })();\n    }\n    ready() {\n      return this.storeInitializationPromise;\n    }\n    setupListeners() {\n      this.channel.on(STORY_INDEX_INVALIDATED, this.onStoryIndexChanged.bind(this)), this.channel.on(UPDATE_GLOBALS2, this.onUpdateGlobals.bind(this)), this.channel.on(UPDATE_STORY_ARGS2, this.onUpdateArgs.bind(this)), this.channel.on(ARGTYPES_INFO_REQUEST, this.onRequestArgTypesInfo.bind(this)), this.channel.on(RESET_STORY_ARGS2, this.onResetArgs.bind(this)), this.channel.on(FORCE_RE_RENDER2, this.onForceReRender.bind(this)), this.channel.on(FORCE_REMOUNT, this.onForceRemount.bind(this)), this.channel.on(STORY_HOT_UPDATED, this.onStoryHotUpdated.bind(this));\n    }\n    getProjectAnnotationsOrRenderError() {\n      var _this16 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          let projectAnnotations = yield _this16.getProjectAnnotations();\n          if (_this16.renderToCanvas = projectAnnotations.renderToCanvas, !_this16.renderToCanvas) throw new MissingRenderToCanvasError();\n          return projectAnnotations;\n        } catch (err) {\n          throw _this16.renderPreviewEntryError(\"Error reading preview.js:\", err), err;\n        }\n      })();\n    }\n    // If initialization gets as far as project annotations, this function runs.\n    initializeWithProjectAnnotations(projectAnnotations) {\n      var _this17 = this;\n      return _asyncToGenerator(function* () {\n        _this17.projectAnnotationsBeforeInitialization = projectAnnotations;\n        try {\n          let storyIndex = yield _this17.getStoryIndexFromServer();\n          return _this17.initializeWithStoryIndex(storyIndex);\n        } catch (err) {\n          throw _this17.renderPreviewEntryError(\"Error loading story index:\", err), err;\n        }\n      })();\n    }\n    runBeforeAllHook(projectAnnotations) {\n      var _this18 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          yield _this18.beforeAllCleanup?.(), _this18.beforeAllCleanup = yield projectAnnotations.beforeAll?.();\n        } catch (err) {\n          throw _this18.renderPreviewEntryError(\"Error in beforeAll hook:\", err), err;\n        }\n      })();\n    }\n    getStoryIndexFromServer() {\n      return _asyncToGenerator(function* () {\n        let result = yield fetch(STORY_INDEX_PATH);\n        if (result.status === 200) return result.json();\n        throw new StoryIndexFetchError({\n          text: yield result.text()\n        });\n      })();\n    }\n    // If initialization gets as far as the story index, this function runs.\n    initializeWithStoryIndex(storyIndex) {\n      if (!this.projectAnnotationsBeforeInitialization) throw new Error(\"Cannot call initializeWithStoryIndex until project annotations resolve\");\n      this.storyStoreValue = new StoryStore(storyIndex, this.importFn, this.projectAnnotationsBeforeInitialization), delete this.projectAnnotationsBeforeInitialization, this.setInitialGlobals(), this.resolveStoreInitializationPromise();\n    }\n    setInitialGlobals() {\n      var _this19 = this;\n      return _asyncToGenerator(function* () {\n        _this19.emitGlobals();\n      })();\n    }\n    emitGlobals() {\n      if (!this.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n        methodName: \"emitGlobals\"\n      });\n      let payload = {\n        globals: this.storyStoreValue.userGlobals.get() || {},\n        globalTypes: this.storyStoreValue.projectAnnotations.globalTypes || {}\n      };\n      this.channel.emit(SET_GLOBALS, payload);\n    }\n    // EVENT HANDLERS\n    // This happens when a config file gets reloaded\n    onGetProjectAnnotationsChanged(_x16) {\n      var _this20 = this;\n      return _asyncToGenerator(function* ({\n        getProjectAnnotations\n      }) {\n        delete _this20.previewEntryError, _this20.getProjectAnnotations = getProjectAnnotations;\n        let projectAnnotations = yield _this20.getProjectAnnotationsOrRenderError();\n        if (yield _this20.runBeforeAllHook(projectAnnotations), !_this20.storyStoreValue) {\n          yield _this20.initializeWithProjectAnnotations(projectAnnotations);\n          return;\n        }\n        _this20.storyStoreValue.setProjectAnnotations(projectAnnotations), _this20.emitGlobals();\n      }).apply(this, arguments);\n    }\n    onStoryIndexChanged() {\n      var _this21 = this;\n      return _asyncToGenerator(function* () {\n        if (delete _this21.previewEntryError, !(!_this21.storyStoreValue && !_this21.projectAnnotationsBeforeInitialization)) try {\n          let storyIndex = yield _this21.getStoryIndexFromServer();\n          if (_this21.projectAnnotationsBeforeInitialization) {\n            _this21.initializeWithStoryIndex(storyIndex);\n            return;\n          }\n          yield _this21.onStoriesChanged({\n            storyIndex\n          });\n        } catch (err) {\n          throw _this21.renderPreviewEntryError(\"Error loading story index:\", err), err;\n        }\n      })();\n    }\n    // This happens when a glob gets HMR-ed\n    onStoriesChanged(_x17) {\n      var _this22 = this;\n      return _asyncToGenerator(function* ({\n        importFn,\n        storyIndex\n      }) {\n        if (!_this22.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"onStoriesChanged\"\n        });\n        yield _this22.storyStoreValue.onStoriesChanged({\n          importFn,\n          storyIndex\n        });\n      }).apply(this, arguments);\n    }\n    onUpdateGlobals(_x18) {\n      var _this23 = this;\n      return _asyncToGenerator(function* ({\n        globals: updatedGlobals,\n        currentStory\n      }) {\n        if (_this23.storyStoreValue || (yield _this23.storeInitializationPromise), !_this23.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"onUpdateGlobals\"\n        });\n        if (_this23.storyStoreValue.userGlobals.update(updatedGlobals), currentStory) {\n          let {\n            initialGlobals,\n            storyGlobals,\n            userGlobals,\n            globals\n          } = _this23.storyStoreValue.getStoryContext(currentStory);\n          _this23.channel.emit(GLOBALS_UPDATED, {\n            initialGlobals,\n            userGlobals,\n            storyGlobals,\n            globals\n          });\n        } else {\n          let {\n            initialGlobals,\n            globals\n          } = _this23.storyStoreValue.userGlobals;\n          _this23.channel.emit(GLOBALS_UPDATED, {\n            initialGlobals,\n            userGlobals: globals,\n            storyGlobals: {},\n            globals\n          });\n        }\n        yield Promise.all(_this23.storyRenders.map(r => r.rerender()));\n      }).apply(this, arguments);\n    }\n    onUpdateArgs(_x19) {\n      var _this24 = this;\n      return _asyncToGenerator(function* ({\n        storyId,\n        updatedArgs\n      }) {\n        if (!_this24.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"onUpdateArgs\"\n        });\n        _this24.storyStoreValue.args.update(storyId, updatedArgs), yield Promise.all(_this24.storyRenders.filter(r => r.id === storyId && !r.renderOptions.forceInitialArgs).map(r =>\n        // We only run the play function, with in a force remount.\n        // But when mount is destructured, the rendering happens inside of the play function.\n        r.story && r.story.usesMount ? r.remount() : r.rerender())), _this24.channel.emit(STORY_ARGS_UPDATED, {\n          storyId,\n          args: _this24.storyStoreValue.args.get(storyId)\n        });\n      }).apply(this, arguments);\n    }\n    onRequestArgTypesInfo(_x20) {\n      var _this25 = this;\n      return _asyncToGenerator(function* ({\n        id,\n        payload\n      }) {\n        try {\n          yield _this25.storeInitializationPromise;\n          let story = yield _this25.storyStoreValue?.loadStory(payload);\n          _this25.channel.emit(ARGTYPES_INFO_RESPONSE, {\n            id,\n            success: !0,\n            payload: {\n              argTypes: story?.argTypes || {}\n            },\n            error: null\n          });\n        } catch (e) {\n          _this25.channel.emit(ARGTYPES_INFO_RESPONSE, {\n            id,\n            success: !1,\n            error: e?.message\n          });\n        }\n      }).apply(this, arguments);\n    }\n    onResetArgs(_x21) {\n      var _this26 = this;\n      return _asyncToGenerator(function* ({\n        storyId,\n        argNames\n      }) {\n        if (!_this26.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"onResetArgs\"\n        });\n        let story = _this26.storyRenders.find(r => r.id === storyId)?.story || (yield _this26.storyStoreValue.loadStory({\n            storyId\n          })),\n          updatedArgs = (argNames || [... /* @__PURE__ */new Set([...Object.keys(story.initialArgs), ...Object.keys(_this26.storyStoreValue.args.get(storyId))])]).reduce((acc, argName) => (acc[argName] = story.initialArgs[argName], acc), {});\n        yield _this26.onUpdateArgs({\n          storyId,\n          updatedArgs\n        });\n      }).apply(this, arguments);\n    }\n    // ForceReRender does not include a story id, so we simply must\n    // re-render all stories in case they are relevant\n    onForceReRender() {\n      var _this27 = this;\n      return _asyncToGenerator(function* () {\n        yield Promise.all(_this27.storyRenders.map(r => r.rerender()));\n      })();\n    }\n    onForceRemount(_x22) {\n      var _this28 = this;\n      return _asyncToGenerator(function* ({\n        storyId\n      }) {\n        yield Promise.all(_this28.storyRenders.filter(r => r.id === storyId).map(r => r.remount()));\n      }).apply(this, arguments);\n    }\n    onStoryHotUpdated() {\n      var _this29 = this;\n      return _asyncToGenerator(function* () {\n        yield Promise.all(_this29.storyRenders.map(r => r.cancelPlayFunction()));\n      })();\n    }\n    // Used by docs to render a story to a given element\n    // Note this short-circuits the `prepare()` phase of the StoryRender,\n    // main to be consistent with the previous behaviour. In the future,\n    // we will change it to go ahead and load the story, which will end up being\n    // \"instant\", although async.\n    renderStoryToElement(story, element, callbacks, options) {\n      var _this30 = this;\n      if (!this.renderToCanvas || !this.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n        methodName: \"renderStoryToElement\"\n      });\n      let render = new StoryRender(this.channel, this.storyStoreValue, this.renderToCanvas, callbacks, story.id, \"docs\", options, story);\n      return render.renderToElement(element), this.storyRenders.push(render), /*#__PURE__*/_asyncToGenerator(function* () {\n        yield _this30.teardownRender(render);\n      });\n    }\n    teardownRender(_x23) {\n      var _this31 = this;\n      return _asyncToGenerator(function* (render, {\n        viewModeChanged\n      } = {}) {\n        _this31.storyRenders = _this31.storyRenders.filter(r => r !== render), yield render?.teardown?.({\n          viewModeChanged\n        });\n      }).apply(this, arguments);\n    }\n    // API\n    loadStory(_x24) {\n      var _this32 = this;\n      return _asyncToGenerator(function* ({\n        storyId\n      }) {\n        if (!_this32.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"loadStory\"\n        });\n        return _this32.storyStoreValue.loadStory({\n          storyId\n        });\n      }).apply(this, arguments);\n    }\n    getStoryContext(story, {\n      forceInitialArgs = !1\n    } = {}) {\n      if (!this.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n        methodName: \"getStoryContext\"\n      });\n      return this.storyStoreValue.getStoryContext(story, {\n        forceInitialArgs\n      });\n    }\n    extract(options) {\n      var _this33 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this33.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError({\n          methodName: \"extract\"\n        });\n        if (_this33.previewEntryError) throw _this33.previewEntryError;\n        return yield _this33.storyStoreValue.cacheAllCSFFiles(), _this33.storyStoreValue.extract(options);\n      })();\n    }\n    // UTILITIES\n    renderPreviewEntryError(reason, err) {\n      this.previewEntryError = err, logger7.error(reason), logger7.error(err), this.channel.emit(CONFIG_ERROR, err);\n    }\n  };\n\n// src/preview-api/modules/preview-web/PreviewWeb.tsx\nimport { global as global8 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/PreviewWithSelection.tsx\nimport { logger as logger8 } from \"storybook/internal/client-logger\";\nimport { CURRENT_STORY_WAS_SET, DOCS_PREPARED, GLOBALS_UPDATED as GLOBALS_UPDATED2, PRELOAD_ENTRIES, PREVIEW_KEYDOWN, SET_CURRENT_STORY, STORY_CHANGED, STORY_ERRORED, STORY_MISSING, STORY_PREPARED, STORY_RENDER_PHASE_CHANGED as STORY_RENDER_PHASE_CHANGED2, STORY_SPECIFIED, STORY_THREW_EXCEPTION, STORY_UNCHANGED, UPDATE_QUERY_PARAMS } from \"storybook/internal/core-events\";\nimport { CalledPreviewMethodBeforeInitializationError as CalledPreviewMethodBeforeInitializationError2, EmptyIndexError, MdxFileWithNoCsfReferencesError, NoStoryMatchError } from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/preview-web/render/CsfDocsRender.ts\nimport { DOCS_RENDERED } from \"storybook/internal/core-events\";\n\n// src/preview-api/modules/preview-web/docs-context/DocsContext.ts\nimport { isStory as isStory3 } from \"storybook/internal/csf\";\nvar DocsContext = class {\n  constructor(channel, store, renderStoryToElement, csfFiles) {\n    this.channel = channel;\n    this.store = store;\n    this.renderStoryToElement = renderStoryToElement;\n    this.storyIdByName = storyName => {\n      let storyId = this.nameToStoryId.get(storyName);\n      if (storyId) return storyId;\n      throw new Error(`No story found with that name: ${storyName}`);\n    };\n    this.componentStories = () => this.componentStoriesValue;\n    this.componentStoriesFromCSFFile = csfFile => this.store.componentStoriesFromCSFFile({\n      csfFile\n    });\n    this.storyById = storyId => {\n      if (!storyId) {\n        if (!this.primaryStory) throw new Error(\"No primary story defined for docs entry. Did you forget to use `<Meta>`?\");\n        return this.primaryStory;\n      }\n      let csfFile = this.storyIdToCSFFile.get(storyId);\n      if (!csfFile) throw new Error(`Called \\`storyById\\` for story that was never loaded: ${storyId}`);\n      return this.store.storyFromCSFFile({\n        storyId,\n        csfFile\n      });\n    };\n    this.getStoryContext = story => ({\n      ...this.store.getStoryContext(story),\n      loaded: {},\n      viewMode: \"docs\"\n    });\n    this.loadStory = id => this.store.loadStory({\n      storyId: id\n    });\n    this.componentStoriesValue = [], this.storyIdToCSFFile = /* @__PURE__ */new Map(), this.exportToStory = /* @__PURE__ */new Map(), this.exportsToCSFFile = /* @__PURE__ */new Map(), this.nameToStoryId = /* @__PURE__ */new Map(), this.attachedCSFFiles = /* @__PURE__ */new Set(), csfFiles.forEach((csfFile, index) => {\n      this.referenceCSFFile(csfFile);\n    });\n  }\n  // This docs entry references this CSF file and can synchronously load the stories, as well\n  // as reference them by module export. If the CSF is part of the \"component\" stories, they\n  // can also be referenced by name and are in the componentStories list.\n  referenceCSFFile(csfFile) {\n    this.exportsToCSFFile.set(csfFile.moduleExports, csfFile), this.exportsToCSFFile.set(csfFile.moduleExports.default, csfFile), this.store.componentStoriesFromCSFFile({\n      csfFile\n    }).forEach(story => {\n      let annotation = csfFile.stories[story.id];\n      this.storyIdToCSFFile.set(annotation.id, csfFile), this.exportToStory.set(annotation.moduleExport, story);\n    });\n  }\n  attachCSFFile(csfFile) {\n    if (!this.exportsToCSFFile.has(csfFile.moduleExports)) throw new Error(\"Cannot attach a CSF file that has not been referenced\");\n    if (this.attachedCSFFiles.has(csfFile)) return;\n    this.attachedCSFFiles.add(csfFile), this.store.componentStoriesFromCSFFile({\n      csfFile\n    }).forEach(story => {\n      this.nameToStoryId.set(story.name, story.id), this.componentStoriesValue.push(story), this.primaryStory || (this.primaryStory = story);\n    });\n  }\n  referenceMeta(metaExports, attach) {\n    let resolved = this.resolveModuleExport(metaExports);\n    if (resolved.type !== \"meta\") throw new Error(\"<Meta of={} /> must reference a CSF file module export or meta export. Did you mistakenly reference your component instead of your CSF file?\");\n    attach && this.attachCSFFile(resolved.csfFile);\n  }\n  get projectAnnotations() {\n    let {\n      projectAnnotations\n    } = this.store;\n    if (!projectAnnotations) throw new Error(\"Can't get projectAnnotations from DocsContext before they are initialized\");\n    return projectAnnotations;\n  }\n  resolveAttachedModuleExportType(moduleExportType) {\n    if (moduleExportType === \"story\") {\n      if (!this.primaryStory) throw new Error(\"No primary story attached to this docs file, did you forget to use <Meta of={} />?\");\n      return {\n        type: \"story\",\n        story: this.primaryStory\n      };\n    }\n    if (this.attachedCSFFiles.size === 0) throw new Error(\"No CSF file attached to this docs file, did you forget to use <Meta of={} />?\");\n    let firstAttachedCSFFile = Array.from(this.attachedCSFFiles)[0];\n    if (moduleExportType === \"meta\") return {\n      type: \"meta\",\n      csfFile: firstAttachedCSFFile\n    };\n    let {\n      component\n    } = firstAttachedCSFFile.meta;\n    if (!component) throw new Error(\"Attached CSF file does not defined a component, did you forget to export one?\");\n    return {\n      type: \"component\",\n      component\n    };\n  }\n  resolveModuleExport(moduleExportOrType) {\n    let csfFile = this.exportsToCSFFile.get(moduleExportOrType);\n    if (csfFile) return {\n      type: \"meta\",\n      csfFile\n    };\n    let story = this.exportToStory.get(isStory3(moduleExportOrType) ? moduleExportOrType.input : moduleExportOrType);\n    return story ? {\n      type: \"story\",\n      story\n    } : {\n      type: \"component\",\n      component: moduleExportOrType\n    };\n  }\n  resolveOf(moduleExportOrType, validTypes = []) {\n    let resolved;\n    if ([\"component\", \"meta\", \"story\"].includes(moduleExportOrType)) {\n      let type = moduleExportOrType;\n      resolved = this.resolveAttachedModuleExportType(type);\n    } else resolved = this.resolveModuleExport(moduleExportOrType);\n    if (validTypes.length && !validTypes.includes(resolved.type)) {\n      let prettyType = resolved.type === \"component\" ? \"component or unknown\" : resolved.type;\n      throw new Error(dedent`Invalid value passed to the 'of' prop. The value was resolved to a '${prettyType}' type but the only types for this block are: ${validTypes.join(\", \")}.\n        - Did you pass a component to the 'of' prop when the block only supports a story or a meta?\n        - ... or vice versa?\n        - Did you pass a story, CSF file or meta to the 'of' prop that is not indexed, ie. is not targeted by the 'stories' globs in the main configuration?`);\n    }\n    switch (resolved.type) {\n      case \"component\":\n        return {\n          ...resolved,\n          projectAnnotations: this.projectAnnotations\n        };\n      case \"meta\":\n        return {\n          ...resolved,\n          preparedMeta: this.store.preparedMetaFromCSFFile({\n            csfFile: resolved.csfFile\n          })\n        };\n      case \"story\":\n      default:\n        return resolved;\n    }\n  }\n};\n\n// src/preview-api/modules/preview-web/render/CsfDocsRender.ts\nvar CsfDocsRender = class {\n  constructor(channel, store, entry, callbacks) {\n    this.channel = channel;\n    this.store = store;\n    this.entry = entry;\n    this.callbacks = callbacks;\n    this.type = \"docs\";\n    this.subtype = \"csf\";\n    this.torndown = !1;\n    this.disableKeyListeners = !1;\n    this.preparing = !1;\n    this.id = entry.id, this.renderId = Date.now();\n  }\n  isPreparing() {\n    return this.preparing;\n  }\n  prepare() {\n    var _this34 = this;\n    return _asyncToGenerator(function* () {\n      _this34.preparing = !0;\n      let {\n        entryExports,\n        csfFiles = []\n      } = yield _this34.store.loadEntry(_this34.id);\n      if (_this34.torndown) throw PREPARE_ABORTED;\n      let {\n          importPath,\n          title\n        } = _this34.entry,\n        primaryCsfFile = _this34.store.processCSFFileWithCache(entryExports, importPath, title),\n        primaryStoryId = Object.keys(primaryCsfFile.stories)[0];\n      _this34.story = _this34.store.storyFromCSFFile({\n        storyId: primaryStoryId,\n        csfFile: primaryCsfFile\n      }), _this34.csfFiles = [primaryCsfFile, ...csfFiles], _this34.preparing = !1;\n    })();\n  }\n  isEqual(other) {\n    return !!(this.id === other.id && this.story && this.story === other.story);\n  }\n  docsContext(renderStoryToElement) {\n    if (!this.csfFiles) throw new Error(\"Cannot render docs before preparing\");\n    let docsContext = new DocsContext(this.channel, this.store, renderStoryToElement, this.csfFiles);\n    return this.csfFiles.forEach(csfFile => docsContext.attachCSFFile(csfFile)), docsContext;\n  }\n  renderToElement(canvasElement, renderStoryToElement) {\n    var _this35 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this35.story || !_this35.csfFiles) throw new Error(\"Cannot render docs before preparing\");\n      let docsContext = _this35.docsContext(renderStoryToElement),\n        {\n          docs: docsParameter\n        } = _this35.story.parameters || {};\n      if (!docsParameter) throw new Error(\"Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed\");\n      let renderer = yield docsParameter.renderer(),\n        {\n          render\n        } = renderer,\n        renderDocs = /*#__PURE__*/function () {\n          var _ref30 = _asyncToGenerator(function* () {\n            try {\n              yield render(docsContext, docsParameter, canvasElement), _this35.channel.emit(DOCS_RENDERED, _this35.id);\n            } catch (err) {\n              _this35.callbacks.showException(err);\n            }\n          });\n          return function renderDocs() {\n            return _ref30.apply(this, arguments);\n          };\n        }();\n      return _this35.rerender = /*#__PURE__*/_asyncToGenerator(function* () {\n        return renderDocs();\n      }), _this35.teardownRender = /*#__PURE__*/function () {\n        var _ref32 = _asyncToGenerator(function* ({\n          viewModeChanged\n        }) {\n          !viewModeChanged || !canvasElement || renderer.unmount(canvasElement);\n        });\n        return function (_x25) {\n          return _ref32.apply(this, arguments);\n        };\n      }(), renderDocs();\n    })();\n  }\n  teardown() {\n    var _this36 = this;\n    return _asyncToGenerator(function* ({\n      viewModeChanged\n    } = {}) {\n      _this36.teardownRender?.({\n        viewModeChanged\n      }), _this36.torndown = !0;\n    }).apply(this, arguments);\n  }\n};\n\n// src/preview-api/modules/preview-web/render/MdxDocsRender.ts\nimport { DOCS_RENDERED as DOCS_RENDERED2 } from \"storybook/internal/core-events\";\nvar MdxDocsRender = class {\n  constructor(channel, store, entry, callbacks) {\n    this.channel = channel;\n    this.store = store;\n    this.entry = entry;\n    this.callbacks = callbacks;\n    this.type = \"docs\";\n    this.subtype = \"mdx\";\n    this.torndown = !1;\n    this.disableKeyListeners = !1;\n    this.preparing = !1;\n    this.id = entry.id, this.renderId = Date.now();\n  }\n  isPreparing() {\n    return this.preparing;\n  }\n  prepare() {\n    var _this37 = this;\n    return _asyncToGenerator(function* () {\n      _this37.preparing = !0;\n      let {\n        entryExports,\n        csfFiles = []\n      } = yield _this37.store.loadEntry(_this37.id);\n      if (_this37.torndown) throw PREPARE_ABORTED;\n      _this37.csfFiles = csfFiles, _this37.exports = entryExports, _this37.preparing = !1;\n    })();\n  }\n  isEqual(other) {\n    return !!(this.id === other.id && this.exports && this.exports === other.exports);\n  }\n  docsContext(renderStoryToElement) {\n    if (!this.csfFiles) throw new Error(\"Cannot render docs before preparing\");\n    return new DocsContext(this.channel, this.store, renderStoryToElement, this.csfFiles);\n  }\n  renderToElement(canvasElement, renderStoryToElement) {\n    var _this38 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this38.exports || !_this38.csfFiles || !_this38.store.projectAnnotations) throw new Error(\"Cannot render docs before preparing\");\n      let docsContext = _this38.docsContext(renderStoryToElement),\n        {\n          docs\n        } = _this38.store.projectAnnotations.parameters ?? {};\n      if (!docs) throw new Error(\"Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed\");\n      let docsParameter = {\n          ...docs,\n          page: _this38.exports.default\n        },\n        renderer = yield docs.renderer(),\n        {\n          render\n        } = renderer,\n        renderDocs = /*#__PURE__*/function () {\n          var _ref33 = _asyncToGenerator(function* () {\n            try {\n              yield render(docsContext, docsParameter, canvasElement), _this38.channel.emit(DOCS_RENDERED2, _this38.id);\n            } catch (err) {\n              _this38.callbacks.showException(err);\n            }\n          });\n          return function renderDocs() {\n            return _ref33.apply(this, arguments);\n          };\n        }();\n      return _this38.rerender = /*#__PURE__*/_asyncToGenerator(function* () {\n        return renderDocs();\n      }), _this38.teardownRender = /*#__PURE__*/_asyncToGenerator(function* ({\n        viewModeChanged\n      } = {}) {\n        !viewModeChanged || !canvasElement || (renderer.unmount(canvasElement), _this38.torndown = !0);\n      }), renderDocs();\n    })();\n  }\n  teardown() {\n    var _this39 = this;\n    return _asyncToGenerator(function* ({\n      viewModeChanged\n    } = {}) {\n      _this39.teardownRender?.({\n        viewModeChanged\n      }), _this39.torndown = !0;\n    }).apply(this, arguments);\n  }\n};\n\n// src/preview-api/modules/preview-web/PreviewWithSelection.tsx\nvar globalWindow = globalThis;\nfunction focusInInput(event) {\n  let target = event.composedPath && event.composedPath()[0] || event.target;\n  return /input|textarea/i.test(target.tagName) || target.getAttribute(\"contenteditable\") !== null;\n}\nvar ATTACHED_MDX_TAG = \"attached-mdx\",\n  UNATTACHED_MDX_TAG = \"unattached-mdx\";\nfunction isMdxEntry({\n  tags\n}) {\n  return tags?.includes(UNATTACHED_MDX_TAG) || tags?.includes(ATTACHED_MDX_TAG);\n}\nfunction isStoryRender(r) {\n  return r.type === \"story\";\n}\nfunction isDocsRender(r) {\n  return r.type === \"docs\";\n}\nfunction isCsfDocsRender(r) {\n  return isDocsRender(r) && r.subtype === \"csf\";\n}\nvar PreviewWithSelection = class extends Preview {\n  constructor(importFn, getProjectAnnotations, selectionStore, view) {\n    super(importFn, getProjectAnnotations, void 0, !1);\n    this.importFn = importFn;\n    this.getProjectAnnotations = getProjectAnnotations;\n    this.selectionStore = selectionStore;\n    this.view = view;\n    this.initialize();\n  }\n  setupListeners() {\n    super.setupListeners(), globalWindow.onkeydown = this.onKeydown.bind(this), this.channel.on(SET_CURRENT_STORY, this.onSetCurrentStory.bind(this)), this.channel.on(UPDATE_QUERY_PARAMS, this.onUpdateQueryParams.bind(this)), this.channel.on(PRELOAD_ENTRIES, this.onPreloadStories.bind(this));\n  }\n  setInitialGlobals() {\n    var _this40 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this40.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError2({\n        methodName: \"setInitialGlobals\"\n      });\n      let {\n        globals\n      } = _this40.selectionStore.selectionSpecifier || {};\n      globals && _this40.storyStoreValue.userGlobals.updateFromPersisted(globals), _this40.emitGlobals();\n    })();\n  }\n  // If initialization gets as far as the story index, this function runs.\n  initializeWithStoryIndex(storyIndex) {\n    var _superprop_getInitializeWithStoryIndex = () => super.initializeWithStoryIndex,\n      _this41 = this;\n    return _asyncToGenerator(function* () {\n      return yield _superprop_getInitializeWithStoryIndex().call(_this41, storyIndex), _this41.selectSpecifiedStory();\n    })();\n  }\n  // Use the selection specifier to choose a story, then render it\n  selectSpecifiedStory() {\n    var _this42 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this42.storyStoreValue) throw new CalledPreviewMethodBeforeInitializationError2({\n        methodName: \"selectSpecifiedStory\"\n      });\n      if (_this42.selectionStore.selection) {\n        yield _this42.renderSelection();\n        return;\n      }\n      if (!_this42.selectionStore.selectionSpecifier) {\n        _this42.renderMissingStory();\n        return;\n      }\n      let {\n          storySpecifier,\n          args\n        } = _this42.selectionStore.selectionSpecifier,\n        entry = _this42.storyStoreValue.storyIndex.entryFromSpecifier(storySpecifier);\n      if (!entry) {\n        storySpecifier === \"*\" ? _this42.renderStoryLoadingException(storySpecifier, new EmptyIndexError()) : _this42.renderStoryLoadingException(storySpecifier, new NoStoryMatchError({\n          storySpecifier: storySpecifier.toString()\n        }));\n        return;\n      }\n      let {\n        id: storyId,\n        type: viewMode\n      } = entry;\n      _this42.selectionStore.setSelection({\n        storyId,\n        viewMode\n      }), _this42.channel.emit(STORY_SPECIFIED, _this42.selectionStore.selection), _this42.channel.emit(CURRENT_STORY_WAS_SET, _this42.selectionStore.selection), yield _this42.renderSelection({\n        persistedArgs: args\n      });\n    })();\n  }\n  // EVENT HANDLERS\n  // This happens when a config file gets reloaded\n  onGetProjectAnnotationsChanged(_x26) {\n    var _superprop_getOnGetProjectAnnotationsChanged = () => super.onGetProjectAnnotationsChanged,\n      _this43 = this;\n    return _asyncToGenerator(function* ({\n      getProjectAnnotations\n    }) {\n      yield _superprop_getOnGetProjectAnnotationsChanged().call(_this43, {\n        getProjectAnnotations\n      }), _this43.selectionStore.selection && _this43.renderSelection();\n    }).apply(this, arguments);\n  }\n  // This happens when a glob gets HMR-ed\n  onStoriesChanged(_x27) {\n    var _superprop_getOnStoriesChanged = () => super.onStoriesChanged,\n      _this44 = this;\n    return _asyncToGenerator(function* ({\n      importFn,\n      storyIndex\n    }) {\n      yield _superprop_getOnStoriesChanged().call(_this44, {\n        importFn,\n        storyIndex\n      }), _this44.selectionStore.selection ? yield _this44.renderSelection() : yield _this44.selectSpecifiedStory();\n    }).apply(this, arguments);\n  }\n  onKeydown(event) {\n    if (!this.storyRenders.find(r => r.disableKeyListeners) && !focusInInput(event)) {\n      let {\n        altKey,\n        ctrlKey,\n        metaKey,\n        shiftKey,\n        key,\n        code,\n        keyCode\n      } = event;\n      this.channel.emit(PREVIEW_KEYDOWN, {\n        event: {\n          altKey,\n          ctrlKey,\n          metaKey,\n          shiftKey,\n          key,\n          code,\n          keyCode\n        }\n      });\n    }\n  }\n  onSetCurrentStory(selection) {\n    var _this45 = this;\n    return _asyncToGenerator(function* () {\n      _this45.selectionStore.setSelection({\n        viewMode: \"story\",\n        ...selection\n      }), yield _this45.storeInitializationPromise, _this45.channel.emit(CURRENT_STORY_WAS_SET, _this45.selectionStore.selection), _this45.renderSelection();\n    })();\n  }\n  onUpdateQueryParams(queryParams) {\n    this.selectionStore.setQueryParams(queryParams);\n  }\n  onUpdateGlobals(_x28) {\n    var _superprop_getOnUpdateGlobals = () => super.onUpdateGlobals,\n      _this46 = this;\n    return _asyncToGenerator(function* ({\n      globals\n    }) {\n      let currentStory = _this46.currentRender instanceof StoryRender && _this46.currentRender.story || void 0;\n      _superprop_getOnUpdateGlobals().call(_this46, {\n        globals,\n        currentStory\n      }), (_this46.currentRender instanceof MdxDocsRender || _this46.currentRender instanceof CsfDocsRender) && (yield _this46.currentRender.rerender?.());\n    }).apply(this, arguments);\n  }\n  onUpdateArgs(_x29) {\n    var _superprop_getOnUpdateArgs = () => super.onUpdateArgs,\n      _this47 = this;\n    return _asyncToGenerator(function* ({\n      storyId,\n      updatedArgs\n    }) {\n      _superprop_getOnUpdateArgs().call(_this47, {\n        storyId,\n        updatedArgs\n      });\n    }).apply(this, arguments);\n  }\n  onPreloadStories(_x30) {\n    var _this48 = this;\n    return _asyncToGenerator(function* ({\n      ids\n    }) {\n      yield _this48.storeInitializationPromise, _this48.storyStoreValue && (yield Promise.allSettled(ids.map(id => _this48.storyStoreValue?.loadEntry(id))));\n    }).apply(this, arguments);\n  }\n  // RENDERING\n  // We can either have:\n  // - a story selected in \"story\" viewMode,\n  //     in which case we render it to the root element, OR\n  // - a story selected in \"docs\" viewMode,\n  //     in which case we render the docsPage for that story\n  renderSelection() {\n    var _this49 = this;\n    return _asyncToGenerator(function* ({\n      persistedArgs\n    } = {}) {\n      let {\n        renderToCanvas\n      } = _this49;\n      if (!_this49.storyStoreValue || !renderToCanvas) throw new CalledPreviewMethodBeforeInitializationError2({\n        methodName: \"renderSelection\"\n      });\n      let {\n        selection\n      } = _this49.selectionStore;\n      if (!selection) throw new Error(\"Cannot call renderSelection as no selection was made\");\n      let {\n          storyId\n        } = selection,\n        entry;\n      try {\n        entry = yield _this49.storyStoreValue.storyIdToEntry(storyId);\n      } catch (err) {\n        _this49.currentRender && (yield _this49.teardownRender(_this49.currentRender)), _this49.renderStoryLoadingException(storyId, err);\n        return;\n      }\n      let storyIdChanged = _this49.currentSelection?.storyId !== storyId,\n        viewModeChanged = _this49.currentRender?.type !== entry.type;\n      entry.type === \"story\" ? _this49.view.showPreparingStory({\n        immediate: viewModeChanged\n      }) : _this49.view.showPreparingDocs({\n        immediate: viewModeChanged\n      }), _this49.currentRender?.isPreparing() && (yield _this49.teardownRender(_this49.currentRender));\n      let render;\n      entry.type === \"story\" ? render = new StoryRender(_this49.channel, _this49.storyStoreValue, renderToCanvas, _this49.mainStoryCallbacks(storyId), storyId, \"story\") : isMdxEntry(entry) ? render = new MdxDocsRender(_this49.channel, _this49.storyStoreValue, entry, _this49.mainStoryCallbacks(storyId)) : render = new CsfDocsRender(_this49.channel, _this49.storyStoreValue, entry, _this49.mainStoryCallbacks(storyId));\n      let lastSelection = _this49.currentSelection;\n      _this49.currentSelection = selection;\n      let lastRender = _this49.currentRender;\n      _this49.currentRender = render;\n      try {\n        yield render.prepare();\n      } catch (err) {\n        lastRender && (yield _this49.teardownRender(lastRender)), err !== PREPARE_ABORTED && _this49.renderStoryLoadingException(storyId, err);\n        return;\n      }\n      let implementationChanged = !storyIdChanged && lastRender && !render.isEqual(lastRender);\n      if (persistedArgs && isStoryRender(render) && (invariant(!!render.story), _this49.storyStoreValue.args.updateFromPersisted(render.story, persistedArgs)), lastRender && !lastRender.torndown && !storyIdChanged && !implementationChanged && !viewModeChanged) {\n        _this49.currentRender = lastRender, _this49.channel.emit(STORY_UNCHANGED, storyId), _this49.view.showMain();\n        return;\n      }\n      if (lastRender && (yield _this49.teardownRender(lastRender, {\n        viewModeChanged\n      })), lastSelection && (storyIdChanged || viewModeChanged) && _this49.channel.emit(STORY_CHANGED, storyId), isStoryRender(render)) {\n        invariant(!!render.story);\n        let {\n          parameters,\n          initialArgs,\n          argTypes,\n          unmappedArgs,\n          initialGlobals,\n          userGlobals,\n          storyGlobals,\n          globals\n        } = _this49.storyStoreValue.getStoryContext(render.story);\n        _this49.channel.emit(STORY_PREPARED, {\n          id: storyId,\n          parameters,\n          initialArgs,\n          argTypes,\n          args: unmappedArgs\n        }), _this49.channel.emit(GLOBALS_UPDATED2, {\n          userGlobals,\n          storyGlobals,\n          globals,\n          initialGlobals\n        });\n      } else {\n        let {\n            parameters\n          } = _this49.storyStoreValue.projectAnnotations,\n          {\n            initialGlobals,\n            globals\n          } = _this49.storyStoreValue.userGlobals;\n        if (_this49.channel.emit(GLOBALS_UPDATED2, {\n          globals,\n          initialGlobals,\n          storyGlobals: {},\n          userGlobals: globals\n        }), isCsfDocsRender(render) || render.entry.tags?.includes(ATTACHED_MDX_TAG)) {\n          if (!render.csfFiles) throw new MdxFileWithNoCsfReferencesError({\n            storyId\n          });\n          ({\n            parameters\n          } = _this49.storyStoreValue.preparedMetaFromCSFFile({\n            csfFile: render.csfFiles[0]\n          }));\n        }\n        _this49.channel.emit(DOCS_PREPARED, {\n          id: storyId,\n          parameters\n        });\n      }\n      isStoryRender(render) ? (invariant(!!render.story), _this49.storyRenders.push(render), _this49.currentRender.renderToElement(_this49.view.prepareForStory(render.story))) : _this49.currentRender.renderToElement(_this49.view.prepareForDocs(),\n      // This argument is used for docs, which is currently only compatible with HTMLElements\n      _this49.renderStoryToElement.bind(_this49));\n    }).apply(this, arguments);\n  }\n  teardownRender(_x31) {\n    var _this50 = this;\n    return _asyncToGenerator(function* (render, {\n      viewModeChanged = !1\n    } = {}) {\n      _this50.storyRenders = _this50.storyRenders.filter(r => r !== render), yield render?.teardown?.({\n        viewModeChanged\n      });\n    }).apply(this, arguments);\n  }\n  // UTILITIES\n  mainStoryCallbacks(storyId) {\n    return {\n      showStoryDuringRender: () => this.view.showStoryDuringRender(),\n      showMain: () => this.view.showMain(),\n      showError: err => this.renderError(storyId, err),\n      showException: err => this.renderException(storyId, err)\n    };\n  }\n  renderPreviewEntryError(reason, err) {\n    super.renderPreviewEntryError(reason, err), this.view.showErrorDisplay(err);\n  }\n  renderMissingStory() {\n    this.view.showNoPreview(), this.channel.emit(STORY_MISSING);\n  }\n  renderStoryLoadingException(storySpecifier, err) {\n    logger8.error(err), this.view.showErrorDisplay(err), this.channel.emit(STORY_MISSING, storySpecifier);\n  }\n  // renderException is used if we fail to render the story and it is uncaught by the app layer\n  renderException(storyId, error) {\n    let {\n        name = \"Error\",\n        message = String(error),\n        stack\n      } = error,\n      renderId = this.currentRender?.renderId;\n    this.channel.emit(STORY_THREW_EXCEPTION, {\n      name,\n      message,\n      stack\n    }), this.channel.emit(STORY_RENDER_PHASE_CHANGED2, {\n      newPhase: \"errored\",\n      renderId,\n      storyId\n    }), this.view.showErrorDisplay(error), logger8.error(`Error rendering story '${storyId}':`), logger8.error(error);\n  }\n  // renderError is used by the various app layers to inform the user they have done something\n  // wrong -- for instance returned the wrong thing from a story\n  renderError(storyId, {\n    title,\n    description\n  }) {\n    let renderId = this.currentRender?.renderId;\n    this.channel.emit(STORY_ERRORED, {\n      title,\n      description\n    }), this.channel.emit(STORY_RENDER_PHASE_CHANGED2, {\n      newPhase: \"errored\",\n      renderId,\n      storyId\n    }), this.view.showErrorDisplay({\n      message: title,\n      stack: description\n    }), logger8.error(`Error rendering story ${title}: ${description}`);\n  }\n};\n\n// src/preview-api/modules/preview-web/UrlStore.ts\nvar import_picoquery2 = __toESM(require_main(), 1);\nimport { global as global6 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/parseArgsParam.ts\nimport { once as once3 } from \"storybook/internal/client-logger\";\nvar import_picoquery = __toESM(require_main(), 1);\nvar VALIDATION_REGEXP = /^[a-zA-Z0-9 _-]*$/,\n  NUMBER_REGEXP = /^-?[0-9]+(\\.[0-9]+)?$/,\n  HEX_REGEXP = /^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i,\n  COLOR_REGEXP = /^(rgba?|hsla?)\\(([0-9]{1,3}),\\s?([0-9]{1,3})%?,\\s?([0-9]{1,3})%?,?\\s?([0-9](\\.[0-9]{1,2})?)?\\)$/i,\n  validateArgs = (key = \"\", value) => key === null || key === \"\" || !VALIDATION_REGEXP.test(key) ? !1 : value == null || value instanceof Date || typeof value == \"number\" || typeof value == \"boolean\" ? !0 : typeof value == \"string\" ? VALIDATION_REGEXP.test(value) || NUMBER_REGEXP.test(value) || HEX_REGEXP.test(value) || COLOR_REGEXP.test(value) : Array.isArray(value) ? value.every(v => validateArgs(key, v)) : isPlainObject(value) ? Object.entries(value).every(([k, v]) => validateArgs(k, v)) : !1,\n  QUERY_OPTIONS = {\n    delimiter: \";\",\n    // we're parsing a single query param\n    nesting: !0,\n    arrayRepeat: !0,\n    arrayRepeatSyntax: \"bracket\",\n    nestingSyntax: \"js\",\n    // objects are encoded using dot notation\n    valueDeserializer(str) {\n      if (str.startsWith(\"!\")) {\n        if (str === \"!undefined\") return;\n        if (str === \"!null\") return null;\n        if (str === \"!true\") return !0;\n        if (str === \"!false\") return !1;\n        if (str.startsWith(\"!date(\") && str.endsWith(\")\")) return new Date(str.replaceAll(\" \", \"+\").slice(6, -1));\n        if (str.startsWith(\"!hex(\") && str.endsWith(\")\")) return `#${str.slice(5, -1)}`;\n        let color = str.slice(1).match(COLOR_REGEXP);\n        if (color) return str.startsWith(\"!rgba\") || str.startsWith(\"!RGBA\") ? `${color[1]}(${color[2]}, ${color[3]}, ${color[4]}, ${color[5]})` : str.startsWith(\"!hsla\") || str.startsWith(\"!HSLA\") ? `${color[1]}(${color[2]}, ${color[3]}%, ${color[4]}%, ${color[5]})` : str.startsWith(\"!rgb\") || str.startsWith(\"!RGB\") ? `${color[1]}(${color[2]}, ${color[3]}, ${color[4]})` : `${color[1]}(${color[2]}, ${color[3]}%, ${color[4]}%)`;\n      }\n      return NUMBER_REGEXP.test(str) ? Number(str) : str;\n    }\n  },\n  parseArgsParam = argsString => {\n    let parts = argsString.split(\";\").map(part => part.replace(\"=\", \"~\").replace(\":\", \"=\"));\n    return Object.entries((0, import_picoquery.parse)(parts.join(\";\"), QUERY_OPTIONS)).reduce((acc, [key, value]) => validateArgs(key, value) ? Object.assign(acc, {\n      [key]: value\n    }) : (once3.warn(dedent`\n      Omitted potentially unsafe URL args.\n\n      More info: https://storybook.js.org/docs/writing-stories/args#setting-args-through-the-url?ref=error\n    `), acc), {});\n  };\n\n// src/preview-api/modules/preview-web/UrlStore.ts\nvar {\n  history,\n  document: document2\n} = global6;\nfunction pathToId(path) {\n  let match = (path || \"\").match(/^\\/story\\/(.+)/);\n  if (!match) throw new Error(`Invalid path '${path}',  must start with '/story/'`);\n  return match[1];\n}\nvar getQueryString = ({\n    selection,\n    extraParams\n  }) => {\n    let search = document2?.location.search.slice(1),\n      {\n        path,\n        selectedKind,\n        selectedStory,\n        ...rest\n      } = (0, import_picoquery2.parse)(search);\n    return `?${(0, import_picoquery2.stringify)({\n      ...rest,\n      ...extraParams,\n      ...(selection && {\n        id: selection.storyId,\n        viewMode: selection.viewMode\n      })\n    })}`;\n  },\n  setPath = selection => {\n    if (!selection) return;\n    let query = getQueryString({\n        selection\n      }),\n      {\n        hash = \"\"\n      } = document2.location;\n    document2.title = selection.storyId, history.replaceState({}, \"\", `${document2.location.pathname}${query}${hash}`);\n  },\n  isObject = val => val != null && typeof val == \"object\" && Array.isArray(val) === !1,\n  getFirstString = v => {\n    if (v !== void 0) {\n      if (typeof v == \"string\") return v;\n      if (Array.isArray(v)) return getFirstString(v[0]);\n      if (isObject(v)) return getFirstString(Object.values(v).filter(Boolean));\n    }\n  },\n  getSelectionSpecifierFromPath = () => {\n    if (typeof document2 < \"u\") {\n      let queryStr = document2.location.search.slice(1),\n        query = (0, import_picoquery2.parse)(queryStr),\n        args = typeof query.args == \"string\" ? parseArgsParam(query.args) : void 0,\n        globals = typeof query.globals == \"string\" ? parseArgsParam(query.globals) : void 0,\n        viewMode = getFirstString(query.viewMode);\n      if (typeof viewMode != \"string\" || !viewMode) viewMode = \"story\";else if (!viewMode.match(/docs|story/)) return null;\n      let path = getFirstString(query.path),\n        storyId = path ? pathToId(path) : getFirstString(query.id);\n      if (storyId) return {\n        storySpecifier: storyId,\n        args,\n        globals,\n        viewMode\n      };\n    }\n    return null;\n  },\n  UrlStore = class {\n    constructor() {\n      this.selectionSpecifier = getSelectionSpecifierFromPath();\n    }\n    setSelection(selection) {\n      this.selection = selection, setPath(this.selection);\n    }\n    setQueryParams(queryParams) {\n      let query = getQueryString({\n          extraParams: queryParams\n        }),\n        {\n          hash = \"\"\n        } = document2.location;\n      history.replaceState({}, \"\", `${document2.location.pathname}${query}${hash}`);\n    }\n  };\n\n// src/preview-api/modules/preview-web/WebView.ts\nvar import_ansi_to_html = __toESM(require_ansi_to_html(), 1),\n  import_picoquery3 = __toESM(require_main(), 1);\nimport { logger as logger9 } from \"storybook/internal/client-logger\";\nimport { global as global7 } from \"@storybook/global\";\nvar {\n    document: document3\n  } = global7,\n  PREPARING_DELAY = 100,\n  Mode = /* @__PURE__ */(Mode2 => (Mode2.MAIN = \"MAIN\", Mode2.NOPREVIEW = \"NOPREVIEW\", Mode2.PREPARING_STORY = \"PREPARING_STORY\", Mode2.PREPARING_DOCS = \"PREPARING_DOCS\", Mode2.ERROR = \"ERROR\", Mode2))(Mode || {}),\n  classes = {\n    PREPARING_STORY: \"sb-show-preparing-story\",\n    PREPARING_DOCS: \"sb-show-preparing-docs\",\n    MAIN: \"sb-show-main\",\n    NOPREVIEW: \"sb-show-nopreview\",\n    ERROR: \"sb-show-errordisplay\"\n  },\n  layoutClassMap = {\n    centered: \"sb-main-centered\",\n    fullscreen: \"sb-main-fullscreen\",\n    padded: \"sb-main-padded\"\n  },\n  ansiConverter = new import_ansi_to_html.default({\n    escapeXML: !0\n  }),\n  WebView = class {\n    constructor() {\n      this.testing = !1;\n      if (typeof document3 < \"u\") {\n        let {\n          __SPECIAL_TEST_PARAMETER__\n        } = (0, import_picoquery3.parse)(document3.location.search.slice(1));\n        switch (__SPECIAL_TEST_PARAMETER__) {\n          case \"preparing-story\":\n            {\n              this.showPreparingStory(), this.testing = !0;\n              break;\n            }\n          case \"preparing-docs\":\n            {\n              this.showPreparingDocs(), this.testing = !0;\n              break;\n            }\n          default:\n        }\n      }\n    }\n    // Get ready to render a story, returning the element to render to\n    prepareForStory(story) {\n      return this.showStory(), this.applyLayout(story.parameters.layout), document3.documentElement.scrollTop = 0, document3.documentElement.scrollLeft = 0, this.storyRoot();\n    }\n    storyRoot() {\n      return document3.getElementById(\"storybook-root\");\n    }\n    prepareForDocs() {\n      return this.showMain(), this.showDocs(), this.applyLayout(\"fullscreen\"), document3.documentElement.scrollTop = 0, document3.documentElement.scrollLeft = 0, this.docsRoot();\n    }\n    docsRoot() {\n      return document3.getElementById(\"storybook-docs\");\n    }\n    applyLayout(layout = \"padded\") {\n      if (layout === \"none\") {\n        document3.body.classList.remove(this.currentLayoutClass), this.currentLayoutClass = null;\n        return;\n      }\n      this.checkIfLayoutExists(layout);\n      let layoutClass = layoutClassMap[layout];\n      document3.body.classList.remove(this.currentLayoutClass), document3.body.classList.add(layoutClass), this.currentLayoutClass = layoutClass;\n    }\n    checkIfLayoutExists(layout) {\n      layoutClassMap[layout] || logger9.warn(dedent`\n          The desired layout: ${layout} is not a valid option.\n          The possible options are: ${Object.keys(layoutClassMap).join(\", \")}, none.\n        `);\n    }\n    showMode(mode) {\n      clearTimeout(this.preparingTimeout), Object.keys(Mode).forEach(otherMode => {\n        otherMode === mode ? document3.body.classList.add(classes[otherMode]) : document3.body.classList.remove(classes[otherMode]);\n      });\n    }\n    showErrorDisplay({\n      message = \"\",\n      stack = \"\"\n    }) {\n      let header = message,\n        detail = stack,\n        parts = message.split(`\n`);\n      parts.length > 1 && ([header] = parts, detail = parts.slice(1).join(`\n`).replace(/^\\n/, \"\")), document3.getElementById(\"error-message\").innerHTML = ansiConverter.toHtml(header), document3.getElementById(\"error-stack\").innerHTML = ansiConverter.toHtml(detail), this.showMode(\"ERROR\" /* ERROR */);\n    }\n    showNoPreview() {\n      this.testing || (this.showMode(\"NOPREVIEW\" /* NOPREVIEW */), this.storyRoot()?.setAttribute(\"hidden\", \"true\"), this.docsRoot()?.setAttribute(\"hidden\", \"true\"));\n    }\n    showPreparingStory({\n      immediate = !1\n    } = {}) {\n      clearTimeout(this.preparingTimeout), immediate ? this.showMode(\"PREPARING_STORY\" /* PREPARING_STORY */) : this.preparingTimeout = setTimeout(() => this.showMode(\"PREPARING_STORY\" /* PREPARING_STORY */), PREPARING_DELAY);\n    }\n    showPreparingDocs({\n      immediate = !1\n    } = {}) {\n      clearTimeout(this.preparingTimeout), immediate ? this.showMode(\"PREPARING_DOCS\" /* PREPARING_DOCS */) : this.preparingTimeout = setTimeout(() => this.showMode(\"PREPARING_DOCS\" /* PREPARING_DOCS */), PREPARING_DELAY);\n    }\n    showMain() {\n      this.showMode(\"MAIN\" /* MAIN */);\n    }\n    showDocs() {\n      this.storyRoot().setAttribute(\"hidden\", \"true\"), this.docsRoot().removeAttribute(\"hidden\");\n    }\n    showStory() {\n      this.docsRoot().setAttribute(\"hidden\", \"true\"), this.storyRoot().removeAttribute(\"hidden\");\n    }\n    showStoryDuringRender() {\n      document3.body.classList.add(classes.MAIN);\n    }\n  };\n\n// src/preview-api/modules/preview-web/PreviewWeb.tsx\nvar PreviewWeb = class extends PreviewWithSelection {\n  constructor(importFn, getProjectAnnotations) {\n    super(importFn, getProjectAnnotations, new UrlStore(), new WebView());\n    this.importFn = importFn;\n    this.getProjectAnnotations = getProjectAnnotations;\n    global8.__STORYBOOK_PREVIEW__ = this;\n  }\n};\n\n// src/preview-api/modules/preview-web/simulate-pageload.ts\nimport { global as global9 } from \"@storybook/global\";\nvar {\n    document: document4\n  } = global9,\n  runScriptTypes = [\"application/javascript\", \"application/ecmascript\", \"application/x-ecmascript\", \"application/x-javascript\", \"text/ecmascript\", \"text/javascript\", \"text/javascript1.0\", \"text/javascript1.1\", \"text/javascript1.2\", \"text/javascript1.3\", \"text/javascript1.4\", \"text/javascript1.5\", \"text/jscript\", \"text/livescript\", \"text/x-ecmascript\", \"text/x-javascript\",\n  // Support modern javascript\n  \"module\"],\n  SCRIPT = \"script\",\n  SCRIPTS_ROOT_ID = \"scripts-root\";\nfunction simulateDOMContentLoaded() {\n  let DOMContentLoadedEvent = document4.createEvent(\"Event\");\n  DOMContentLoadedEvent.initEvent(\"DOMContentLoaded\", !0, !0), document4.dispatchEvent(DOMContentLoadedEvent);\n}\nfunction insertScript($script, callback, $scriptRoot) {\n  let scriptEl = document4.createElement(\"script\");\n  scriptEl.type = $script.type === \"module\" ? \"module\" : \"text/javascript\", $script.src ? (scriptEl.onload = callback, scriptEl.onerror = callback, scriptEl.src = $script.src) : scriptEl.textContent = $script.innerText, $scriptRoot ? $scriptRoot.appendChild(scriptEl) : document4.head.appendChild(scriptEl), $script.parentNode.removeChild($script), $script.src || callback();\n}\nfunction insertScriptsSequentially(scriptsToExecute, callback, index = 0) {\n  scriptsToExecute[index](() => {\n    index++, index === scriptsToExecute.length ? callback() : insertScriptsSequentially(scriptsToExecute, callback, index);\n  });\n}\nfunction simulatePageLoad($container) {\n  let $scriptsRoot = document4.getElementById(SCRIPTS_ROOT_ID);\n  $scriptsRoot ? $scriptsRoot.innerHTML = \"\" : ($scriptsRoot = document4.createElement(\"div\"), $scriptsRoot.id = SCRIPTS_ROOT_ID, document4.body.appendChild($scriptsRoot));\n  let $scripts = Array.from($container.querySelectorAll(SCRIPT));\n  if ($scripts.length) {\n    let scriptsToExecute = [];\n    $scripts.forEach($script => {\n      let typeAttr = $script.getAttribute(\"type\");\n      (!typeAttr || runScriptTypes.includes(typeAttr)) && scriptsToExecute.push(callback => insertScript($script, callback, $scriptsRoot));\n    }), scriptsToExecute.length && insertScriptsSequentially(scriptsToExecute, simulateDOMContentLoaded, void 0);\n  } else simulateDOMContentLoaded();\n}\n\n// src/preview-api/modules/preview-web/emitTransformCode.ts\nfunction emitTransformCode(_x32, _x33) {\n  return _emitTransformCode.apply(this, arguments);\n}\nfunction _emitTransformCode() {\n  _emitTransformCode = _asyncToGenerator(function* (source, context) {\n    let transform = context.parameters?.docs?.source?.transform,\n      {\n        id,\n        unmappedArgs\n      } = context,\n      transformed = transform && source ? transform?.(source, context) : source,\n      result = transformed ? yield transformed : void 0;\n    addons.getChannel().emit(SNIPPET_RENDERED, {\n      id,\n      source: result,\n      args: unmappedArgs\n    });\n  });\n  return _emitTransformCode.apply(this, arguments);\n}\nexport { mockChannel, addons, HooksContext, applyHooks, useMemo, useCallback, useRef, useState, useReducer, useEffect, useChannel, useStoryContext, useParameter, useArgs, useGlobals, makeDecorator, combineArgs, normalizeArrays, normalizeStory, mountDestructured, decorateStory, sanitizeStoryContextUpdate, defaultDecorateStory, prepareStory, prepareMeta, filterArgTypes, inferControls, normalizeProjectAnnotations, composeStepRunners, composeConfigs, ReporterAPI, getCsfFactoryAnnotations, setDefaultProjectAnnotations, setProjectAnnotations, composeStory, composeStories, createPlaywrightTest, StoryStore, userOrAutoTitleFromSpecifier, userOrAutoTitle, sortStoriesV7, Preview, DocsContext, PreviewWithSelection, UrlStore, WebView, PreviewWeb, simulateDOMContentLoaded, simulatePageLoad, emitTransformCode };","map":{"version":3,"names":["isTestEnvironment","pauseAnimations","waitForAnimations","require_main","SNIPPET_RENDERED","combineParameters","isEqual","invariant","require_ansi_to_html","mapValues","pickBy","isPlainObject","require_memoizerific","dedent","__toESM","global","Channel","mockChannel","transport","setHandler","send","AddonStore","constructor","getChannel","channel","setChannel","ready","promise","hasChannel","resolve","Promise","res","KEY","getAddonsStore","addons","logger","FORCE_RE_RENDER","RESET_STORY_ARGS","STORY_RENDERED","UPDATE_GLOBALS","UPDATE_STORY_ARGS","global2","HooksContext","hookListsMap","mountedDecorators","prevMountedDecorators","currentHooks","nextHookIndex","currentPhase","currentEffects","prevEffects","currentDecoratorName","hasUpdates","currentContext","renderListener","storyId","id","triggerEffects","removeRenderListeners","init","WeakMap","Set","clean","forEach","effect","destroy","getNextHook","hook","includes","create","addRenderListeners","on","removeListener","hookify","fn","hookified","args","hooks","prevPhase","prevHooks","prevNextHookIndex","prevDecoratorName","name","has","get","set","add","prevContext","STORYBOOK_HOOKS_CONTEXT","result","Error","originalFn","numberOfRenders","RENDER_LIMIT","applyHooks","applyDecorators","storyFn","decorators","decorated","map","decorator","context","areDepsEqual","deps","nextDeps","length","every","dep","i","invalidHooksError","getHooksContextOrNull","getHooksContextOrThrow","useHook","callback","Array","isArray","warn","push","useMemoLike","nextCreate","memoizedState","useMemo","useCallback","useRefLike","initialValue","current","useRef","triggerUpdate","emit","useStateLike","initialState","stateRef","setState","update","useState","useReducer","reducer","initialArg","state","action","prevState","useEffect","useChannel","eventMap","Object","entries","type","listener","keys","bind","useStoryContext","useParameter","parameterKey","defaultValue","parameters","useArgs","updateArgs","updatedArgs","resetArgs","argNames","useGlobals","globals","updateGlobals","newGlobals","makeDecorator","parameterName","wrapper","skipIfNoParametersOrOptions","options","disable","innerArgs","getCoreAnnotations","getCoreAnnotations2","CalledExtractOnStoreError","MissingStoryFromCsfFileError","import_memoizerific2","once","INCOMPATIBLE","Symbol","arg","argType","mapping","String","Number","value","reduce","acc","item","index","mapped","key","val","assign","isPrimitiveArg","mapArgsToTypes","argTypes","combineArgs","upd","filter","v","combined","validateOptions","allowArg","error","some","opt","invalidIndex","findIndex","isValidArray","field","supportedOptions","join","DEEPLY_EQUAL","deepDiff","diff","concat","fill","UNTARGETED","groupArgsByTarget","groupedArgs","target","deleteUndefined","obj","ArgsStore","initialArgsByStoryId","argsByStoryId","setInitial","story","initialArgs","delta","updateFromDelta","validatedDelta","updateFromPersisted","persisted","mappedPersisted","argsUpdate","logger2","getValuesFromArgTypes","GlobalsStore","globalTypes","initialGlobals","allowedGlobalNames","defaultGlobals","filterAllowedGlobals","allowedUrlGlobals","import_memoizerific","MissingStoryAfterHmrError","getImportPathMap","default","values","entry","importPath","StoryIndexStore","entryFromSpecifier","specifier","find","startsWith","title","storyIdToEntry","storyEntry","importPathToEntry","normalizeType","normalizeControl","control","normalizeInputType","inputType","rest","normalized","normalizeInputTypes","inputTypes","deprecate","logger3","storyNameFromExport","toId","normalizeArrays","array","deprecatedStoryAnnotation","normalizeStory","storyAnnotations","meta","storyObject","userStoryFn","debug","exportName","storyName","loaders","beforeEach","afterEach","render","play","tags","__id","moduleExport","logger4","getStoryChildren","isExportStory","isStory","toTestId","sanitize","normalizeComponentAnnotations","defaultExport","fileName","checkGlobals","JSON","stringify","checkStorySort","storySort","checkDisallowedParameters","processCSFFile","moduleExports","__namedExportsOrder","namedExports","firstStory","meta2","input","csfFile2","stories","storyMeta","child","childId","projectAnnotations","preview","composed","csfFile","combineTags","includeConditionalArg","NoRenderFunctionError","global3","globalThis2","mountDestructured","playFunction","getUsedProps","match","toString","splitByComma","first","endsWith","slice","replace","prop","s","stack","start","pop","token","substring","trim","lastToken","decorateStory","bindWithContext","boundStoryFunction","sanitizeStoryContextUpdate","componentId","kind","defaultDecorateStory","contextStore","decoratedStoryFn","decoratedWithContextStore","prepareStory","componentAnnotations","partialAnnotations","preparePartialAnnotations","applyLoaders","_ref","_asyncToGenerator","loaded","abortSignal","aborted","loadResults","all","loader","_x","apply","arguments","applyBeforeEach","_ref2","cleanupCallbacks","cleanup","_x2","applyAfterEach","_ref3","reversedFinalizers","reverse","finalizer","_x3","undecoratedStoryFn","originalStoryFn","runStep","unboundStoryFn","usesMount","defaultMount","renderToCanvas","canvas","mount","testingLibraryRender","storyGlobals","prepareMeta","defaultTags","extraTags","DOCS_OPTIONS","autodocs","overrideTags","argTypesEnhancers","argsEnhancers","passedArgTypes","__isArgsStory","passedArgs","contextForEnhancers","component","subcomponents","accumulatedArgTypes","enhancer","initialArgsBeforeEnhancers","accumulatedArgs","withoutStoryIdentifiers","prepareContext","unmappedArgs","targetedContext","allArgs","argsByTarget","FEATURES","argTypeTargetsV7","mappedArgs","mappingFn","originalValue","includedArgs","logger5","inferType","visited","inferArgTypes","userArgTypes","userArgTypesNames","secondPass","logger6","matches","descriptor","filterArgTypes","include","exclude","inferControl","matchers","color","test","controlType","date","inferControls","controls","filteredArgTypes","withControls","normalizeProjectAnnotations","annotations","global4","composeBeforeAllHooks","cleanups2","unshift","composeStepRunners","stepRunners","_ref7","label","playContext","reduceRight","innerPlay","stepRunner","_x4","_x5","_x6","getField","moduleExportList","xs","Boolean","getArrayField","prev","cur","reverseFileOrder","getObjectField","getSingletonField","composeConfigs","allArgTypeEnhancers","beforeAllHooks","legacyDecoratorFileOrder","e","beforeAll","isExportStory2","MountMustBeDestructuredError","ReporterAPI","reports","addReport","report","_this","isMeta","isStory2","getCsfFactoryAnnotations","setDefaultProjectAnnotations","_defaultProjectAnnotations","globalThis","defaultProjectAnnotations","DEFAULT_STORY_TITLE","DEFAULT_STORY_NAME","extractAnnotation","annotation","setProjectAnnotations","globalProjectAnnotations","cleanups","composeStory","defaultConfig","exportsName","normalizedComponentAnnotations","normalizedStory","normalizedProjectAnnotations","reporting","initializeContext","viewMode","AbortController","signal","step","play2","canvasElement","userEvent","__isPortableStory","unmount","showMain","showError","description","showException","forceRemount","storyContext","loadedContext","_ref1","extraContext","document","body","_x7","run","runStory","extraArgs","load","_ref10","defaultComposeStory","project","composeStories","storiesImport","globalConfig","composeStoryFn","metaExport","__esModule","storiesMap","createPlaywrightTest","baseTest","extend","_ref11","page","use","_ref12","storyRef","restArgs","__pw_type","props","storyRefWithoutProps","evaluate","_ref13","wrappedStoryRef","unwrappedStoryRef","__pwUnwrapObject","_x1","mountResult","_ref14","querySelector","_x10","_x0","_x8","_x9","_x11","_x12","_runStory","container","createElement","appendChild","contains","removeChild","isMountDestructured","cleanUp","CSF_CACHE_SIZE","STORY_CACHE_SIZE","StoryStore","storyIndex","importFn","userGlobals","processCSFFileWithCache","prepareMetaWithCache","prepareStoryWithCache","onStoriesChanged","_x13","_this2","cachedCSFFiles","cacheAllCSFFiles","_this3","loadCSFFileByStoryId","_this4","loadAllCSFFiles","_this5","importPaths","_ref15","_x14","_this6","preparedMetaFromCSFFile","loadStory","_x15","_this7","storyFromCSFFile","componentStoriesFromCSFFile","loadEntry","_this8","storyImports","storiesImports","entryExports","csfFiles","storyImportPath","firstStoryEntry","getStoryContext","forceInitialArgs","addCleanupCallbacks","callbacks","cleanupStory","_this9","extract","includeDocsOnly","console","log","docsOnly","storyAcc","subtype","parentName","sort","parent","once2","slash","path","sanitize2","parts","last","lastStripped","nextToLast","toLowerCase","pathJoin","paths","flatMap","p","split","userOrAutoTitleFromSpecifier","userTitle","directory","importPathMatcher","titlePrefix","normalizedFileName","exec","suffix","userOrAutoTitle","storiesEntries","STORY_KIND_PATH_SEPARATOR","a","b","includeNames","method","order","storyTitleA","storyTitleB","depth","nameA","nameB","indexA","indexOf","indexB","indexWildcard","localeCompare","locales","numeric","sensitivity","sortStoriesCommon","storySortParameter","fileNameOrder","sortFn","s1","s2","sortStoriesV7","err","message","deprecate2","logger7","ARGTYPES_INFO_REQUEST","ARGTYPES_INFO_RESPONSE","CONFIG_ERROR","FORCE_REMOUNT","FORCE_RE_RENDER2","GLOBALS_UPDATED","PREVIEW_INITIALIZED","RESET_STORY_ARGS2","SET_GLOBALS","STORY_ARGS_UPDATED","STORY_HOT_UPDATED","STORY_INDEX_INVALIDATED","UPDATE_GLOBALS2","UPDATE_STORY_ARGS2","CalledPreviewMethodBeforeInitializationError","MissingRenderToCanvasError","StoryIndexFetchError","StoryStoreAccessedBeforeInitializationError","global5","PLAY_FUNCTION_THREW_EXCEPTION","STORY_FINISHED","STORY_RENDERED2","STORY_RENDER_PHASE_CHANGED","UNHANDLED_ERRORS_WHILE_PLAYING","MountMustBeDestructuredError2","NoStoryMountedError","PREPARE_ABORTED","AbortController2","serializeError","StoryRender","store","renderToScreen","renderOptions","autoplay","notYetRendered","rerenderEnqueued","disableKeyListeners","teardownRender","torndown","abortController","renderId","Date","now","phase","runPhase","phaseFn","_this0","newPhase","checkIfAborted","prepare","_this1","other","isPreparing","isPending","renderToElement","_this10","initial","_this11","cancelRender","mounted","_ref17","teardown","renderContext","_ref18","showStoryDuringRender","mountReturn","ignoreUnhandledErrors","dangerouslyIgnoreUnhandledErrors","unhandledErrors","onError","event","onUnhandledRejection","reason","window","addEventListener","size","throwPlayFunctionExceptions","from","removeEventListener","hasUnhandledErrors","hasSomeReportsFailed","status","hasStoryErrored","reporters","rerender","_this12","remount","_this13","abort","cancelPlayFunction","_this14","setTimeout","location","reload","fetch","STORY_INDEX_PATH","Preview","getProjectAnnotations","shouldInitialize","storyRenders","storeInitializationPromise","reject","resolveStoreInitializationPromise","rejectStoreInitializationPromise","initialize","storyStore","Proxy","_","storyStoreValue","_this15","setupListeners","getProjectAnnotationsOrRenderError","runBeforeAllHook","initializeWithProjectAnnotations","userAgent","navigator","onStoryIndexChanged","onUpdateGlobals","onUpdateArgs","onRequestArgTypesInfo","onResetArgs","onForceReRender","onForceRemount","onStoryHotUpdated","_this16","renderPreviewEntryError","_this17","projectAnnotationsBeforeInitialization","getStoryIndexFromServer","initializeWithStoryIndex","_this18","beforeAllCleanup","json","text","setInitialGlobals","_this19","emitGlobals","methodName","payload","onGetProjectAnnotationsChanged","_x16","_this20","previewEntryError","_this21","_x17","_this22","_x18","_this23","updatedGlobals","currentStory","r","_x19","_this24","_x20","_this25","success","_x21","_this26","argName","_this27","_x22","_this28","_this29","renderStoryToElement","element","_this30","_x23","_this31","viewModeChanged","_x24","_this32","_this33","global8","logger8","CURRENT_STORY_WAS_SET","DOCS_PREPARED","GLOBALS_UPDATED2","PRELOAD_ENTRIES","PREVIEW_KEYDOWN","SET_CURRENT_STORY","STORY_CHANGED","STORY_ERRORED","STORY_MISSING","STORY_PREPARED","STORY_RENDER_PHASE_CHANGED2","STORY_SPECIFIED","STORY_THREW_EXCEPTION","STORY_UNCHANGED","UPDATE_QUERY_PARAMS","CalledPreviewMethodBeforeInitializationError2","EmptyIndexError","MdxFileWithNoCsfReferencesError","NoStoryMatchError","DOCS_RENDERED","isStory3","DocsContext","storyIdByName","nameToStoryId","componentStories","componentStoriesValue","storyById","primaryStory","storyIdToCSFFile","Map","exportToStory","exportsToCSFFile","attachedCSFFiles","referenceCSFFile","attachCSFFile","referenceMeta","metaExports","attach","resolved","resolveModuleExport","resolveAttachedModuleExportType","moduleExportType","firstAttachedCSFFile","moduleExportOrType","resolveOf","validTypes","prettyType","preparedMeta","CsfDocsRender","preparing","_this34","primaryCsfFile","primaryStoryId","docsContext","_this35","docs","docsParameter","renderer","renderDocs","_ref30","_ref32","_x25","_this36","DOCS_RENDERED2","MdxDocsRender","_this37","exports","_this38","_ref33","_this39","globalWindow","focusInInput","composedPath","tagName","getAttribute","ATTACHED_MDX_TAG","UNATTACHED_MDX_TAG","isMdxEntry","isStoryRender","isDocsRender","isCsfDocsRender","PreviewWithSelection","selectionStore","view","onkeydown","onKeydown","onSetCurrentStory","onUpdateQueryParams","onPreloadStories","_this40","selectionSpecifier","_superprop_getInitializeWithStoryIndex","_this41","call","selectSpecifiedStory","_this42","selection","renderSelection","renderMissingStory","storySpecifier","renderStoryLoadingException","setSelection","persistedArgs","_x26","_superprop_getOnGetProjectAnnotationsChanged","_this43","_x27","_superprop_getOnStoriesChanged","_this44","altKey","ctrlKey","metaKey","shiftKey","code","keyCode","_this45","queryParams","setQueryParams","_x28","_superprop_getOnUpdateGlobals","_this46","currentRender","_x29","_superprop_getOnUpdateArgs","_this47","_x30","_this48","ids","allSettled","_this49","storyIdChanged","currentSelection","showPreparingStory","immediate","showPreparingDocs","mainStoryCallbacks","lastSelection","lastRender","implementationChanged","prepareForStory","prepareForDocs","_x31","_this50","renderError","renderException","showErrorDisplay","showNoPreview","import_picoquery2","global6","once3","import_picoquery","VALIDATION_REGEXP","NUMBER_REGEXP","HEX_REGEXP","COLOR_REGEXP","validateArgs","k","QUERY_OPTIONS","delimiter","nesting","arrayRepeat","arrayRepeatSyntax","nestingSyntax","valueDeserializer","str","replaceAll","parseArgsParam","argsString","part","parse","history","document2","pathToId","getQueryString","extraParams","search","selectedKind","selectedStory","setPath","query","hash","replaceState","pathname","isObject","getFirstString","getSelectionSpecifierFromPath","queryStr","UrlStore","import_ansi_to_html","import_picoquery3","logger9","global7","document3","PREPARING_DELAY","Mode","Mode2","MAIN","NOPREVIEW","PREPARING_STORY","PREPARING_DOCS","ERROR","classes","layoutClassMap","centered","fullscreen","padded","ansiConverter","escapeXML","WebView","testing","__SPECIAL_TEST_PARAMETER__","showStory","applyLayout","layout","documentElement","scrollTop","scrollLeft","storyRoot","getElementById","showDocs","docsRoot","classList","remove","currentLayoutClass","checkIfLayoutExists","layoutClass","showMode","mode","clearTimeout","preparingTimeout","otherMode","header","detail","innerHTML","toHtml","setAttribute","removeAttribute","PreviewWeb","__STORYBOOK_PREVIEW__","global9","document4","runScriptTypes","SCRIPT","SCRIPTS_ROOT_ID","simulateDOMContentLoaded","DOMContentLoadedEvent","createEvent","initEvent","dispatchEvent","insertScript","$script","$scriptRoot","scriptEl","src","onload","onerror","textContent","innerText","head","parentNode","insertScriptsSequentially","scriptsToExecute","simulatePageLoad","$container","$scriptsRoot","$scripts","querySelectorAll","typeAttr","emitTransformCode","_x32","_x33","_emitTransformCode","source","transform","transformed"],"sources":["/Users/pea/Desktop/work/my-workspace/node_modules/storybook/dist/_browser-chunks/chunk-SS2NHR7W.js"],"sourcesContent":["import {\n  isTestEnvironment,\n  pauseAnimations,\n  waitForAnimations\n} from \"./chunk-IPA5A322.js\";\nimport {\n  require_main\n} from \"./chunk-3OXGAGBE.js\";\nimport {\n  SNIPPET_RENDERED,\n  combineParameters\n} from \"./chunk-VYJQ7RU5.js\";\nimport {\n  isEqual\n} from \"./chunk-3IAH5M2U.js\";\nimport {\n  invariant\n} from \"./chunk-AS2HQEYC.js\";\nimport {\n  require_ansi_to_html\n} from \"./chunk-YKE5S47A.js\";\nimport {\n  mapValues,\n  pickBy\n} from \"./chunk-AIOS4NGK.js\";\nimport {\n  isPlainObject\n} from \"./chunk-GFLS4VP3.js\";\nimport {\n  require_memoizerific\n} from \"./chunk-WJYERY3R.js\";\nimport {\n  dedent\n} from \"./chunk-JP7NCOJX.js\";\nimport {\n  __toESM\n} from \"./chunk-A242L54C.js\";\n\n// src/preview-api/modules/addons/main.ts\nimport { global } from \"@storybook/global\";\n\n// src/preview-api/modules/addons/storybook-channel-mock.ts\nimport { Channel } from \"storybook/internal/channels\";\nfunction mockChannel() {\n  let transport = {\n    setHandler: () => {\n    },\n    send: () => {\n    }\n  };\n  return new Channel({ transport });\n}\n\n// src/preview-api/modules/addons/main.ts\nvar AddonStore = class {\n  constructor() {\n    this.getChannel = () => {\n      if (!this.channel) {\n        let channel = mockChannel();\n        return this.setChannel(channel), channel;\n      }\n      return this.channel;\n    };\n    this.ready = () => this.promise;\n    this.hasChannel = () => !!this.channel;\n    this.setChannel = (channel) => {\n      this.channel = channel, this.resolve();\n    };\n    this.promise = new Promise((res) => {\n      this.resolve = () => res(this.getChannel());\n    });\n  }\n}, KEY = \"__STORYBOOK_ADDONS_PREVIEW\";\nfunction getAddonsStore() {\n  return global[KEY] || (global[KEY] = new AddonStore()), global[KEY];\n}\nvar addons = getAddonsStore();\n\n// src/preview-api/modules/addons/hooks.ts\nimport { logger } from \"storybook/internal/client-logger\";\nimport {\n  FORCE_RE_RENDER,\n  RESET_STORY_ARGS,\n  STORY_RENDERED,\n  UPDATE_GLOBALS,\n  UPDATE_STORY_ARGS\n} from \"storybook/internal/core-events\";\nimport { global as global2 } from \"@storybook/global\";\nvar HooksContext = class {\n  constructor() {\n    this.hookListsMap = void 0;\n    this.mountedDecorators = void 0;\n    this.prevMountedDecorators = void 0;\n    this.currentHooks = void 0;\n    this.nextHookIndex = void 0;\n    this.currentPhase = void 0;\n    this.currentEffects = void 0;\n    this.prevEffects = void 0;\n    this.currentDecoratorName = void 0;\n    this.hasUpdates = void 0;\n    this.currentContext = void 0;\n    this.renderListener = (storyId) => {\n      storyId === this.currentContext?.id && (this.triggerEffects(), this.currentContext = null, this.removeRenderListeners());\n    };\n    this.init();\n  }\n  init() {\n    this.hookListsMap = /* @__PURE__ */ new WeakMap(), this.mountedDecorators = /* @__PURE__ */ new Set(), this.prevMountedDecorators = /* @__PURE__ */ new Set(), this.currentHooks = [], this.nextHookIndex = 0, this.currentPhase = \"NONE\", this.currentEffects = [], this.prevEffects = [], this.currentDecoratorName = null, this.hasUpdates = !1, this.currentContext = null;\n  }\n  clean() {\n    this.prevEffects.forEach((effect) => {\n      effect.destroy && effect.destroy();\n    }), this.init(), this.removeRenderListeners();\n  }\n  getNextHook() {\n    let hook = this.currentHooks[this.nextHookIndex];\n    return this.nextHookIndex += 1, hook;\n  }\n  triggerEffects() {\n    this.prevEffects.forEach((effect) => {\n      !this.currentEffects.includes(effect) && effect.destroy && effect.destroy();\n    }), this.currentEffects.forEach((effect) => {\n      this.prevEffects.includes(effect) || (effect.destroy = effect.create());\n    }), this.prevEffects = this.currentEffects, this.currentEffects = [];\n  }\n  addRenderListeners() {\n    this.removeRenderListeners(), addons.getChannel().on(STORY_RENDERED, this.renderListener);\n  }\n  removeRenderListeners() {\n    addons.getChannel().removeListener(STORY_RENDERED, this.renderListener);\n  }\n};\nfunction hookify(fn) {\n  let hookified = (...args) => {\n    let { hooks } = typeof args[0] == \"function\" ? args[1] : args[0], prevPhase = hooks.currentPhase, prevHooks = hooks.currentHooks, prevNextHookIndex = hooks.nextHookIndex, prevDecoratorName = hooks.currentDecoratorName;\n    hooks.currentDecoratorName = fn.name, hooks.prevMountedDecorators.has(fn) ? (hooks.currentPhase = \"UPDATE\", hooks.currentHooks = hooks.hookListsMap.get(fn) || []) : (hooks.currentPhase = \"MOUNT\", hooks.currentHooks = [], hooks.hookListsMap.set(fn, hooks.currentHooks), hooks.prevMountedDecorators.add(fn)), hooks.nextHookIndex = 0;\n    let prevContext = global2.STORYBOOK_HOOKS_CONTEXT;\n    global2.STORYBOOK_HOOKS_CONTEXT = hooks;\n    let result = fn(...args);\n    if (global2.STORYBOOK_HOOKS_CONTEXT = prevContext, hooks.currentPhase === \"UPDATE\" && hooks.getNextHook() != null)\n      throw new Error(\n        \"Rendered fewer hooks than expected. This may be caused by an accidental early return statement.\"\n      );\n    return hooks.currentPhase = prevPhase, hooks.currentHooks = prevHooks, hooks.nextHookIndex = prevNextHookIndex, hooks.currentDecoratorName = prevDecoratorName, result;\n  };\n  return hookified.originalFn = fn, hookified;\n}\nvar numberOfRenders = 0, RENDER_LIMIT = 25, applyHooks = (applyDecorators) => (storyFn, decorators) => {\n  let decorated = applyDecorators(\n    hookify(storyFn),\n    decorators.map((decorator) => hookify(decorator))\n  );\n  return (context) => {\n    let { hooks } = context;\n    hooks.prevMountedDecorators ??= /* @__PURE__ */ new Set(), hooks.mountedDecorators = /* @__PURE__ */ new Set([storyFn, ...decorators]), hooks.currentContext = context, hooks.hasUpdates = !1;\n    let result = decorated(context);\n    for (numberOfRenders = 1; hooks.hasUpdates; )\n      if (hooks.hasUpdates = !1, hooks.currentEffects = [], result = decorated(context), numberOfRenders += 1, numberOfRenders > RENDER_LIMIT)\n        throw new Error(\n          \"Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.\"\n        );\n    return hooks.addRenderListeners(), result;\n  };\n}, areDepsEqual = (deps, nextDeps) => deps.length === nextDeps.length && deps.every((dep, i) => dep === nextDeps[i]), invalidHooksError = () => new Error(\"Storybook preview hooks can only be called inside decorators and story functions.\");\nfunction getHooksContextOrNull() {\n  return global2.STORYBOOK_HOOKS_CONTEXT || null;\n}\nfunction getHooksContextOrThrow() {\n  let hooks = getHooksContextOrNull();\n  if (hooks == null)\n    throw invalidHooksError();\n  return hooks;\n}\nfunction useHook(name, callback, deps) {\n  let hooks = getHooksContextOrThrow();\n  if (hooks.currentPhase === \"MOUNT\") {\n    deps != null && !Array.isArray(deps) && logger.warn(\n      `${name} received a final argument that is not an array (instead, received ${deps}). When specified, the final argument must be an array.`\n    );\n    let hook = { name, deps };\n    return hooks.currentHooks.push(hook), callback(hook), hook;\n  }\n  if (hooks.currentPhase === \"UPDATE\") {\n    let hook = hooks.getNextHook();\n    if (hook == null)\n      throw new Error(\"Rendered more hooks than during the previous render.\");\n    return hook.name !== name && logger.warn(\n      `Storybook has detected a change in the order of Hooks${hooks.currentDecoratorName ? ` called by ${hooks.currentDecoratorName}` : \"\"}. This will lead to bugs and errors if not fixed.`\n    ), deps != null && hook.deps == null && logger.warn(\n      `${name} received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.`\n    ), deps != null && hook.deps != null && deps.length !== hook.deps.length && logger.warn(`The final argument passed to ${name} changed size between renders. The order and size of this array must remain constant.\nPrevious: ${hook.deps}\nIncoming: ${deps}`), (deps == null || hook.deps == null || !areDepsEqual(deps, hook.deps)) && (callback(hook), hook.deps = deps), hook;\n  }\n  throw invalidHooksError();\n}\nfunction useMemoLike(name, nextCreate, deps) {\n  let { memoizedState } = useHook(\n    name,\n    (hook) => {\n      hook.memoizedState = nextCreate();\n    },\n    deps\n  );\n  return memoizedState;\n}\nfunction useMemo(nextCreate, deps) {\n  return useMemoLike(\"useMemo\", nextCreate, deps);\n}\nfunction useCallback(callback, deps) {\n  return useMemoLike(\"useCallback\", () => callback, deps);\n}\nfunction useRefLike(name, initialValue) {\n  return useMemoLike(name, () => ({ current: initialValue }), []);\n}\nfunction useRef(initialValue) {\n  return useRefLike(\"useRef\", initialValue);\n}\nfunction triggerUpdate() {\n  let hooks = getHooksContextOrNull();\n  if (hooks != null && hooks.currentPhase !== \"NONE\")\n    hooks.hasUpdates = !0;\n  else\n    try {\n      addons.getChannel().emit(FORCE_RE_RENDER);\n    } catch {\n      logger.warn(\"State updates of Storybook preview hooks work only in browser\");\n    }\n}\nfunction useStateLike(name, initialState) {\n  let stateRef = useRefLike(\n    name,\n    // @ts-expect-error S type should never be function, but there's no way to tell that to TypeScript\n    typeof initialState == \"function\" ? initialState() : initialState\n  ), setState = (update) => {\n    stateRef.current = typeof update == \"function\" ? update(stateRef.current) : update, triggerUpdate();\n  };\n  return [stateRef.current, setState];\n}\nfunction useState(initialState) {\n  return useStateLike(\"useState\", initialState);\n}\nfunction useReducer(reducer, initialArg, init) {\n  let initialState = init != null ? () => init(initialArg) : initialArg, [state, setState] = useStateLike(\"useReducer\", initialState);\n  return [state, (action) => setState((prevState) => reducer(prevState, action))];\n}\nfunction useEffect(create, deps) {\n  let hooks = getHooksContextOrThrow(), effect = useMemoLike(\"useEffect\", () => ({ create }), deps);\n  hooks.currentEffects.includes(effect) || hooks.currentEffects.push(effect);\n}\nfunction useChannel(eventMap, deps = []) {\n  let channel = addons.getChannel();\n  return useEffect(() => (Object.entries(eventMap).forEach(([type, listener]) => channel.on(type, listener)), () => {\n    Object.entries(eventMap).forEach(\n      ([type, listener]) => channel.removeListener(type, listener)\n    );\n  }), [...Object.keys(eventMap), ...deps]), useCallback(channel.emit.bind(channel), [channel]);\n}\nfunction useStoryContext() {\n  let { currentContext } = getHooksContextOrThrow();\n  if (currentContext == null)\n    throw invalidHooksError();\n  return currentContext;\n}\nfunction useParameter(parameterKey, defaultValue) {\n  let { parameters } = useStoryContext();\n  if (parameterKey)\n    return parameters[parameterKey] ?? defaultValue;\n}\nfunction useArgs() {\n  let channel = addons.getChannel(), { id: storyId, args } = useStoryContext(), updateArgs = useCallback(\n    (updatedArgs) => channel.emit(UPDATE_STORY_ARGS, { storyId, updatedArgs }),\n    [channel, storyId]\n  ), resetArgs = useCallback(\n    (argNames) => channel.emit(RESET_STORY_ARGS, { storyId, argNames }),\n    [channel, storyId]\n  );\n  return [args, updateArgs, resetArgs];\n}\nfunction useGlobals() {\n  let channel = addons.getChannel(), { globals } = useStoryContext(), updateGlobals = useCallback(\n    (newGlobals) => channel.emit(UPDATE_GLOBALS, { globals: newGlobals }),\n    [channel]\n  );\n  return [globals, updateGlobals];\n}\n\n// src/preview-api/modules/addons/make-decorator.ts\nvar makeDecorator = ({\n  name,\n  parameterName,\n  wrapper,\n  skipIfNoParametersOrOptions = !1\n}) => {\n  let decorator = (options) => (storyFn, context) => {\n    let parameters = context.parameters && context.parameters[parameterName];\n    return parameters && parameters.disable || skipIfNoParametersOrOptions && !options && !parameters ? storyFn(context) : wrapper(storyFn, context, {\n      options,\n      parameters\n    });\n  };\n  return (...args) => typeof args[0] == \"function\" ? decorator()(...args) : (...innerArgs) => {\n    if (innerArgs.length > 1)\n      return args.length > 1 ? decorator(args)(...innerArgs) : decorator(...args)(...innerArgs);\n    throw new Error(\n      `Passing stories directly into ${name}() is not allowed,\n        instead use addDecorator(${name}) and pass options with the '${parameterName}' parameter`\n    );\n  };\n};\n\n// src/preview-api/modules/store/StoryStore.ts\nimport { getCoreAnnotations as getCoreAnnotations2 } from \"storybook/internal/csf\";\nimport {\n  CalledExtractOnStoreError,\n  MissingStoryFromCsfFileError\n} from \"storybook/internal/preview-errors\";\nvar import_memoizerific2 = __toESM(require_memoizerific(), 1);\n\n// src/preview-api/modules/store/args.ts\nimport { once } from \"storybook/internal/client-logger\";\nvar INCOMPATIBLE = Symbol(\"incompatible\"), map = (arg, argType) => {\n  let type = argType.type;\n  if (arg == null || !type || argType.mapping)\n    return arg;\n  switch (type.name) {\n    case \"string\":\n      return String(arg);\n    case \"enum\":\n      return arg;\n    case \"number\":\n      return Number(arg);\n    case \"boolean\":\n      return String(arg) === \"true\";\n    case \"array\":\n      return !type.value || !Array.isArray(arg) ? INCOMPATIBLE : arg.reduce((acc, item, index) => {\n        let mapped = map(item, { type: type.value });\n        return mapped !== INCOMPATIBLE && (acc[index] = mapped), acc;\n      }, new Array(arg.length));\n    case \"object\":\n      return typeof arg == \"string\" || typeof arg == \"number\" ? arg : !type.value || typeof arg != \"object\" ? INCOMPATIBLE : Object.entries(arg).reduce((acc, [key, val]) => {\n        let mapped = map(val, { type: type.value[key] });\n        return mapped === INCOMPATIBLE ? acc : Object.assign(acc, { [key]: mapped });\n      }, {});\n    case \"other\": {\n      let isPrimitiveArg = typeof arg == \"string\" || typeof arg == \"number\" || typeof arg == \"boolean\";\n      return type.value === \"ReactNode\" && isPrimitiveArg ? arg : INCOMPATIBLE;\n    }\n    default:\n      return INCOMPATIBLE;\n  }\n}, mapArgsToTypes = (args, argTypes) => Object.entries(args).reduce((acc, [key, value]) => {\n  if (!argTypes[key])\n    return acc;\n  let mapped = map(value, argTypes[key]);\n  return mapped === INCOMPATIBLE ? acc : Object.assign(acc, { [key]: mapped });\n}, {}), combineArgs = (value, update) => Array.isArray(value) && Array.isArray(update) ? update.reduce(\n  (acc, upd, index) => (acc[index] = combineArgs(value[index], update[index]), acc),\n  [...value]\n).filter((v) => v !== void 0) : !isPlainObject(value) || !isPlainObject(update) ? update : Object.keys({ ...value, ...update }).reduce((acc, key) => {\n  if (key in update) {\n    let combined = combineArgs(value[key], update[key]);\n    combined !== void 0 && (acc[key] = combined);\n  } else\n    acc[key] = value[key];\n  return acc;\n}, {}), validateOptions = (args, argTypes) => Object.entries(argTypes).reduce((acc, [key, { options }]) => {\n  function allowArg() {\n    return key in args && (acc[key] = args[key]), acc;\n  }\n  if (!options)\n    return allowArg();\n  if (!Array.isArray(options))\n    return once.error(dedent`\n        Invalid argType: '${key}.options' should be an array.\n\n        More info: https://storybook.js.org/docs/api/arg-types?ref=error\n      `), allowArg();\n  if (options.some((opt) => opt && [\"object\", \"function\"].includes(typeof opt)))\n    return once.error(dedent`\n        Invalid argType: '${key}.options' should only contain primitives. Use a 'mapping' for complex values.\n\n        More info: https://storybook.js.org/docs/writing-stories/args?ref=error#mapping-to-complex-arg-values\n      `), allowArg();\n  let isArray = Array.isArray(args[key]), invalidIndex = isArray && args[key].findIndex((val) => !options.includes(val)), isValidArray = isArray && invalidIndex === -1;\n  if (args[key] === void 0 || options.includes(args[key]) || isValidArray)\n    return allowArg();\n  let field = isArray ? `${key}[${invalidIndex}]` : key, supportedOptions = options.map((opt) => typeof opt == \"string\" ? `'${opt}'` : String(opt)).join(\", \");\n  return once.warn(`Received illegal value for '${field}'. Supported options: ${supportedOptions}`), acc;\n}, {}), DEEPLY_EQUAL = Symbol(\"Deeply equal\"), deepDiff = (value, update) => {\n  if (typeof value != typeof update)\n    return update;\n  if (isEqual(value, update))\n    return DEEPLY_EQUAL;\n  if (Array.isArray(value) && Array.isArray(update)) {\n    let res = update.reduce((acc, upd, index) => {\n      let diff = deepDiff(value[index], upd);\n      return diff !== DEEPLY_EQUAL && (acc[index] = diff), acc;\n    }, new Array(update.length));\n    return update.length >= value.length ? res : res.concat(new Array(value.length - update.length).fill(void 0));\n  }\n  return isPlainObject(value) && isPlainObject(update) ? Object.keys({ ...value, ...update }).reduce((acc, key) => {\n    let diff = deepDiff(value?.[key], update?.[key]);\n    return diff === DEEPLY_EQUAL ? acc : Object.assign(acc, { [key]: diff });\n  }, {}) : update;\n}, UNTARGETED = \"UNTARGETED\";\nfunction groupArgsByTarget({\n  args,\n  argTypes\n}) {\n  let groupedArgs = {};\n  return Object.entries(args).forEach(([name, value]) => {\n    let { target = UNTARGETED } = argTypes[name] || {};\n    groupedArgs[target] = groupedArgs[target] || {}, groupedArgs[target][name] = value;\n  }), groupedArgs;\n}\n\n// src/preview-api/modules/store/ArgsStore.ts\nfunction deleteUndefined(obj) {\n  return Object.keys(obj).forEach((key) => obj[key] === void 0 && delete obj[key]), obj;\n}\nvar ArgsStore = class {\n  constructor() {\n    this.initialArgsByStoryId = {};\n    this.argsByStoryId = {};\n  }\n  get(storyId) {\n    if (!(storyId in this.argsByStoryId))\n      throw new Error(`No args known for ${storyId} -- has it been rendered yet?`);\n    return this.argsByStoryId[storyId];\n  }\n  setInitial(story) {\n    if (!this.initialArgsByStoryId[story.id])\n      this.initialArgsByStoryId[story.id] = story.initialArgs, this.argsByStoryId[story.id] = story.initialArgs;\n    else if (this.initialArgsByStoryId[story.id] !== story.initialArgs) {\n      let delta = deepDiff(this.initialArgsByStoryId[story.id], this.argsByStoryId[story.id]);\n      this.initialArgsByStoryId[story.id] = story.initialArgs, this.argsByStoryId[story.id] = story.initialArgs, delta !== DEEPLY_EQUAL && this.updateFromDelta(story, delta);\n    }\n  }\n  updateFromDelta(story, delta) {\n    let validatedDelta = validateOptions(delta, story.argTypes);\n    this.argsByStoryId[story.id] = combineArgs(this.argsByStoryId[story.id], validatedDelta);\n  }\n  updateFromPersisted(story, persisted) {\n    let mappedPersisted = mapArgsToTypes(persisted, story.argTypes);\n    return this.updateFromDelta(story, mappedPersisted);\n  }\n  update(storyId, argsUpdate) {\n    if (!(storyId in this.argsByStoryId))\n      throw new Error(`No args known for ${storyId} -- has it been rendered yet?`);\n    this.argsByStoryId[storyId] = deleteUndefined({\n      ...this.argsByStoryId[storyId],\n      ...argsUpdate\n    });\n  }\n};\n\n// src/preview-api/modules/store/GlobalsStore.ts\nimport { logger as logger2 } from \"storybook/internal/client-logger\";\n\n// src/preview-api/modules/store/csf/getValuesFromArgTypes.ts\nvar getValuesFromArgTypes = (argTypes = {}) => Object.entries(argTypes).reduce((acc, [arg, { defaultValue }]) => (typeof defaultValue < \"u\" && (acc[arg] = defaultValue), acc), {});\n\n// src/preview-api/modules/store/GlobalsStore.ts\nvar GlobalsStore = class {\n  constructor({\n    globals = {},\n    globalTypes = {}\n  }) {\n    this.set({ globals, globalTypes });\n  }\n  set({ globals = {}, globalTypes = {} }) {\n    let delta = this.initialGlobals && deepDiff(this.initialGlobals, this.globals);\n    this.allowedGlobalNames = /* @__PURE__ */ new Set([...Object.keys(globals), ...Object.keys(globalTypes)]);\n    let defaultGlobals = getValuesFromArgTypes(globalTypes);\n    this.initialGlobals = { ...defaultGlobals, ...globals }, this.globals = this.initialGlobals, delta && delta !== DEEPLY_EQUAL && this.updateFromPersisted(delta);\n  }\n  filterAllowedGlobals(globals) {\n    return Object.entries(globals).reduce((acc, [key, value]) => (this.allowedGlobalNames.has(key) ? acc[key] = value : logger2.warn(\n      `Attempted to set a global (${key}) that is not defined in initial globals or globalTypes`\n    ), acc), {});\n  }\n  updateFromPersisted(persisted) {\n    let allowedUrlGlobals = this.filterAllowedGlobals(persisted);\n    this.globals = { ...this.globals, ...allowedUrlGlobals };\n  }\n  get() {\n    return this.globals;\n  }\n  update(newGlobals) {\n    this.globals = { ...this.globals, ...this.filterAllowedGlobals(newGlobals) };\n    for (let key in newGlobals)\n      newGlobals[key] === void 0 && (this.globals[key] = this.initialGlobals[key]);\n  }\n};\n\n// src/preview-api/modules/store/StoryIndexStore.ts\nvar import_memoizerific = __toESM(require_memoizerific(), 1);\nimport { MissingStoryAfterHmrError } from \"storybook/internal/preview-errors\";\nvar getImportPathMap = (0, import_memoizerific.default)(1)(\n  (entries) => Object.values(entries).reduce(\n    (acc, entry) => (acc[entry.importPath] = acc[entry.importPath] || entry, acc),\n    {}\n  )\n), StoryIndexStore = class {\n  constructor({ entries } = { v: 5, entries: {} }) {\n    this.entries = entries;\n  }\n  entryFromSpecifier(specifier) {\n    let entries = Object.values(this.entries);\n    if (specifier === \"*\")\n      return entries[0];\n    if (typeof specifier == \"string\")\n      return this.entries[specifier] ? this.entries[specifier] : entries.find((entry) => entry.id.startsWith(specifier));\n    let { name, title } = specifier;\n    return entries.find((entry) => entry.name === name && entry.title === title);\n  }\n  storyIdToEntry(storyId) {\n    let storyEntry = this.entries[storyId];\n    if (!storyEntry)\n      throw new MissingStoryAfterHmrError({ storyId });\n    return storyEntry;\n  }\n  importPathToEntry(importPath) {\n    return getImportPathMap(this.entries)[importPath];\n  }\n};\n\n// src/preview-api/modules/store/csf/normalizeInputTypes.ts\nvar normalizeType = (type) => typeof type == \"string\" ? { name: type } : type, normalizeControl = (control) => typeof control == \"string\" ? { type: control } : control, normalizeInputType = (inputType, key) => {\n  let { type, control, ...rest } = inputType, normalized = {\n    name: key,\n    ...rest\n  };\n  return type && (normalized.type = normalizeType(type)), control ? normalized.control = normalizeControl(control) : control === !1 && (normalized.control = { disable: !0 }), normalized;\n}, normalizeInputTypes = (inputTypes) => mapValues(inputTypes, normalizeInputType);\n\n// src/preview-api/modules/store/csf/normalizeStory.ts\nimport { deprecate, logger as logger3 } from \"storybook/internal/client-logger\";\nimport { storyNameFromExport, toId } from \"storybook/internal/csf\";\n\n// src/preview-api/modules/store/csf/normalizeArrays.ts\nvar normalizeArrays = (array) => Array.isArray(array) ? array : array ? [array] : [];\n\n// src/preview-api/modules/store/csf/normalizeStory.ts\nvar deprecatedStoryAnnotation = dedent`\nCSF .story annotations deprecated; annotate story functions directly:\n- StoryFn.story.name => StoryFn.storyName\n- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.\n`;\nfunction normalizeStory(key, storyAnnotations, meta) {\n  let storyObject = storyAnnotations, userStoryFn = typeof storyAnnotations == \"function\" ? storyAnnotations : null, { story } = storyObject;\n  story && (logger3.debug(\"deprecated story\", story), deprecate(deprecatedStoryAnnotation));\n  let exportName = storyNameFromExport(key), name = typeof storyObject != \"function\" && storyObject.name || storyObject.storyName || story?.name || exportName, decorators = [\n    ...normalizeArrays(storyObject.decorators),\n    ...normalizeArrays(story?.decorators)\n  ], parameters = { ...story?.parameters, ...storyObject.parameters }, args = { ...story?.args, ...storyObject.args }, argTypes = { ...story?.argTypes, ...storyObject.argTypes }, loaders = [...normalizeArrays(storyObject.loaders), ...normalizeArrays(story?.loaders)], beforeEach = [\n    ...normalizeArrays(storyObject.beforeEach),\n    ...normalizeArrays(story?.beforeEach)\n  ], afterEach = [\n    ...normalizeArrays(storyObject.afterEach),\n    ...normalizeArrays(story?.afterEach)\n  ], { render, play, tags = [], globals = {} } = storyObject, id = parameters.__id || toId(meta.id, exportName);\n  return {\n    moduleExport: storyAnnotations,\n    id,\n    name,\n    tags,\n    decorators,\n    parameters,\n    args,\n    argTypes: normalizeInputTypes(argTypes),\n    loaders,\n    beforeEach,\n    afterEach,\n    globals,\n    ...render && { render },\n    ...userStoryFn && { userStoryFn },\n    ...play && { play }\n  };\n}\n\n// src/preview-api/modules/store/csf/processCSFFile.ts\nimport { logger as logger4 } from \"storybook/internal/client-logger\";\nimport { getStoryChildren, isExportStory, isStory, toTestId } from \"storybook/internal/csf\";\n\n// src/preview-api/modules/store/csf/normalizeComponentAnnotations.ts\nimport { sanitize } from \"storybook/internal/csf\";\nfunction normalizeComponentAnnotations(defaultExport, title = defaultExport.title, importPath) {\n  let { id, argTypes } = defaultExport;\n  return {\n    id: sanitize(id || title),\n    ...defaultExport,\n    title,\n    ...argTypes && { argTypes: normalizeInputTypes(argTypes) },\n    parameters: {\n      fileName: importPath,\n      ...defaultExport.parameters\n    }\n  };\n}\n\n// src/preview-api/modules/store/csf/processCSFFile.ts\nvar checkGlobals = (parameters) => {\n  let { globals, globalTypes } = parameters;\n  (globals || globalTypes) && logger4.error(\n    \"Global args/argTypes can only be set globally\",\n    JSON.stringify({\n      globals,\n      globalTypes\n    })\n  );\n}, checkStorySort = (parameters) => {\n  let { options } = parameters;\n  options?.storySort && logger4.error(\"The storySort option parameter can only be set globally\");\n}, checkDisallowedParameters = (parameters) => {\n  parameters && (checkGlobals(parameters), checkStorySort(parameters));\n};\nfunction processCSFFile(moduleExports, importPath, title) {\n  let { default: defaultExport, __namedExportsOrder, ...namedExports } = moduleExports, firstStory = Object.values(namedExports)[0];\n  if (isStory(firstStory)) {\n    let meta2 = normalizeComponentAnnotations(firstStory.meta.input, title, importPath);\n    checkDisallowedParameters(meta2.parameters);\n    let csfFile2 = { meta: meta2, stories: {}, moduleExports };\n    return Object.keys(namedExports).forEach((key) => {\n      if (isExportStory(key, meta2)) {\n        let story = namedExports[key], storyMeta = normalizeStory(key, story.input, meta2);\n        checkDisallowedParameters(storyMeta.parameters), csfFile2.stories[storyMeta.id] = storyMeta, getStoryChildren(story).forEach((child) => {\n          let name = child.input.name, childId = toTestId(storyMeta.id, name);\n          child.input.parameters ??= {}, child.input.parameters.__id = childId, csfFile2.stories[childId] = normalizeStory(name, child.input, meta2);\n        });\n      }\n    }), csfFile2.projectAnnotations = firstStory.meta.preview.composed, csfFile2;\n  }\n  let meta = normalizeComponentAnnotations(\n    defaultExport,\n    title,\n    importPath\n  );\n  checkDisallowedParameters(meta.parameters);\n  let csfFile = { meta, stories: {}, moduleExports };\n  return Object.keys(namedExports).forEach((key) => {\n    if (isExportStory(key, meta)) {\n      let storyMeta = normalizeStory(key, namedExports[key], meta);\n      checkDisallowedParameters(storyMeta.parameters), csfFile.stories[storyMeta.id] = storyMeta;\n    }\n  }), csfFile;\n}\n\n// src/preview-api/modules/store/csf/prepareStory.ts\nimport { combineTags, includeConditionalArg } from \"storybook/internal/csf\";\nimport { NoRenderFunctionError } from \"storybook/internal/preview-errors\";\nimport { global as global3 } from \"@storybook/global\";\nimport { global as globalThis2 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/render/mount-utils.ts\nfunction mountDestructured(playFunction) {\n  return playFunction != null && getUsedProps(playFunction).includes(\"mount\");\n}\nfunction getUsedProps(fn) {\n  let match = fn.toString().match(/[^(]*\\(([^)]*)/);\n  if (!match)\n    return [];\n  let args = splitByComma(match[1]);\n  if (!args.length)\n    return [];\n  let first = args[0];\n  return first.startsWith(\"{\") && first.endsWith(\"}\") ? splitByComma(first.slice(1, -1).replace(/\\s/g, \"\")).map((prop) => prop.replace(/:.*|=.*/g, \"\")) : [];\n}\nfunction splitByComma(s) {\n  let result = [], stack = [], start = 0;\n  for (let i = 0; i < s.length; i++)\n    if (s[i] === \"{\" || s[i] === \"[\")\n      stack.push(s[i] === \"{\" ? \"}\" : \"]\");\n    else if (s[i] === stack[stack.length - 1])\n      stack.pop();\n    else if (!stack.length && s[i] === \",\") {\n      let token = s.substring(start, i).trim();\n      token && result.push(token), start = i + 1;\n    }\n  let lastToken = s.substring(start).trim();\n  return lastToken && result.push(lastToken), result;\n}\n\n// src/preview-api/modules/store/decorators.ts\nfunction decorateStory(storyFn, decorator, bindWithContext) {\n  let boundStoryFunction = bindWithContext(storyFn);\n  return (context) => decorator(boundStoryFunction, context);\n}\nfunction sanitizeStoryContextUpdate({\n  componentId,\n  title,\n  kind,\n  id,\n  name,\n  story,\n  parameters,\n  initialArgs,\n  argTypes,\n  ...update\n} = {}) {\n  return update;\n}\nfunction defaultDecorateStory(storyFn, decorators) {\n  let contextStore = {}, bindWithContext = (decoratedStoryFn) => (update) => {\n    if (!contextStore.value)\n      throw new Error(\"Decorated function called without init\");\n    return contextStore.value = {\n      ...contextStore.value,\n      ...sanitizeStoryContextUpdate(update)\n    }, decoratedStoryFn(contextStore.value);\n  }, decoratedWithContextStore = decorators.reduce(\n    (story, decorator) => decorateStory(story, decorator, bindWithContext),\n    storyFn\n  );\n  return (context) => (contextStore.value = context, decoratedWithContextStore(context));\n}\n\n// src/preview-api/modules/store/csf/prepareStory.ts\nfunction prepareStory(storyAnnotations, componentAnnotations, projectAnnotations) {\n  let { moduleExport, id, name } = storyAnnotations || {}, partialAnnotations = preparePartialAnnotations(\n    storyAnnotations,\n    componentAnnotations,\n    projectAnnotations\n  ), applyLoaders = async (context) => {\n    let loaded = {};\n    for (let loaders of [\n      normalizeArrays(projectAnnotations.loaders),\n      normalizeArrays(componentAnnotations.loaders),\n      normalizeArrays(storyAnnotations.loaders)\n    ]) {\n      if (context.abortSignal.aborted)\n        return loaded;\n      let loadResults = await Promise.all(loaders.map((loader) => loader(context)));\n      Object.assign(loaded, ...loadResults);\n    }\n    return loaded;\n  }, applyBeforeEach = async (context) => {\n    let cleanupCallbacks = new Array();\n    for (let beforeEach of [\n      ...normalizeArrays(projectAnnotations.beforeEach),\n      ...normalizeArrays(componentAnnotations.beforeEach),\n      ...normalizeArrays(storyAnnotations.beforeEach)\n    ]) {\n      if (context.abortSignal.aborted)\n        return cleanupCallbacks;\n      let cleanup = await beforeEach(context);\n      cleanup && cleanupCallbacks.push(cleanup);\n    }\n    return cleanupCallbacks;\n  }, applyAfterEach = async (context) => {\n    let reversedFinalizers = [\n      ...normalizeArrays(projectAnnotations.afterEach),\n      ...normalizeArrays(componentAnnotations.afterEach),\n      ...normalizeArrays(storyAnnotations.afterEach)\n    ].reverse();\n    for (let finalizer of reversedFinalizers) {\n      if (context.abortSignal.aborted)\n        return;\n      await finalizer(context);\n    }\n  }, undecoratedStoryFn = (context) => context.originalStoryFn(context.args, context), { applyDecorators = defaultDecorateStory, runStep } = projectAnnotations, decorators = [\n    ...normalizeArrays(storyAnnotations?.decorators),\n    ...normalizeArrays(componentAnnotations?.decorators),\n    ...normalizeArrays(projectAnnotations?.decorators)\n  ], render = storyAnnotations?.userStoryFn || storyAnnotations?.render || componentAnnotations.render || projectAnnotations.render, decoratedStoryFn = applyHooks(applyDecorators)(undecoratedStoryFn, decorators), unboundStoryFn = (context) => decoratedStoryFn(context), playFunction = storyAnnotations?.play ?? componentAnnotations?.play, usesMount = mountDestructured(playFunction);\n  if (!render && !usesMount)\n    throw new NoRenderFunctionError({ id });\n  let defaultMount = (context) => async () => (await context.renderToCanvas(), context.canvas), mount = storyAnnotations.mount ?? componentAnnotations.mount ?? projectAnnotations.mount ?? defaultMount, testingLibraryRender = projectAnnotations.testingLibraryRender;\n  return {\n    storyGlobals: {},\n    ...partialAnnotations,\n    moduleExport,\n    id,\n    name,\n    story: name,\n    originalStoryFn: render,\n    undecoratedStoryFn,\n    unboundStoryFn,\n    applyLoaders,\n    applyBeforeEach,\n    applyAfterEach,\n    playFunction,\n    runStep,\n    mount,\n    testingLibraryRender,\n    renderToCanvas: projectAnnotations.renderToCanvas,\n    usesMount\n  };\n}\nfunction prepareMeta(componentAnnotations, projectAnnotations, moduleExport) {\n  return {\n    ...preparePartialAnnotations(void 0, componentAnnotations, projectAnnotations),\n    moduleExport\n  };\n}\nfunction preparePartialAnnotations(storyAnnotations, componentAnnotations, projectAnnotations) {\n  let defaultTags = [\"dev\", \"test\"], extraTags = globalThis2.DOCS_OPTIONS?.autodocs === !0 ? [\"autodocs\"] : [], overrideTags = storyAnnotations?.tags?.includes(\"test-fn\") ? [\"!autodocs\"] : [], tags = combineTags(\n    ...defaultTags,\n    ...extraTags,\n    ...projectAnnotations.tags ?? [],\n    ...componentAnnotations.tags ?? [],\n    ...overrideTags,\n    ...storyAnnotations?.tags ?? []\n  ), parameters = combineParameters(\n    projectAnnotations.parameters,\n    componentAnnotations.parameters,\n    storyAnnotations?.parameters\n  ), { argTypesEnhancers = [], argsEnhancers = [] } = projectAnnotations, passedArgTypes = combineParameters(\n    projectAnnotations.argTypes,\n    componentAnnotations.argTypes,\n    storyAnnotations?.argTypes\n  );\n  if (storyAnnotations) {\n    let render = storyAnnotations?.userStoryFn || storyAnnotations?.render || componentAnnotations.render || projectAnnotations.render;\n    parameters.__isArgsStory = render && render.length > 0;\n  }\n  let passedArgs = {\n    ...projectAnnotations.args,\n    ...componentAnnotations.args,\n    ...storyAnnotations?.args\n  }, storyGlobals = {\n    ...componentAnnotations.globals,\n    ...storyAnnotations?.globals\n  }, contextForEnhancers = {\n    componentId: componentAnnotations.id,\n    title: componentAnnotations.title,\n    kind: componentAnnotations.title,\n    // Back compat\n    id: storyAnnotations?.id || componentAnnotations.id,\n    // if there's no story name, we create a fake one since enhancers expect a name\n    name: storyAnnotations?.name || \"__meta\",\n    story: storyAnnotations?.name || \"__meta\",\n    // Back compat\n    component: componentAnnotations.component,\n    subcomponents: componentAnnotations.subcomponents,\n    tags,\n    parameters,\n    initialArgs: passedArgs,\n    argTypes: passedArgTypes,\n    storyGlobals\n  };\n  contextForEnhancers.argTypes = argTypesEnhancers.reduce(\n    (accumulatedArgTypes, enhancer) => enhancer({ ...contextForEnhancers, argTypes: accumulatedArgTypes }),\n    contextForEnhancers.argTypes\n  );\n  let initialArgsBeforeEnhancers = { ...passedArgs };\n  contextForEnhancers.initialArgs = [...argsEnhancers].reduce(\n    (accumulatedArgs, enhancer) => ({\n      ...accumulatedArgs,\n      ...enhancer({\n        ...contextForEnhancers,\n        initialArgs: accumulatedArgs\n      })\n    }),\n    initialArgsBeforeEnhancers\n  );\n  let { name, story, ...withoutStoryIdentifiers } = contextForEnhancers;\n  return withoutStoryIdentifiers;\n}\nfunction prepareContext(context) {\n  let { args: unmappedArgs } = context, targetedContext = {\n    ...context,\n    allArgs: void 0,\n    argsByTarget: void 0\n  };\n  if (global3.FEATURES?.argTypeTargetsV7) {\n    let argsByTarget = groupArgsByTarget(context);\n    targetedContext = {\n      ...context,\n      allArgs: context.args,\n      argsByTarget,\n      args: argsByTarget[UNTARGETED] || {}\n    };\n  }\n  let mappedArgs = Object.entries(targetedContext.args).reduce((acc, [key, val]) => {\n    if (!targetedContext.argTypes[key]?.mapping)\n      return acc[key] = val, acc;\n    let mappingFn = (originalValue) => {\n      let mapping = targetedContext.argTypes[key].mapping;\n      return mapping && originalValue in mapping ? mapping[originalValue] : originalValue;\n    };\n    return acc[key] = Array.isArray(val) ? val.map(mappingFn) : mappingFn(val), acc;\n  }, {}), includedArgs = Object.entries(mappedArgs).reduce((acc, [key, val]) => {\n    let argType = targetedContext.argTypes[key] || {};\n    return includeConditionalArg(argType, mappedArgs, targetedContext.globals) && (acc[key] = val), acc;\n  }, {});\n  return { ...targetedContext, unmappedArgs, args: includedArgs };\n}\n\n// src/preview-api/modules/store/inferArgTypes.ts\nimport { logger as logger5 } from \"storybook/internal/client-logger\";\nvar inferType = (value, name, visited) => {\n  let type = typeof value;\n  switch (type) {\n    case \"boolean\":\n    case \"string\":\n    case \"number\":\n    case \"function\":\n    case \"symbol\":\n      return { name: type };\n    default:\n      break;\n  }\n  return value ? visited.has(value) ? (logger5.warn(dedent`\n        We've detected a cycle in arg '${name}'. Args should be JSON-serializable.\n\n        Consider using the mapping feature or fully custom args:\n        - Mapping: https://storybook.js.org/docs/writing-stories/args#mapping-to-complex-arg-values\n        - Custom args: https://storybook.js.org/docs/essentials/controls#fully-custom-args\n      `), { name: \"other\", value: \"cyclic object\" }) : (visited.add(value), Array.isArray(value) ? { name: \"array\", value: value.length > 0 ? inferType(value[0], name, new Set(visited)) : { name: \"other\", value: \"unknown\" } } : { name: \"object\", value: mapValues(value, (field) => inferType(field, name, new Set(visited))) }) : { name: \"object\", value: {} };\n}, inferArgTypes = (context) => {\n  let { id, argTypes: userArgTypes = {}, initialArgs = {} } = context, argTypes = mapValues(initialArgs, (arg, key) => ({\n    name: key,\n    type: inferType(arg, `${id}.${key}`, /* @__PURE__ */ new Set())\n  })), userArgTypesNames = mapValues(userArgTypes, (argType, key) => ({\n    name: key\n  }));\n  return combineParameters(argTypes, userArgTypesNames, userArgTypes);\n};\ninferArgTypes.secondPass = !0;\n\n// src/preview-api/modules/store/inferControls.ts\nimport { logger as logger6 } from \"storybook/internal/client-logger\";\n\n// src/preview-api/modules/store/filterArgTypes.ts\nvar matches = (name, descriptor) => Array.isArray(descriptor) ? descriptor.includes(name) : name.match(descriptor), filterArgTypes = (argTypes, include, exclude) => !include && !exclude ? argTypes : argTypes && pickBy(argTypes, (argType, key) => {\n  let name = argType.name || key.toString();\n  return !!(!include || matches(name, include)) && (!exclude || !matches(name, exclude));\n});\n\n// src/preview-api/modules/store/inferControls.ts\nvar inferControl = (argType, name, matchers) => {\n  let { type, options } = argType;\n  if (type) {\n    if (matchers.color && matchers.color.test(name)) {\n      let controlType = type.name;\n      if (controlType === \"string\")\n        return { control: { type: \"color\" } };\n      controlType !== \"enum\" && logger6.warn(\n        `Addon controls: Control of type color only supports string, received \"${controlType}\" instead`\n      );\n    }\n    if (matchers.date && matchers.date.test(name))\n      return { control: { type: \"date\" } };\n    switch (type.name) {\n      case \"array\":\n        return { control: { type: \"object\" } };\n      case \"boolean\":\n        return { control: { type: \"boolean\" } };\n      case \"string\":\n        return { control: { type: \"text\" } };\n      case \"number\":\n        return { control: { type: \"number\" } };\n      case \"enum\": {\n        let { value } = type;\n        return { control: { type: value?.length <= 5 ? \"radio\" : \"select\" }, options: value };\n      }\n      case \"function\":\n      case \"symbol\":\n        return null;\n      default:\n        return { control: { type: options ? \"select\" : \"object\" } };\n    }\n  }\n}, inferControls = (context) => {\n  let {\n    argTypes,\n    parameters: { __isArgsStory, controls: { include = null, exclude = null, matchers = {} } = {} }\n  } = context;\n  if (!__isArgsStory)\n    return argTypes;\n  let filteredArgTypes = filterArgTypes(argTypes, include, exclude), withControls = mapValues(filteredArgTypes, (argType, name) => argType?.type && inferControl(argType, name.toString(), matchers));\n  return combineParameters(withControls, filteredArgTypes);\n};\ninferControls.secondPass = !0;\n\n// src/preview-api/modules/store/csf/normalizeProjectAnnotations.ts\nfunction normalizeProjectAnnotations({\n  argTypes,\n  globalTypes,\n  argTypesEnhancers,\n  decorators,\n  loaders,\n  beforeEach,\n  afterEach,\n  initialGlobals,\n  ...annotations\n}) {\n  return {\n    ...argTypes && { argTypes: normalizeInputTypes(argTypes) },\n    ...globalTypes && { globalTypes: normalizeInputTypes(globalTypes) },\n    decorators: normalizeArrays(decorators),\n    loaders: normalizeArrays(loaders),\n    beforeEach: normalizeArrays(beforeEach),\n    afterEach: normalizeArrays(afterEach),\n    argTypesEnhancers: [\n      ...argTypesEnhancers || [],\n      inferArgTypes,\n      // There's an architectural decision to be made regarding embedded addons in core:\n      //\n      // Option 1: Keep embedded addons but ensure consistency by moving addon-specific code\n      // (like inferControls) to live alongside the addon code itself. This maintains the\n      // concept of core addons while improving code organization.\n      //\n      // Option 2: Fully integrate these addons into core, potentially moving UI components\n      // into the manager and treating them as core features rather than addons. This is a\n      // bigger architectural change requiring careful consideration.\n      //\n      // For now, we're keeping inferControls here as we need time to properly evaluate\n      // these options and their implications. Some features (like Angular's cleanArgsDecorator)\n      // currently rely on this behavior.\n      //\n      // TODO: Make an architectural decision on the handling of core addons\n      inferControls\n    ],\n    initialGlobals,\n    ...annotations\n  };\n}\n\n// src/preview-api/modules/store/csf/composeConfigs.ts\nimport { global as global4 } from \"@storybook/global\";\n\n// src/preview-api/modules/store/csf/beforeAll.ts\nvar composeBeforeAllHooks = (hooks) => async () => {\n  let cleanups2 = [];\n  for (let hook of hooks) {\n    let cleanup = await hook();\n    cleanup && cleanups2.unshift(cleanup);\n  }\n  return async () => {\n    for (let cleanup of cleanups2)\n      await cleanup();\n  };\n};\n\n// src/preview-api/modules/store/csf/stepRunners.ts\nfunction composeStepRunners(stepRunners) {\n  return async (label, play, playContext) => {\n    await stepRunners.reduceRight(\n      (innerPlay, stepRunner) => async () => stepRunner(label, innerPlay, playContext),\n      async () => play(playContext)\n    )();\n  };\n}\n\n// src/preview-api/modules/store/csf/composeConfigs.ts\nfunction getField(moduleExportList, field) {\n  return moduleExportList.map((xs) => xs.default?.[field] ?? xs[field]).filter(Boolean);\n}\nfunction getArrayField(moduleExportList, field, options = {}) {\n  return getField(moduleExportList, field).reduce((prev, cur) => {\n    let normalized = normalizeArrays(cur);\n    return options.reverseFileOrder ? [...normalized, ...prev] : [...prev, ...normalized];\n  }, []);\n}\nfunction getObjectField(moduleExportList, field) {\n  return Object.assign({}, ...getField(moduleExportList, field));\n}\nfunction getSingletonField(moduleExportList, field) {\n  return getField(moduleExportList, field).pop();\n}\nfunction composeConfigs(moduleExportList) {\n  let allArgTypeEnhancers = getArrayField(moduleExportList, \"argTypesEnhancers\"), stepRunners = getField(moduleExportList, \"runStep\"), beforeAllHooks = getArrayField(moduleExportList, \"beforeAll\");\n  return {\n    parameters: combineParameters(...getField(moduleExportList, \"parameters\")),\n    decorators: getArrayField(moduleExportList, \"decorators\", {\n      reverseFileOrder: !(global4.FEATURES?.legacyDecoratorFileOrder ?? !1)\n    }),\n    args: getObjectField(moduleExportList, \"args\"),\n    argsEnhancers: getArrayField(moduleExportList, \"argsEnhancers\"),\n    argTypes: getObjectField(moduleExportList, \"argTypes\"),\n    argTypesEnhancers: [\n      ...allArgTypeEnhancers.filter((e) => !e.secondPass),\n      ...allArgTypeEnhancers.filter((e) => e.secondPass)\n    ],\n    initialGlobals: getObjectField(moduleExportList, \"initialGlobals\"),\n    globalTypes: getObjectField(moduleExportList, \"globalTypes\"),\n    loaders: getArrayField(moduleExportList, \"loaders\"),\n    beforeAll: composeBeforeAllHooks(beforeAllHooks),\n    beforeEach: getArrayField(moduleExportList, \"beforeEach\"),\n    afterEach: getArrayField(moduleExportList, \"afterEach\"),\n    render: getSingletonField(moduleExportList, \"render\"),\n    renderToCanvas: getSingletonField(moduleExportList, \"renderToCanvas\"),\n    applyDecorators: getSingletonField(moduleExportList, \"applyDecorators\"),\n    runStep: composeStepRunners(stepRunners),\n    tags: getArrayField(moduleExportList, \"tags\"),\n    mount: getSingletonField(moduleExportList, \"mount\"),\n    testingLibraryRender: getSingletonField(moduleExportList, \"testingLibraryRender\")\n  };\n}\n\n// src/preview-api/modules/store/csf/portable-stories.ts\nimport { isExportStory as isExportStory2 } from \"storybook/internal/csf\";\nimport { getCoreAnnotations } from \"storybook/internal/csf\";\nimport { MountMustBeDestructuredError } from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/store/reporter-api.ts\nvar ReporterAPI = class {\n  constructor() {\n    this.reports = [];\n  }\n  async addReport(report) {\n    this.reports.push(report);\n  }\n};\n\n// src/preview-api/modules/store/csf/csf-factory-utils.ts\nimport { isMeta, isStory as isStory2 } from \"storybook/internal/csf\";\nfunction getCsfFactoryAnnotations(story, meta, projectAnnotations) {\n  return isStory2(story) ? {\n    story: story.input,\n    meta: story.meta.input,\n    preview: story.meta.preview.composed\n  } : { story, meta: isMeta(meta) ? meta.input : meta, preview: projectAnnotations };\n}\n\n// src/preview-api/modules/store/csf/portable-stories.ts\nfunction setDefaultProjectAnnotations(_defaultProjectAnnotations) {\n  globalThis.defaultProjectAnnotations = _defaultProjectAnnotations;\n}\nvar DEFAULT_STORY_TITLE = \"ComposedStory\", DEFAULT_STORY_NAME = \"Unnamed Story\";\nfunction extractAnnotation(annotation) {\n  return annotation ? composeConfigs([annotation]) : {};\n}\nfunction setProjectAnnotations(projectAnnotations) {\n  let annotations = Array.isArray(projectAnnotations) ? projectAnnotations : [projectAnnotations];\n  return globalThis.globalProjectAnnotations = composeConfigs([\n    ...getCoreAnnotations(),\n    globalThis.defaultProjectAnnotations ?? {},\n    composeConfigs(annotations.map(extractAnnotation))\n  ]), globalThis.globalProjectAnnotations ?? {};\n}\nvar cleanups = [];\nfunction composeStory(storyAnnotations, componentAnnotations, projectAnnotations, defaultConfig, exportsName) {\n  if (storyAnnotations === void 0)\n    throw new Error(\"Expected a story but received undefined.\");\n  componentAnnotations.title = componentAnnotations.title ?? DEFAULT_STORY_TITLE;\n  let normalizedComponentAnnotations = normalizeComponentAnnotations(componentAnnotations), storyName = exportsName || storyAnnotations.storyName || storyAnnotations.story?.name || storyAnnotations.name || DEFAULT_STORY_NAME, normalizedStory = normalizeStory(\n    storyName,\n    storyAnnotations,\n    normalizedComponentAnnotations\n  ), normalizedProjectAnnotations = normalizeProjectAnnotations(\n    composeConfigs([\n      defaultConfig ?? globalThis.globalProjectAnnotations ?? {},\n      projectAnnotations ?? {}\n    ])\n  ), story = prepareStory(\n    normalizedStory,\n    normalizedComponentAnnotations,\n    normalizedProjectAnnotations\n  ), globals = {\n    ...getValuesFromArgTypes(normalizedProjectAnnotations.globalTypes),\n    ...normalizedProjectAnnotations.initialGlobals,\n    ...story.storyGlobals\n  }, reporting = new ReporterAPI(), initializeContext = () => {\n    let context = prepareContext({\n      hooks: new HooksContext(),\n      globals,\n      args: { ...story.initialArgs },\n      viewMode: \"story\",\n      reporting,\n      loaded: {},\n      abortSignal: new AbortController().signal,\n      step: (label, play2) => story.runStep(label, play2, context),\n      canvasElement: null,\n      canvas: {},\n      userEvent: {},\n      globalTypes: normalizedProjectAnnotations.globalTypes,\n      ...story,\n      context: null,\n      mount: null\n    });\n    return context.parameters.__isPortableStory = !0, context.context = context, story.renderToCanvas && (context.renderToCanvas = async () => {\n      let unmount = await story.renderToCanvas?.(\n        {\n          componentId: story.componentId,\n          title: story.title,\n          id: story.id,\n          name: story.name,\n          tags: story.tags,\n          showMain: () => {\n          },\n          showError: (error) => {\n            throw new Error(`${error.title}\n${error.description}`);\n          },\n          showException: (error) => {\n            throw error;\n          },\n          forceRemount: !0,\n          storyContext: context,\n          storyFn: () => story.unboundStoryFn(context),\n          unboundStoryFn: story.unboundStoryFn\n        },\n        context.canvasElement\n      );\n      unmount && cleanups.push(unmount);\n    }), context.mount = story.mount(context), context;\n  }, loadedContext, play = async (extraContext) => {\n    let context = initializeContext();\n    return context.canvasElement ??= globalThis?.document?.body, loadedContext && (context.loaded = loadedContext.loaded), Object.assign(context, extraContext), story.playFunction(context);\n  }, run = (extraContext) => {\n    let context = initializeContext();\n    return Object.assign(context, extraContext), runStory(story, context);\n  }, playFunction = story.playFunction ? play : void 0;\n  return Object.assign(\n    function(extraArgs) {\n      let context = initializeContext();\n      return loadedContext && (context.loaded = loadedContext.loaded), context.args = {\n        ...context.initialArgs,\n        ...extraArgs\n      }, story.unboundStoryFn(context);\n    },\n    {\n      id: story.id,\n      storyName,\n      load: async () => {\n        for (let callback of [...cleanups].reverse())\n          await callback();\n        cleanups.length = 0;\n        let context = initializeContext();\n        context.loaded = await story.applyLoaders(context), cleanups.push(...(await story.applyBeforeEach(context)).filter(Boolean)), loadedContext = context;\n      },\n      globals,\n      args: story.initialArgs,\n      parameters: story.parameters,\n      argTypes: story.argTypes,\n      play: playFunction,\n      run,\n      reporting,\n      tags: story.tags\n    }\n  );\n}\nvar defaultComposeStory = (story, component, project, exportsName) => composeStory(story, component, project, {}, exportsName);\nfunction composeStories(storiesImport, globalConfig, composeStoryFn = defaultComposeStory) {\n  let { default: metaExport, __esModule, __namedExportsOrder, ...stories } = storiesImport, meta = metaExport;\n  return Object.entries(stories).reduce(\n    (storiesMap, [exportsName, story]) => {\n      let { story: storyAnnotations, meta: componentAnnotations } = getCsfFactoryAnnotations(story);\n      return !meta && componentAnnotations && (meta = componentAnnotations), isExportStory2(exportsName, meta) ? Object.assign(storiesMap, {\n        [exportsName]: composeStoryFn(storyAnnotations, meta, globalConfig, exportsName)\n      }) : storiesMap;\n    },\n    {}\n  );\n}\nfunction createPlaywrightTest(baseTest) {\n  return baseTest.extend({\n    mount: async ({ mount, page }, use) => {\n      await use(async (storyRef, ...restArgs) => {\n        if (!(\"__pw_type\" in storyRef) || \"__pw_type\" in storyRef && storyRef.__pw_type !== \"jsx\")\n          throw new Error(dedent`\n              Portable stories in Playwright CT only work when referencing JSX elements.\n              Please use JSX format for your components such as:\n\n              instead of:\n              await mount(MyComponent, { props: { foo: 'bar' } })\n\n              do:\n              await mount(<MyComponent foo=\"bar\"/>)\n\n              More info: https://storybook.js.org/docs/api/portable-stories/portable-stories-playwright?ref=error\n            `);\n        let { props, ...storyRefWithoutProps } = storyRef;\n        await page.evaluate(async (wrappedStoryRef) => {\n          let unwrappedStoryRef = await globalThis.__pwUnwrapObject?.(wrappedStoryRef);\n          return (\"__pw_type\" in unwrappedStoryRef ? unwrappedStoryRef.type : unwrappedStoryRef)?.load?.();\n        }, storyRefWithoutProps);\n        let mountResult = await mount(storyRef, ...restArgs);\n        return await page.evaluate(async (wrappedStoryRef) => {\n          let unwrappedStoryRef = await globalThis.__pwUnwrapObject?.(wrappedStoryRef), story = \"__pw_type\" in unwrappedStoryRef ? unwrappedStoryRef.type : unwrappedStoryRef, canvasElement = document.querySelector(\"#root\");\n          return story?.play?.({ canvasElement });\n        }, storyRefWithoutProps), mountResult;\n      });\n    }\n  });\n}\nasync function runStory(story, context) {\n  for (let callback of [...cleanups].reverse())\n    await callback();\n  if (cleanups.length = 0, !context.canvasElement) {\n    let container = document.createElement(\"div\");\n    globalThis?.document?.body?.appendChild(container), context.canvasElement = container, cleanups.push(() => {\n      globalThis?.document?.body?.contains(container) && globalThis?.document?.body?.removeChild(container);\n    });\n  }\n  if (context.loaded = await story.applyLoaders(context), context.abortSignal.aborted)\n    return;\n  cleanups.push(...(await story.applyBeforeEach(context)).filter(Boolean));\n  let playFunction = story.playFunction, isMountDestructured = story.usesMount;\n  if (isMountDestructured || await context.mount(), context.abortSignal.aborted)\n    return;\n  playFunction && (isMountDestructured || (context.mount = async () => {\n    throw new MountMustBeDestructuredError({ playFunction: playFunction.toString() });\n  }), await playFunction(context));\n  let cleanUp;\n  isTestEnvironment() ? cleanUp = pauseAnimations() : await waitForAnimations(context.abortSignal), await story.applyAfterEach(context), await cleanUp?.();\n}\n\n// src/preview-api/modules/store/StoryStore.ts\nvar CSF_CACHE_SIZE = 1e3, STORY_CACHE_SIZE = 1e4, StoryStore = class {\n  constructor(storyIndex, importFn, projectAnnotations) {\n    this.importFn = importFn;\n    this.storyIndex = new StoryIndexStore(storyIndex), this.projectAnnotations = normalizeProjectAnnotations(\n      composeConfigs([...getCoreAnnotations2(), projectAnnotations])\n    );\n    let { initialGlobals, globalTypes } = this.projectAnnotations;\n    this.args = new ArgsStore(), this.userGlobals = new GlobalsStore({ globals: initialGlobals, globalTypes }), this.hooks = {}, this.cleanupCallbacks = {}, this.processCSFFileWithCache = (0, import_memoizerific2.default)(CSF_CACHE_SIZE)(processCSFFile), this.prepareMetaWithCache = (0, import_memoizerific2.default)(CSF_CACHE_SIZE)(prepareMeta), this.prepareStoryWithCache = (0, import_memoizerific2.default)(STORY_CACHE_SIZE)(prepareStory);\n  }\n  setProjectAnnotations(projectAnnotations) {\n    this.projectAnnotations = normalizeProjectAnnotations(projectAnnotations);\n    let { initialGlobals, globalTypes } = projectAnnotations;\n    this.userGlobals.set({ globals: initialGlobals, globalTypes });\n  }\n  // This means that one of the CSF files has changed.\n  // If the `importFn` has changed, we will invalidate both caches.\n  // If the `storyIndex` data has changed, we may or may not invalidate the caches, depending\n  // on whether we've loaded the relevant files yet.\n  async onStoriesChanged({\n    importFn,\n    storyIndex\n  }) {\n    importFn && (this.importFn = importFn), storyIndex && (this.storyIndex.entries = storyIndex.entries), this.cachedCSFFiles && await this.cacheAllCSFFiles();\n  }\n  // Get an entry from the index, waiting on initialization if necessary\n  async storyIdToEntry(storyId) {\n    return this.storyIndex.storyIdToEntry(storyId);\n  }\n  // To load a single CSF file to service a story we need to look up the importPath in the index\n  async loadCSFFileByStoryId(storyId) {\n    let { importPath, title } = this.storyIndex.storyIdToEntry(storyId), moduleExports = await this.importFn(importPath);\n    return this.processCSFFileWithCache(moduleExports, importPath, title);\n  }\n  async loadAllCSFFiles() {\n    let importPaths = {};\n    return Object.entries(this.storyIndex.entries).forEach(([storyId, { importPath }]) => {\n      importPaths[importPath] = storyId;\n    }), (await Promise.all(\n      Object.entries(importPaths).map(async ([importPath, storyId]) => ({\n        importPath,\n        csfFile: await this.loadCSFFileByStoryId(storyId)\n      }))\n    )).reduce(\n      (acc, { importPath, csfFile }) => (acc[importPath] = csfFile, acc),\n      {}\n    );\n  }\n  async cacheAllCSFFiles() {\n    this.cachedCSFFiles = await this.loadAllCSFFiles();\n  }\n  preparedMetaFromCSFFile({ csfFile }) {\n    let componentAnnotations = csfFile.meta;\n    return this.prepareMetaWithCache(\n      componentAnnotations,\n      this.projectAnnotations,\n      csfFile.moduleExports.default\n    );\n  }\n  // Load the CSF file for a story and prepare the story from it and the project annotations.\n  async loadStory({ storyId }) {\n    let csfFile = await this.loadCSFFileByStoryId(storyId);\n    return this.storyFromCSFFile({ storyId, csfFile });\n  }\n  // This function is synchronous for convenience -- often times if you have a CSF file already\n  // it is easier not to have to await `loadStory`.\n  storyFromCSFFile({\n    storyId,\n    csfFile\n  }) {\n    let storyAnnotations = csfFile.stories[storyId];\n    if (!storyAnnotations)\n      throw new MissingStoryFromCsfFileError({ storyId });\n    let componentAnnotations = csfFile.meta, story = this.prepareStoryWithCache(\n      storyAnnotations,\n      componentAnnotations,\n      csfFile.projectAnnotations ?? this.projectAnnotations\n    );\n    return this.args.setInitial(story), this.hooks[story.id] = this.hooks[story.id] || new HooksContext(), story;\n  }\n  // If we have a CSF file we can get all the stories from it synchronously\n  componentStoriesFromCSFFile({\n    csfFile\n  }) {\n    return Object.keys(this.storyIndex.entries).filter((storyId) => !!csfFile.stories[storyId]).map((storyId) => this.storyFromCSFFile({ storyId, csfFile }));\n  }\n  async loadEntry(id) {\n    let entry = await this.storyIdToEntry(id), storyImports = entry.type === \"docs\" ? entry.storiesImports : [], [entryExports, ...csfFiles] = await Promise.all([\n      this.importFn(entry.importPath),\n      ...storyImports.map((storyImportPath) => {\n        let firstStoryEntry = this.storyIndex.importPathToEntry(storyImportPath);\n        return this.loadCSFFileByStoryId(firstStoryEntry.id);\n      })\n    ]);\n    return { entryExports, csfFiles };\n  }\n  // A prepared story does not include args, globals or hooks. These are stored in the story store\n  // and updated separately to the (immutable) story.\n  getStoryContext(story, { forceInitialArgs = !1 } = {}) {\n    let userGlobals = this.userGlobals.get(), { initialGlobals } = this.userGlobals, reporting = new ReporterAPI();\n    return prepareContext({\n      ...story,\n      args: forceInitialArgs ? story.initialArgs : this.args.get(story.id),\n      initialGlobals,\n      globalTypes: this.projectAnnotations.globalTypes,\n      userGlobals,\n      reporting,\n      globals: {\n        ...userGlobals,\n        ...story.storyGlobals\n      },\n      hooks: this.hooks[story.id]\n    });\n  }\n  addCleanupCallbacks(story, ...callbacks) {\n    this.cleanupCallbacks[story.id] = (this.cleanupCallbacks[story.id] || []).concat(callbacks);\n  }\n  async cleanupStory(story) {\n    this.hooks[story.id].clean();\n    let callbacks = this.cleanupCallbacks[story.id];\n    if (callbacks)\n      for (let callback of [...callbacks].reverse())\n        await callback();\n    delete this.cleanupCallbacks[story.id];\n  }\n  extract(options = { includeDocsOnly: !1 }) {\n    let { cachedCSFFiles } = this;\n    if (console.log(\"extract: extracting stories\", cachedCSFFiles), !cachedCSFFiles)\n      throw new CalledExtractOnStoreError();\n    let stories = Object.entries(this.storyIndex.entries).reduce(\n      (acc, [storyId, entry]) => {\n        if (entry.type === \"docs\")\n          return acc;\n        let csfFile = cachedCSFFiles[entry.importPath], story = this.storyFromCSFFile({ storyId, csfFile });\n        return !options.includeDocsOnly && story.parameters.docsOnly || (acc[storyId] = Object.entries(story).reduce(\n          (storyAcc, [key, value]) => key === \"story\" && entry.subtype === \"test\" ? { ...storyAcc, story: entry.parentName } : key === \"moduleExport\" || typeof value == \"function\" ? storyAcc : Array.isArray(value) ? Object.assign(storyAcc, { [key]: value.slice().sort() }) : Object.assign(storyAcc, { [key]: value }),\n          {\n            args: story.initialArgs,\n            globals: {\n              ...this.userGlobals.initialGlobals,\n              ...this.userGlobals.globals,\n              ...story.storyGlobals\n            },\n            storyId: entry.parent ? entry.parent : storyId\n          }\n        )), acc;\n      },\n      {}\n    );\n    return console.log(\"extract: stories\", stories), stories;\n  }\n};\n\n// src/preview-api/modules/store/autoTitle.ts\nimport { once as once2 } from \"storybook/internal/client-logger\";\n\n// ../node_modules/slash/index.js\nfunction slash(path) {\n  return path.startsWith(\"\\\\\\\\?\\\\\") ? path : path.replace(/\\\\/g, \"/\");\n}\n\n// src/preview-api/modules/store/autoTitle.ts\nvar sanitize2 = (parts) => {\n  if (parts.length === 0)\n    return parts;\n  let last = parts[parts.length - 1], lastStripped = last?.replace(/(?:[.](?:story|stories))?([.][^.]+)$/i, \"\");\n  if (parts.length === 1)\n    return [lastStripped];\n  let nextToLast = parts[parts.length - 2];\n  return lastStripped && nextToLast && lastStripped.toLowerCase() === nextToLast.toLowerCase() ? [...parts.slice(0, -2), lastStripped] : lastStripped && (/^(story|stories)([.][^.]+)$/i.test(last) || /^index$/i.test(lastStripped)) ? parts.slice(0, -1) : [...parts.slice(0, -1), lastStripped];\n};\nfunction pathJoin(paths) {\n  return paths.flatMap((p) => p.split(\"/\")).filter(Boolean).join(\"/\");\n}\nvar userOrAutoTitleFromSpecifier = (fileName, entry, userTitle) => {\n  let { directory, importPathMatcher, titlePrefix = \"\" } = entry || {};\n  typeof fileName == \"number\" && once2.warn(dedent`\n      CSF Auto-title received a numeric fileName. This typically happens when\n      webpack is mis-configured in production mode. To force webpack to produce\n      filenames, set optimization.moduleIds = \"named\" in your webpack config.\n    `);\n  let normalizedFileName = slash(String(fileName));\n  if (importPathMatcher.exec(normalizedFileName)) {\n    if (!userTitle) {\n      let suffix = normalizedFileName.replace(directory, \"\"), parts = pathJoin([titlePrefix, suffix]).split(\"/\");\n      return parts = sanitize2(parts), parts.join(\"/\");\n    }\n    return titlePrefix ? pathJoin([titlePrefix, userTitle]) : userTitle;\n  }\n}, userOrAutoTitle = (fileName, storiesEntries, userTitle) => {\n  for (let i = 0; i < storiesEntries.length; i += 1) {\n    let title = userOrAutoTitleFromSpecifier(fileName, storiesEntries[i], userTitle);\n    if (title)\n      return title;\n  }\n  return userTitle || void 0;\n};\n\n// src/preview-api/modules/store/storySort.ts\nvar STORY_KIND_PATH_SEPARATOR = /\\s*\\/\\s*/, storySort = (options = {}) => (a, b) => {\n  if (a.title === b.title && !options.includeNames)\n    return 0;\n  let method = options.method || \"configure\", order = options.order || [], storyTitleA = a.title.trim().split(STORY_KIND_PATH_SEPARATOR), storyTitleB = b.title.trim().split(STORY_KIND_PATH_SEPARATOR);\n  options.includeNames && (storyTitleA.push(a.name), storyTitleB.push(b.name));\n  let depth = 0;\n  for (; storyTitleA[depth] || storyTitleB[depth]; ) {\n    if (!storyTitleA[depth])\n      return -1;\n    if (!storyTitleB[depth])\n      return 1;\n    let nameA = storyTitleA[depth], nameB = storyTitleB[depth];\n    if (nameA !== nameB) {\n      let indexA = order.indexOf(nameA), indexB = order.indexOf(nameB), indexWildcard = order.indexOf(\"*\");\n      return indexA !== -1 || indexB !== -1 ? (indexA === -1 && (indexWildcard !== -1 ? indexA = indexWildcard : indexA = order.length), indexB === -1 && (indexWildcard !== -1 ? indexB = indexWildcard : indexB = order.length), indexA - indexB) : method === \"configure\" ? 0 : nameA.localeCompare(nameB, options.locales ? options.locales : void 0, {\n        numeric: !0,\n        sensitivity: \"accent\"\n      });\n    }\n    let index = order.indexOf(nameA);\n    index === -1 && (index = order.indexOf(\"*\")), order = index !== -1 && Array.isArray(order[index + 1]) ? order[index + 1] : [], depth += 1;\n  }\n  return 0;\n};\n\n// src/preview-api/modules/store/sortStories.ts\nvar sortStoriesCommon = (stories, storySortParameter, fileNameOrder) => {\n  if (storySortParameter) {\n    let sortFn;\n    typeof storySortParameter == \"function\" ? sortFn = storySortParameter : sortFn = storySort(storySortParameter), stories.sort(sortFn);\n  } else\n    stories.sort(\n      (s1, s2) => fileNameOrder.indexOf(s1.importPath) - fileNameOrder.indexOf(s2.importPath)\n    );\n  return stories;\n}, sortStoriesV7 = (stories, storySortParameter, fileNameOrder) => {\n  try {\n    return sortStoriesCommon(stories, storySortParameter, fileNameOrder);\n  } catch (err) {\n    throw new Error(dedent`\n    Error sorting stories with sort parameter ${storySortParameter}:\n\n    > ${err.message}\n\n    Are you using a V6-style sort function in V7 mode?\n\n    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort\n  `);\n  }\n};\n\n// src/preview-api/modules/preview-web/Preview.tsx\nimport { deprecate as deprecate2, logger as logger7 } from \"storybook/internal/client-logger\";\nimport {\n  ARGTYPES_INFO_REQUEST,\n  ARGTYPES_INFO_RESPONSE,\n  CONFIG_ERROR,\n  FORCE_REMOUNT,\n  FORCE_RE_RENDER as FORCE_RE_RENDER2,\n  GLOBALS_UPDATED,\n  PREVIEW_INITIALIZED,\n  RESET_STORY_ARGS as RESET_STORY_ARGS2,\n  SET_GLOBALS,\n  STORY_ARGS_UPDATED,\n  STORY_HOT_UPDATED,\n  STORY_INDEX_INVALIDATED,\n  UPDATE_GLOBALS as UPDATE_GLOBALS2,\n  UPDATE_STORY_ARGS as UPDATE_STORY_ARGS2\n} from \"storybook/internal/core-events\";\nimport {\n  CalledPreviewMethodBeforeInitializationError,\n  MissingRenderToCanvasError,\n  StoryIndexFetchError,\n  StoryStoreAccessedBeforeInitializationError\n} from \"storybook/internal/preview-errors\";\nimport { global as global5 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/render/StoryRender.ts\nimport {\n  PLAY_FUNCTION_THREW_EXCEPTION,\n  STORY_FINISHED,\n  STORY_RENDERED as STORY_RENDERED2,\n  STORY_RENDER_PHASE_CHANGED,\n  UNHANDLED_ERRORS_WHILE_PLAYING\n} from \"storybook/internal/core-events\";\nimport {\n  MountMustBeDestructuredError as MountMustBeDestructuredError2,\n  NoStoryMountedError\n} from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/preview-web/render/Render.ts\nvar PREPARE_ABORTED = new Error(\"prepareAborted\");\n\n// src/preview-api/modules/preview-web/render/StoryRender.ts\nvar { AbortController: AbortController2 } = globalThis;\nfunction serializeError(error) {\n  try {\n    let { name = \"Error\", message = String(error), stack } = error;\n    return { name, message, stack };\n  } catch {\n    return { name: \"Error\", message: String(error) };\n  }\n}\nvar StoryRender = class {\n  constructor(channel, store, renderToScreen, callbacks, id, viewMode, renderOptions = { autoplay: !0, forceInitialArgs: !1 }, story) {\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.renderOptions = renderOptions;\n    this.type = \"story\";\n    this.notYetRendered = !0;\n    this.rerenderEnqueued = !1;\n    this.disableKeyListeners = !1;\n    this.teardownRender = () => {\n    };\n    this.torndown = !1;\n    this.abortController = new AbortController2(), this.renderId = Date.now(), story && (this.story = story, this.phase = \"preparing\");\n  }\n  async runPhase(signal, phase, phaseFn) {\n    this.phase = phase, this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n      newPhase: this.phase,\n      renderId: this.renderId,\n      storyId: this.id\n    }), phaseFn && (await phaseFn(), this.checkIfAborted(signal));\n  }\n  checkIfAborted(signal) {\n    return signal.aborted && ![\"finished\", \"aborted\", \"errored\"].includes(this.phase) && (this.phase = \"aborted\", this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n      newPhase: this.phase,\n      renderId: this.renderId,\n      storyId: this.id\n    })), signal.aborted;\n  }\n  async prepare() {\n    if (await this.runPhase(this.abortController.signal, \"preparing\", async () => {\n      this.story = await this.store.loadStory({ storyId: this.id });\n    }), this.abortController.signal.aborted)\n      throw await this.store.cleanupStory(this.story), PREPARE_ABORTED;\n  }\n  // The two story \"renders\" are equal and have both loaded the same story\n  isEqual(other) {\n    return !!(this.id === other.id && this.story && this.story === other.story);\n  }\n  isPreparing() {\n    return [\"preparing\"].includes(this.phase);\n  }\n  isPending() {\n    return [\"loading\", \"beforeEach\", \"rendering\", \"playing\", \"afterEach\"].includes(\n      this.phase\n    );\n  }\n  async renderToElement(canvasElement) {\n    return this.canvasElement = canvasElement, this.render({ initial: !0, forceRemount: !0 });\n  }\n  storyContext() {\n    if (!this.story)\n      throw new Error(\"Cannot call storyContext before preparing\");\n    let { forceInitialArgs } = this.renderOptions;\n    return this.store.getStoryContext(this.story, { forceInitialArgs });\n  }\n  async render({\n    initial = !1,\n    forceRemount = !1\n  } = {}) {\n    let { canvasElement } = this;\n    if (!this.story)\n      throw new Error(\"cannot render when not prepared\");\n    let story = this.story;\n    if (!canvasElement)\n      throw new Error(\"cannot render when canvasElement is unset\");\n    let {\n      id,\n      componentId,\n      title,\n      name,\n      tags,\n      applyLoaders,\n      applyBeforeEach,\n      applyAfterEach,\n      unboundStoryFn,\n      playFunction,\n      runStep\n    } = story;\n    forceRemount && !initial && (this.cancelRender(), this.abortController = new AbortController2());\n    let abortSignal = this.abortController.signal, mounted = !1, isMountDestructured = story.usesMount;\n    try {\n      let context = {\n        ...this.storyContext(),\n        viewMode: this.viewMode,\n        abortSignal,\n        canvasElement,\n        loaded: {},\n        step: (label, play) => runStep(label, play, context),\n        context: null,\n        canvas: {},\n        userEvent: {},\n        renderToCanvas: async () => {\n          let teardown = await this.renderToScreen(renderContext, canvasElement);\n          this.teardownRender = teardown || (() => {\n          }), mounted = !0;\n        },\n        // The story provides (set in a renderer) a mount function that is a higher order function\n        // (context) => (...args) => Canvas\n        //\n        // Before assigning it to the context, we resolve the context dependency,\n        // so that a user can just call it as await mount(...args) in their play function.\n        mount: async (...args) => {\n          this.callbacks.showStoryDuringRender?.();\n          let mountReturn = null;\n          return await this.runPhase(abortSignal, \"rendering\", async () => {\n            mountReturn = await story.mount(context)(...args);\n          }), isMountDestructured && await this.runPhase(abortSignal, \"playing\"), mountReturn;\n        }\n      };\n      context.context = context;\n      let renderContext = {\n        componentId,\n        title,\n        kind: title,\n        id,\n        name,\n        story: name,\n        tags,\n        ...this.callbacks,\n        showError: (error) => (this.phase = \"errored\", this.callbacks.showError(error)),\n        showException: (error) => (this.phase = \"errored\", this.callbacks.showException(error)),\n        forceRemount: forceRemount || this.notYetRendered,\n        storyContext: context,\n        storyFn: () => unboundStoryFn(context),\n        unboundStoryFn\n      };\n      if (await this.runPhase(abortSignal, \"loading\", async () => {\n        context.loaded = await applyLoaders(context);\n      }), abortSignal.aborted)\n        return;\n      let cleanupCallbacks = await applyBeforeEach(context);\n      if (this.store.addCleanupCallbacks(story, ...cleanupCallbacks), this.checkIfAborted(abortSignal) || (!mounted && !isMountDestructured && await context.mount(), this.notYetRendered = !1, abortSignal.aborted))\n        return;\n      let ignoreUnhandledErrors = this.story.parameters?.test?.dangerouslyIgnoreUnhandledErrors === !0, unhandledErrors = /* @__PURE__ */ new Set(), onError = (event) => {\n        event.error && unhandledErrors.add(event.error);\n      }, onUnhandledRejection = (event) => {\n        event.reason && unhandledErrors.add(event.reason);\n      };\n      if (this.renderOptions.autoplay && forceRemount && playFunction && this.phase !== \"errored\") {\n        window?.addEventListener?.(\"error\", onError), window?.addEventListener?.(\"unhandledrejection\", onUnhandledRejection), this.disableKeyListeners = !0;\n        try {\n          if (isMountDestructured ? await playFunction(context) : (context.mount = async () => {\n            throw new MountMustBeDestructuredError2({ playFunction: playFunction.toString() });\n          }, await this.runPhase(abortSignal, \"playing\", async () => playFunction(context))), !mounted)\n            throw new NoStoryMountedError();\n          this.checkIfAborted(abortSignal), !ignoreUnhandledErrors && unhandledErrors.size > 0 ? await this.runPhase(abortSignal, \"errored\") : await this.runPhase(abortSignal, \"played\");\n        } catch (error) {\n          if (this.callbacks.showStoryDuringRender?.(), await this.runPhase(abortSignal, \"errored\", async () => {\n            this.channel.emit(PLAY_FUNCTION_THREW_EXCEPTION, serializeError(error));\n          }), this.story.parameters.throwPlayFunctionExceptions !== !1)\n            throw error;\n          console.error(error);\n        }\n        if (!ignoreUnhandledErrors && unhandledErrors.size > 0 && this.channel.emit(\n          UNHANDLED_ERRORS_WHILE_PLAYING,\n          Array.from(unhandledErrors).map(serializeError)\n        ), this.disableKeyListeners = !1, window?.removeEventListener?.(\"unhandledrejection\", onUnhandledRejection), window?.removeEventListener?.(\"error\", onError), abortSignal.aborted)\n          return;\n      }\n      await this.runPhase(abortSignal, \"completing\", async () => {\n        isTestEnvironment() ? this.store.addCleanupCallbacks(story, pauseAnimations()) : await waitForAnimations(abortSignal);\n      }), await this.runPhase(abortSignal, \"completed\", async () => {\n        this.channel.emit(STORY_RENDERED2, id);\n      }), this.phase !== \"errored\" && await this.runPhase(abortSignal, \"afterEach\", async () => {\n        await applyAfterEach(context);\n      });\n      let hasUnhandledErrors = !ignoreUnhandledErrors && unhandledErrors.size > 0, hasSomeReportsFailed = context.reporting.reports.some(\n        (report) => report.status === \"failed\"\n      ), hasStoryErrored = hasUnhandledErrors || hasSomeReportsFailed;\n      await this.runPhase(\n        abortSignal,\n        \"finished\",\n        async () => this.channel.emit(STORY_FINISHED, {\n          storyId: id,\n          status: hasStoryErrored ? \"error\" : \"success\",\n          reporters: context.reporting.reports\n        })\n      );\n    } catch (err) {\n      this.phase = \"errored\", this.callbacks.showException(err), await this.runPhase(\n        abortSignal,\n        \"finished\",\n        async () => this.channel.emit(STORY_FINISHED, {\n          storyId: id,\n          status: \"error\",\n          reporters: []\n        })\n      );\n    }\n    this.rerenderEnqueued && (this.rerenderEnqueued = !1, this.render());\n  }\n  /**\n   * Rerender the story. If the story is currently pending (loading/rendering), the rerender will be\n   * enqueued, and will be executed after the current render is completed. Rerendering while playing\n   * will not be enqueued, and will be executed immediately, to support rendering args changes while\n   * playing.\n   */\n  async rerender() {\n    if (this.isPending() && this.phase !== \"playing\")\n      this.rerenderEnqueued = !0;\n    else\n      return this.render();\n  }\n  async remount() {\n    return await this.teardown(), this.render({ forceRemount: !0 });\n  }\n  // If the story is torn down (either a new story is rendered or the docs page removes it)\n  // we need to consider the fact that the initial render may not be finished\n  // (possibly the loaders or the play function are still running). We use the controller\n  // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n  // happens inside the user's code.\n  cancelRender() {\n    this.abortController.abort();\n  }\n  cancelPlayFunction() {\n    this.phase === \"playing\" && (this.abortController.abort(), this.runPhase(this.abortController.signal, \"aborted\"));\n  }\n  async teardown() {\n    this.torndown = !0, this.cancelRender(), this.story && await this.store.cleanupStory(this.story);\n    for (let i = 0; i < 3; i += 1) {\n      if (!this.isPending()) {\n        await this.teardownRender();\n        return;\n      }\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    }\n    window?.location?.reload?.(), await new Promise(() => {\n    });\n  }\n};\n\n// src/preview-api/modules/preview-web/Preview.tsx\nvar { fetch } = global5, STORY_INDEX_PATH = \"./index.json\", Preview = class {\n  constructor(importFn, getProjectAnnotations, channel = addons.getChannel(), shouldInitialize = !0) {\n    this.importFn = importFn;\n    this.getProjectAnnotations = getProjectAnnotations;\n    this.channel = channel;\n    this.storyRenders = [];\n    this.storeInitializationPromise = new Promise((resolve, reject) => {\n      this.resolveStoreInitializationPromise = resolve, this.rejectStoreInitializationPromise = reject;\n    }), shouldInitialize && this.initialize();\n  }\n  // Create a proxy object for `__STORYBOOK_STORY_STORE__` and `__STORYBOOK_PREVIEW__.storyStore`\n  // That proxies through to the store once ready, and errors beforehand. This means we can set\n  // `__STORYBOOK_STORY_STORE__ = __STORYBOOK_PREVIEW__.storyStore` without having to wait, and\n  // similarly integrators can access the `storyStore` on the preview at any time, although\n  // it is considered deprecated and we will no longer allow access in 9.0\n  get storyStore() {\n    return new Proxy(\n      {},\n      {\n        get: (_, method) => {\n          if (this.storyStoreValue)\n            return deprecate2(\"Accessing the Story Store is deprecated and will be removed in 9.0\"), this.storyStoreValue[method];\n          throw new StoryStoreAccessedBeforeInitializationError();\n        }\n      }\n    );\n  }\n  // INITIALIZATION\n  async initialize() {\n    this.setupListeners();\n    try {\n      let projectAnnotations = await this.getProjectAnnotationsOrRenderError();\n      await this.runBeforeAllHook(projectAnnotations), await this.initializeWithProjectAnnotations(projectAnnotations);\n      let userAgent = globalThis?.navigator?.userAgent;\n      await this.channel.emit(PREVIEW_INITIALIZED, { userAgent });\n    } catch (err) {\n      this.rejectStoreInitializationPromise(err);\n    }\n  }\n  ready() {\n    return this.storeInitializationPromise;\n  }\n  setupListeners() {\n    this.channel.on(STORY_INDEX_INVALIDATED, this.onStoryIndexChanged.bind(this)), this.channel.on(UPDATE_GLOBALS2, this.onUpdateGlobals.bind(this)), this.channel.on(UPDATE_STORY_ARGS2, this.onUpdateArgs.bind(this)), this.channel.on(ARGTYPES_INFO_REQUEST, this.onRequestArgTypesInfo.bind(this)), this.channel.on(RESET_STORY_ARGS2, this.onResetArgs.bind(this)), this.channel.on(FORCE_RE_RENDER2, this.onForceReRender.bind(this)), this.channel.on(FORCE_REMOUNT, this.onForceRemount.bind(this)), this.channel.on(STORY_HOT_UPDATED, this.onStoryHotUpdated.bind(this));\n  }\n  async getProjectAnnotationsOrRenderError() {\n    try {\n      let projectAnnotations = await this.getProjectAnnotations();\n      if (this.renderToCanvas = projectAnnotations.renderToCanvas, !this.renderToCanvas)\n        throw new MissingRenderToCanvasError();\n      return projectAnnotations;\n    } catch (err) {\n      throw this.renderPreviewEntryError(\"Error reading preview.js:\", err), err;\n    }\n  }\n  // If initialization gets as far as project annotations, this function runs.\n  async initializeWithProjectAnnotations(projectAnnotations) {\n    this.projectAnnotationsBeforeInitialization = projectAnnotations;\n    try {\n      let storyIndex = await this.getStoryIndexFromServer();\n      return this.initializeWithStoryIndex(storyIndex);\n    } catch (err) {\n      throw this.renderPreviewEntryError(\"Error loading story index:\", err), err;\n    }\n  }\n  async runBeforeAllHook(projectAnnotations) {\n    try {\n      await this.beforeAllCleanup?.(), this.beforeAllCleanup = await projectAnnotations.beforeAll?.();\n    } catch (err) {\n      throw this.renderPreviewEntryError(\"Error in beforeAll hook:\", err), err;\n    }\n  }\n  async getStoryIndexFromServer() {\n    let result = await fetch(STORY_INDEX_PATH);\n    if (result.status === 200)\n      return result.json();\n    throw new StoryIndexFetchError({ text: await result.text() });\n  }\n  // If initialization gets as far as the story index, this function runs.\n  initializeWithStoryIndex(storyIndex) {\n    if (!this.projectAnnotationsBeforeInitialization)\n      throw new Error(\"Cannot call initializeWithStoryIndex until project annotations resolve\");\n    this.storyStoreValue = new StoryStore(\n      storyIndex,\n      this.importFn,\n      this.projectAnnotationsBeforeInitialization\n    ), delete this.projectAnnotationsBeforeInitialization, this.setInitialGlobals(), this.resolveStoreInitializationPromise();\n  }\n  async setInitialGlobals() {\n    this.emitGlobals();\n  }\n  emitGlobals() {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"emitGlobals\" });\n    let payload = {\n      globals: this.storyStoreValue.userGlobals.get() || {},\n      globalTypes: this.storyStoreValue.projectAnnotations.globalTypes || {}\n    };\n    this.channel.emit(SET_GLOBALS, payload);\n  }\n  // EVENT HANDLERS\n  // This happens when a config file gets reloaded\n  async onGetProjectAnnotationsChanged({\n    getProjectAnnotations\n  }) {\n    delete this.previewEntryError, this.getProjectAnnotations = getProjectAnnotations;\n    let projectAnnotations = await this.getProjectAnnotationsOrRenderError();\n    if (await this.runBeforeAllHook(projectAnnotations), !this.storyStoreValue) {\n      await this.initializeWithProjectAnnotations(projectAnnotations);\n      return;\n    }\n    this.storyStoreValue.setProjectAnnotations(projectAnnotations), this.emitGlobals();\n  }\n  async onStoryIndexChanged() {\n    if (delete this.previewEntryError, !(!this.storyStoreValue && !this.projectAnnotationsBeforeInitialization))\n      try {\n        let storyIndex = await this.getStoryIndexFromServer();\n        if (this.projectAnnotationsBeforeInitialization) {\n          this.initializeWithStoryIndex(storyIndex);\n          return;\n        }\n        await this.onStoriesChanged({ storyIndex });\n      } catch (err) {\n        throw this.renderPreviewEntryError(\"Error loading story index:\", err), err;\n      }\n  }\n  // This happens when a glob gets HMR-ed\n  async onStoriesChanged({\n    importFn,\n    storyIndex\n  }) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"onStoriesChanged\" });\n    await this.storyStoreValue.onStoriesChanged({ importFn, storyIndex });\n  }\n  async onUpdateGlobals({\n    globals: updatedGlobals,\n    currentStory\n  }) {\n    if (this.storyStoreValue || await this.storeInitializationPromise, !this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"onUpdateGlobals\" });\n    if (this.storyStoreValue.userGlobals.update(updatedGlobals), currentStory) {\n      let { initialGlobals, storyGlobals, userGlobals, globals } = this.storyStoreValue.getStoryContext(currentStory);\n      this.channel.emit(GLOBALS_UPDATED, {\n        initialGlobals,\n        userGlobals,\n        storyGlobals,\n        globals\n      });\n    } else {\n      let { initialGlobals, globals } = this.storyStoreValue.userGlobals;\n      this.channel.emit(GLOBALS_UPDATED, {\n        initialGlobals,\n        userGlobals: globals,\n        storyGlobals: {},\n        globals\n      });\n    }\n    await Promise.all(this.storyRenders.map((r) => r.rerender()));\n  }\n  async onUpdateArgs({ storyId, updatedArgs }) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"onUpdateArgs\" });\n    this.storyStoreValue.args.update(storyId, updatedArgs), await Promise.all(\n      this.storyRenders.filter((r) => r.id === storyId && !r.renderOptions.forceInitialArgs).map(\n        (r) => (\n          // We only run the play function, with in a force remount.\n          // But when mount is destructured, the rendering happens inside of the play function.\n          r.story && r.story.usesMount ? r.remount() : r.rerender()\n        )\n      )\n    ), this.channel.emit(STORY_ARGS_UPDATED, {\n      storyId,\n      args: this.storyStoreValue.args.get(storyId)\n    });\n  }\n  async onRequestArgTypesInfo({ id, payload }) {\n    try {\n      await this.storeInitializationPromise;\n      let story = await this.storyStoreValue?.loadStory(payload);\n      this.channel.emit(ARGTYPES_INFO_RESPONSE, {\n        id,\n        success: !0,\n        payload: { argTypes: story?.argTypes || {} },\n        error: null\n      });\n    } catch (e) {\n      this.channel.emit(ARGTYPES_INFO_RESPONSE, {\n        id,\n        success: !1,\n        error: e?.message\n      });\n    }\n  }\n  async onResetArgs({ storyId, argNames }) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"onResetArgs\" });\n    let story = this.storyRenders.find((r) => r.id === storyId)?.story || await this.storyStoreValue.loadStory({ storyId }), updatedArgs = (argNames || [\n      .../* @__PURE__ */ new Set([\n        ...Object.keys(story.initialArgs),\n        ...Object.keys(this.storyStoreValue.args.get(storyId))\n      ])\n    ]).reduce((acc, argName) => (acc[argName] = story.initialArgs[argName], acc), {});\n    await this.onUpdateArgs({ storyId, updatedArgs });\n  }\n  // ForceReRender does not include a story id, so we simply must\n  // re-render all stories in case they are relevant\n  async onForceReRender() {\n    await Promise.all(this.storyRenders.map((r) => r.rerender()));\n  }\n  async onForceRemount({ storyId }) {\n    await Promise.all(this.storyRenders.filter((r) => r.id === storyId).map((r) => r.remount()));\n  }\n  async onStoryHotUpdated() {\n    await Promise.all(this.storyRenders.map((r) => r.cancelPlayFunction()));\n  }\n  // Used by docs to render a story to a given element\n  // Note this short-circuits the `prepare()` phase of the StoryRender,\n  // main to be consistent with the previous behaviour. In the future,\n  // we will change it to go ahead and load the story, which will end up being\n  // \"instant\", although async.\n  renderStoryToElement(story, element, callbacks, options) {\n    if (!this.renderToCanvas || !this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({\n        methodName: \"renderStoryToElement\"\n      });\n    let render = new StoryRender(\n      this.channel,\n      this.storyStoreValue,\n      this.renderToCanvas,\n      callbacks,\n      story.id,\n      \"docs\",\n      options,\n      story\n    );\n    return render.renderToElement(element), this.storyRenders.push(render), async () => {\n      await this.teardownRender(render);\n    };\n  }\n  async teardownRender(render, { viewModeChanged } = {}) {\n    this.storyRenders = this.storyRenders.filter((r) => r !== render), await render?.teardown?.({ viewModeChanged });\n  }\n  // API\n  async loadStory({ storyId }) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"loadStory\" });\n    return this.storyStoreValue.loadStory({ storyId });\n  }\n  getStoryContext(story, { forceInitialArgs = !1 } = {}) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"getStoryContext\" });\n    return this.storyStoreValue.getStoryContext(story, { forceInitialArgs });\n  }\n  async extract(options) {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError({ methodName: \"extract\" });\n    if (this.previewEntryError)\n      throw this.previewEntryError;\n    return await this.storyStoreValue.cacheAllCSFFiles(), this.storyStoreValue.extract(options);\n  }\n  // UTILITIES\n  renderPreviewEntryError(reason, err) {\n    this.previewEntryError = err, logger7.error(reason), logger7.error(err), this.channel.emit(CONFIG_ERROR, err);\n  }\n};\n\n// src/preview-api/modules/preview-web/PreviewWeb.tsx\nimport { global as global8 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/PreviewWithSelection.tsx\nimport { logger as logger8 } from \"storybook/internal/client-logger\";\nimport {\n  CURRENT_STORY_WAS_SET,\n  DOCS_PREPARED,\n  GLOBALS_UPDATED as GLOBALS_UPDATED2,\n  PRELOAD_ENTRIES,\n  PREVIEW_KEYDOWN,\n  SET_CURRENT_STORY,\n  STORY_CHANGED,\n  STORY_ERRORED,\n  STORY_MISSING,\n  STORY_PREPARED,\n  STORY_RENDER_PHASE_CHANGED as STORY_RENDER_PHASE_CHANGED2,\n  STORY_SPECIFIED,\n  STORY_THREW_EXCEPTION,\n  STORY_UNCHANGED,\n  UPDATE_QUERY_PARAMS\n} from \"storybook/internal/core-events\";\nimport {\n  CalledPreviewMethodBeforeInitializationError as CalledPreviewMethodBeforeInitializationError2,\n  EmptyIndexError,\n  MdxFileWithNoCsfReferencesError,\n  NoStoryMatchError\n} from \"storybook/internal/preview-errors\";\n\n// src/preview-api/modules/preview-web/render/CsfDocsRender.ts\nimport { DOCS_RENDERED } from \"storybook/internal/core-events\";\n\n// src/preview-api/modules/preview-web/docs-context/DocsContext.ts\nimport { isStory as isStory3 } from \"storybook/internal/csf\";\nvar DocsContext = class {\n  constructor(channel, store, renderStoryToElement, csfFiles) {\n    this.channel = channel;\n    this.store = store;\n    this.renderStoryToElement = renderStoryToElement;\n    this.storyIdByName = (storyName) => {\n      let storyId = this.nameToStoryId.get(storyName);\n      if (storyId)\n        return storyId;\n      throw new Error(`No story found with that name: ${storyName}`);\n    };\n    this.componentStories = () => this.componentStoriesValue;\n    this.componentStoriesFromCSFFile = (csfFile) => this.store.componentStoriesFromCSFFile({ csfFile });\n    this.storyById = (storyId) => {\n      if (!storyId) {\n        if (!this.primaryStory)\n          throw new Error(\n            \"No primary story defined for docs entry. Did you forget to use `<Meta>`?\"\n          );\n        return this.primaryStory;\n      }\n      let csfFile = this.storyIdToCSFFile.get(storyId);\n      if (!csfFile)\n        throw new Error(`Called \\`storyById\\` for story that was never loaded: ${storyId}`);\n      return this.store.storyFromCSFFile({ storyId, csfFile });\n    };\n    this.getStoryContext = (story) => ({\n      ...this.store.getStoryContext(story),\n      loaded: {},\n      viewMode: \"docs\"\n    });\n    this.loadStory = (id) => this.store.loadStory({ storyId: id });\n    this.componentStoriesValue = [], this.storyIdToCSFFile = /* @__PURE__ */ new Map(), this.exportToStory = /* @__PURE__ */ new Map(), this.exportsToCSFFile = /* @__PURE__ */ new Map(), this.nameToStoryId = /* @__PURE__ */ new Map(), this.attachedCSFFiles = /* @__PURE__ */ new Set(), csfFiles.forEach((csfFile, index) => {\n      this.referenceCSFFile(csfFile);\n    });\n  }\n  // This docs entry references this CSF file and can synchronously load the stories, as well\n  // as reference them by module export. If the CSF is part of the \"component\" stories, they\n  // can also be referenced by name and are in the componentStories list.\n  referenceCSFFile(csfFile) {\n    this.exportsToCSFFile.set(csfFile.moduleExports, csfFile), this.exportsToCSFFile.set(csfFile.moduleExports.default, csfFile), this.store.componentStoriesFromCSFFile({ csfFile }).forEach((story) => {\n      let annotation = csfFile.stories[story.id];\n      this.storyIdToCSFFile.set(annotation.id, csfFile), this.exportToStory.set(annotation.moduleExport, story);\n    });\n  }\n  attachCSFFile(csfFile) {\n    if (!this.exportsToCSFFile.has(csfFile.moduleExports))\n      throw new Error(\"Cannot attach a CSF file that has not been referenced\");\n    if (this.attachedCSFFiles.has(csfFile))\n      return;\n    this.attachedCSFFiles.add(csfFile), this.store.componentStoriesFromCSFFile({ csfFile }).forEach((story) => {\n      this.nameToStoryId.set(story.name, story.id), this.componentStoriesValue.push(story), this.primaryStory || (this.primaryStory = story);\n    });\n  }\n  referenceMeta(metaExports, attach) {\n    let resolved = this.resolveModuleExport(metaExports);\n    if (resolved.type !== \"meta\")\n      throw new Error(\n        \"<Meta of={} /> must reference a CSF file module export or meta export. Did you mistakenly reference your component instead of your CSF file?\"\n      );\n    attach && this.attachCSFFile(resolved.csfFile);\n  }\n  get projectAnnotations() {\n    let { projectAnnotations } = this.store;\n    if (!projectAnnotations)\n      throw new Error(\"Can't get projectAnnotations from DocsContext before they are initialized\");\n    return projectAnnotations;\n  }\n  resolveAttachedModuleExportType(moduleExportType) {\n    if (moduleExportType === \"story\") {\n      if (!this.primaryStory)\n        throw new Error(\n          \"No primary story attached to this docs file, did you forget to use <Meta of={} />?\"\n        );\n      return { type: \"story\", story: this.primaryStory };\n    }\n    if (this.attachedCSFFiles.size === 0)\n      throw new Error(\n        \"No CSF file attached to this docs file, did you forget to use <Meta of={} />?\"\n      );\n    let firstAttachedCSFFile = Array.from(this.attachedCSFFiles)[0];\n    if (moduleExportType === \"meta\")\n      return { type: \"meta\", csfFile: firstAttachedCSFFile };\n    let { component } = firstAttachedCSFFile.meta;\n    if (!component)\n      throw new Error(\n        \"Attached CSF file does not defined a component, did you forget to export one?\"\n      );\n    return { type: \"component\", component };\n  }\n  resolveModuleExport(moduleExportOrType) {\n    let csfFile = this.exportsToCSFFile.get(moduleExportOrType);\n    if (csfFile)\n      return { type: \"meta\", csfFile };\n    let story = this.exportToStory.get(\n      isStory3(moduleExportOrType) ? moduleExportOrType.input : moduleExportOrType\n    );\n    return story ? { type: \"story\", story } : { type: \"component\", component: moduleExportOrType };\n  }\n  resolveOf(moduleExportOrType, validTypes = []) {\n    let resolved;\n    if ([\"component\", \"meta\", \"story\"].includes(moduleExportOrType)) {\n      let type = moduleExportOrType;\n      resolved = this.resolveAttachedModuleExportType(type);\n    } else\n      resolved = this.resolveModuleExport(moduleExportOrType);\n    if (validTypes.length && !validTypes.includes(resolved.type)) {\n      let prettyType = resolved.type === \"component\" ? \"component or unknown\" : resolved.type;\n      throw new Error(dedent`Invalid value passed to the 'of' prop. The value was resolved to a '${prettyType}' type but the only types for this block are: ${validTypes.join(\n        \", \"\n      )}.\n        - Did you pass a component to the 'of' prop when the block only supports a story or a meta?\n        - ... or vice versa?\n        - Did you pass a story, CSF file or meta to the 'of' prop that is not indexed, ie. is not targeted by the 'stories' globs in the main configuration?`);\n    }\n    switch (resolved.type) {\n      case \"component\":\n        return {\n          ...resolved,\n          projectAnnotations: this.projectAnnotations\n        };\n      case \"meta\":\n        return {\n          ...resolved,\n          preparedMeta: this.store.preparedMetaFromCSFFile({ csfFile: resolved.csfFile })\n        };\n      case \"story\":\n      default:\n        return resolved;\n    }\n  }\n};\n\n// src/preview-api/modules/preview-web/render/CsfDocsRender.ts\nvar CsfDocsRender = class {\n  constructor(channel, store, entry, callbacks) {\n    this.channel = channel;\n    this.store = store;\n    this.entry = entry;\n    this.callbacks = callbacks;\n    this.type = \"docs\";\n    this.subtype = \"csf\";\n    this.torndown = !1;\n    this.disableKeyListeners = !1;\n    this.preparing = !1;\n    this.id = entry.id, this.renderId = Date.now();\n  }\n  isPreparing() {\n    return this.preparing;\n  }\n  async prepare() {\n    this.preparing = !0;\n    let { entryExports, csfFiles = [] } = await this.store.loadEntry(this.id);\n    if (this.torndown)\n      throw PREPARE_ABORTED;\n    let { importPath, title } = this.entry, primaryCsfFile = this.store.processCSFFileWithCache(\n      entryExports,\n      importPath,\n      title\n    ), primaryStoryId = Object.keys(primaryCsfFile.stories)[0];\n    this.story = this.store.storyFromCSFFile({ storyId: primaryStoryId, csfFile: primaryCsfFile }), this.csfFiles = [primaryCsfFile, ...csfFiles], this.preparing = !1;\n  }\n  isEqual(other) {\n    return !!(this.id === other.id && this.story && this.story === other.story);\n  }\n  docsContext(renderStoryToElement) {\n    if (!this.csfFiles)\n      throw new Error(\"Cannot render docs before preparing\");\n    let docsContext = new DocsContext(\n      this.channel,\n      this.store,\n      renderStoryToElement,\n      this.csfFiles\n    );\n    return this.csfFiles.forEach((csfFile) => docsContext.attachCSFFile(csfFile)), docsContext;\n  }\n  async renderToElement(canvasElement, renderStoryToElement) {\n    if (!this.story || !this.csfFiles)\n      throw new Error(\"Cannot render docs before preparing\");\n    let docsContext = this.docsContext(renderStoryToElement), { docs: docsParameter } = this.story.parameters || {};\n    if (!docsParameter)\n      throw new Error(\n        \"Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed\"\n      );\n    let renderer = await docsParameter.renderer(), { render } = renderer, renderDocs = async () => {\n      try {\n        await render(docsContext, docsParameter, canvasElement), this.channel.emit(DOCS_RENDERED, this.id);\n      } catch (err) {\n        this.callbacks.showException(err);\n      }\n    };\n    return this.rerender = async () => renderDocs(), this.teardownRender = async ({ viewModeChanged }) => {\n      !viewModeChanged || !canvasElement || renderer.unmount(canvasElement);\n    }, renderDocs();\n  }\n  async teardown({ viewModeChanged } = {}) {\n    this.teardownRender?.({ viewModeChanged }), this.torndown = !0;\n  }\n};\n\n// src/preview-api/modules/preview-web/render/MdxDocsRender.ts\nimport { DOCS_RENDERED as DOCS_RENDERED2 } from \"storybook/internal/core-events\";\nvar MdxDocsRender = class {\n  constructor(channel, store, entry, callbacks) {\n    this.channel = channel;\n    this.store = store;\n    this.entry = entry;\n    this.callbacks = callbacks;\n    this.type = \"docs\";\n    this.subtype = \"mdx\";\n    this.torndown = !1;\n    this.disableKeyListeners = !1;\n    this.preparing = !1;\n    this.id = entry.id, this.renderId = Date.now();\n  }\n  isPreparing() {\n    return this.preparing;\n  }\n  async prepare() {\n    this.preparing = !0;\n    let { entryExports, csfFiles = [] } = await this.store.loadEntry(this.id);\n    if (this.torndown)\n      throw PREPARE_ABORTED;\n    this.csfFiles = csfFiles, this.exports = entryExports, this.preparing = !1;\n  }\n  isEqual(other) {\n    return !!(this.id === other.id && this.exports && this.exports === other.exports);\n  }\n  docsContext(renderStoryToElement) {\n    if (!this.csfFiles)\n      throw new Error(\"Cannot render docs before preparing\");\n    return new DocsContext(\n      this.channel,\n      this.store,\n      renderStoryToElement,\n      this.csfFiles\n    );\n  }\n  async renderToElement(canvasElement, renderStoryToElement) {\n    if (!this.exports || !this.csfFiles || !this.store.projectAnnotations)\n      throw new Error(\"Cannot render docs before preparing\");\n    let docsContext = this.docsContext(renderStoryToElement), { docs } = this.store.projectAnnotations.parameters ?? {};\n    if (!docs)\n      throw new Error(\n        \"Cannot render a story in viewMode=docs if `@storybook/addon-docs` is not installed\"\n      );\n    let docsParameter = { ...docs, page: this.exports.default }, renderer = await docs.renderer(), { render } = renderer, renderDocs = async () => {\n      try {\n        await render(docsContext, docsParameter, canvasElement), this.channel.emit(DOCS_RENDERED2, this.id);\n      } catch (err) {\n        this.callbacks.showException(err);\n      }\n    };\n    return this.rerender = async () => renderDocs(), this.teardownRender = async ({ viewModeChanged } = {}) => {\n      !viewModeChanged || !canvasElement || (renderer.unmount(canvasElement), this.torndown = !0);\n    }, renderDocs();\n  }\n  async teardown({ viewModeChanged } = {}) {\n    this.teardownRender?.({ viewModeChanged }), this.torndown = !0;\n  }\n};\n\n// src/preview-api/modules/preview-web/PreviewWithSelection.tsx\nvar globalWindow = globalThis;\nfunction focusInInput(event) {\n  let target = event.composedPath && event.composedPath()[0] || event.target;\n  return /input|textarea/i.test(target.tagName) || target.getAttribute(\"contenteditable\") !== null;\n}\nvar ATTACHED_MDX_TAG = \"attached-mdx\", UNATTACHED_MDX_TAG = \"unattached-mdx\";\nfunction isMdxEntry({ tags }) {\n  return tags?.includes(UNATTACHED_MDX_TAG) || tags?.includes(ATTACHED_MDX_TAG);\n}\nfunction isStoryRender(r) {\n  return r.type === \"story\";\n}\nfunction isDocsRender(r) {\n  return r.type === \"docs\";\n}\nfunction isCsfDocsRender(r) {\n  return isDocsRender(r) && r.subtype === \"csf\";\n}\nvar PreviewWithSelection = class extends Preview {\n  constructor(importFn, getProjectAnnotations, selectionStore, view) {\n    super(importFn, getProjectAnnotations, void 0, !1);\n    this.importFn = importFn;\n    this.getProjectAnnotations = getProjectAnnotations;\n    this.selectionStore = selectionStore;\n    this.view = view;\n    this.initialize();\n  }\n  setupListeners() {\n    super.setupListeners(), globalWindow.onkeydown = this.onKeydown.bind(this), this.channel.on(SET_CURRENT_STORY, this.onSetCurrentStory.bind(this)), this.channel.on(UPDATE_QUERY_PARAMS, this.onUpdateQueryParams.bind(this)), this.channel.on(PRELOAD_ENTRIES, this.onPreloadStories.bind(this));\n  }\n  async setInitialGlobals() {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError2({ methodName: \"setInitialGlobals\" });\n    let { globals } = this.selectionStore.selectionSpecifier || {};\n    globals && this.storyStoreValue.userGlobals.updateFromPersisted(globals), this.emitGlobals();\n  }\n  // If initialization gets as far as the story index, this function runs.\n  async initializeWithStoryIndex(storyIndex) {\n    return await super.initializeWithStoryIndex(storyIndex), this.selectSpecifiedStory();\n  }\n  // Use the selection specifier to choose a story, then render it\n  async selectSpecifiedStory() {\n    if (!this.storyStoreValue)\n      throw new CalledPreviewMethodBeforeInitializationError2({\n        methodName: \"selectSpecifiedStory\"\n      });\n    if (this.selectionStore.selection) {\n      await this.renderSelection();\n      return;\n    }\n    if (!this.selectionStore.selectionSpecifier) {\n      this.renderMissingStory();\n      return;\n    }\n    let { storySpecifier, args } = this.selectionStore.selectionSpecifier, entry = this.storyStoreValue.storyIndex.entryFromSpecifier(storySpecifier);\n    if (!entry) {\n      storySpecifier === \"*\" ? this.renderStoryLoadingException(storySpecifier, new EmptyIndexError()) : this.renderStoryLoadingException(\n        storySpecifier,\n        new NoStoryMatchError({ storySpecifier: storySpecifier.toString() })\n      );\n      return;\n    }\n    let { id: storyId, type: viewMode } = entry;\n    this.selectionStore.setSelection({ storyId, viewMode }), this.channel.emit(STORY_SPECIFIED, this.selectionStore.selection), this.channel.emit(CURRENT_STORY_WAS_SET, this.selectionStore.selection), await this.renderSelection({ persistedArgs: args });\n  }\n  // EVENT HANDLERS\n  // This happens when a config file gets reloaded\n  async onGetProjectAnnotationsChanged({\n    getProjectAnnotations\n  }) {\n    await super.onGetProjectAnnotationsChanged({ getProjectAnnotations }), this.selectionStore.selection && this.renderSelection();\n  }\n  // This happens when a glob gets HMR-ed\n  async onStoriesChanged({\n    importFn,\n    storyIndex\n  }) {\n    await super.onStoriesChanged({ importFn, storyIndex }), this.selectionStore.selection ? await this.renderSelection() : await this.selectSpecifiedStory();\n  }\n  onKeydown(event) {\n    if (!this.storyRenders.find((r) => r.disableKeyListeners) && !focusInInput(event)) {\n      let { altKey, ctrlKey, metaKey, shiftKey, key, code, keyCode } = event;\n      this.channel.emit(PREVIEW_KEYDOWN, {\n        event: { altKey, ctrlKey, metaKey, shiftKey, key, code, keyCode }\n      });\n    }\n  }\n  async onSetCurrentStory(selection) {\n    this.selectionStore.setSelection({ viewMode: \"story\", ...selection }), await this.storeInitializationPromise, this.channel.emit(CURRENT_STORY_WAS_SET, this.selectionStore.selection), this.renderSelection();\n  }\n  onUpdateQueryParams(queryParams) {\n    this.selectionStore.setQueryParams(queryParams);\n  }\n  async onUpdateGlobals({ globals }) {\n    let currentStory = this.currentRender instanceof StoryRender && this.currentRender.story || void 0;\n    super.onUpdateGlobals({ globals, currentStory }), (this.currentRender instanceof MdxDocsRender || this.currentRender instanceof CsfDocsRender) && await this.currentRender.rerender?.();\n  }\n  async onUpdateArgs({ storyId, updatedArgs }) {\n    super.onUpdateArgs({ storyId, updatedArgs });\n  }\n  async onPreloadStories({ ids }) {\n    await this.storeInitializationPromise, this.storyStoreValue && await Promise.allSettled(ids.map((id) => this.storyStoreValue?.loadEntry(id)));\n  }\n  // RENDERING\n  // We can either have:\n  // - a story selected in \"story\" viewMode,\n  //     in which case we render it to the root element, OR\n  // - a story selected in \"docs\" viewMode,\n  //     in which case we render the docsPage for that story\n  async renderSelection({ persistedArgs } = {}) {\n    let { renderToCanvas } = this;\n    if (!this.storyStoreValue || !renderToCanvas)\n      throw new CalledPreviewMethodBeforeInitializationError2({ methodName: \"renderSelection\" });\n    let { selection } = this.selectionStore;\n    if (!selection)\n      throw new Error(\"Cannot call renderSelection as no selection was made\");\n    let { storyId } = selection, entry;\n    try {\n      entry = await this.storyStoreValue.storyIdToEntry(storyId);\n    } catch (err) {\n      this.currentRender && await this.teardownRender(this.currentRender), this.renderStoryLoadingException(storyId, err);\n      return;\n    }\n    let storyIdChanged = this.currentSelection?.storyId !== storyId, viewModeChanged = this.currentRender?.type !== entry.type;\n    entry.type === \"story\" ? this.view.showPreparingStory({ immediate: viewModeChanged }) : this.view.showPreparingDocs({ immediate: viewModeChanged }), this.currentRender?.isPreparing() && await this.teardownRender(this.currentRender);\n    let render;\n    entry.type === \"story\" ? render = new StoryRender(\n      this.channel,\n      this.storyStoreValue,\n      renderToCanvas,\n      this.mainStoryCallbacks(storyId),\n      storyId,\n      \"story\"\n    ) : isMdxEntry(entry) ? render = new MdxDocsRender(\n      this.channel,\n      this.storyStoreValue,\n      entry,\n      this.mainStoryCallbacks(storyId)\n    ) : render = new CsfDocsRender(\n      this.channel,\n      this.storyStoreValue,\n      entry,\n      this.mainStoryCallbacks(storyId)\n    );\n    let lastSelection = this.currentSelection;\n    this.currentSelection = selection;\n    let lastRender = this.currentRender;\n    this.currentRender = render;\n    try {\n      await render.prepare();\n    } catch (err) {\n      lastRender && await this.teardownRender(lastRender), err !== PREPARE_ABORTED && this.renderStoryLoadingException(storyId, err);\n      return;\n    }\n    let implementationChanged = !storyIdChanged && lastRender && !render.isEqual(lastRender);\n    if (persistedArgs && isStoryRender(render) && (invariant(!!render.story), this.storyStoreValue.args.updateFromPersisted(render.story, persistedArgs)), lastRender && !lastRender.torndown && !storyIdChanged && !implementationChanged && !viewModeChanged) {\n      this.currentRender = lastRender, this.channel.emit(STORY_UNCHANGED, storyId), this.view.showMain();\n      return;\n    }\n    if (lastRender && await this.teardownRender(lastRender, { viewModeChanged }), lastSelection && (storyIdChanged || viewModeChanged) && this.channel.emit(STORY_CHANGED, storyId), isStoryRender(render)) {\n      invariant(!!render.story);\n      let {\n        parameters,\n        initialArgs,\n        argTypes,\n        unmappedArgs,\n        initialGlobals,\n        userGlobals,\n        storyGlobals,\n        globals\n      } = this.storyStoreValue.getStoryContext(render.story);\n      this.channel.emit(STORY_PREPARED, {\n        id: storyId,\n        parameters,\n        initialArgs,\n        argTypes,\n        args: unmappedArgs\n      }), this.channel.emit(GLOBALS_UPDATED2, { userGlobals, storyGlobals, globals, initialGlobals });\n    } else {\n      let { parameters } = this.storyStoreValue.projectAnnotations, { initialGlobals, globals } = this.storyStoreValue.userGlobals;\n      if (this.channel.emit(GLOBALS_UPDATED2, {\n        globals,\n        initialGlobals,\n        storyGlobals: {},\n        userGlobals: globals\n      }), isCsfDocsRender(render) || render.entry.tags?.includes(ATTACHED_MDX_TAG)) {\n        if (!render.csfFiles)\n          throw new MdxFileWithNoCsfReferencesError({ storyId });\n        ({ parameters } = this.storyStoreValue.preparedMetaFromCSFFile({\n          csfFile: render.csfFiles[0]\n        }));\n      }\n      this.channel.emit(DOCS_PREPARED, {\n        id: storyId,\n        parameters\n      });\n    }\n    isStoryRender(render) ? (invariant(!!render.story), this.storyRenders.push(render), this.currentRender.renderToElement(\n      this.view.prepareForStory(render.story)\n    )) : this.currentRender.renderToElement(\n      this.view.prepareForDocs(),\n      // This argument is used for docs, which is currently only compatible with HTMLElements\n      this.renderStoryToElement.bind(this)\n    );\n  }\n  async teardownRender(render, { viewModeChanged = !1 } = {}) {\n    this.storyRenders = this.storyRenders.filter((r) => r !== render), await render?.teardown?.({ viewModeChanged });\n  }\n  // UTILITIES\n  mainStoryCallbacks(storyId) {\n    return {\n      showStoryDuringRender: () => this.view.showStoryDuringRender(),\n      showMain: () => this.view.showMain(),\n      showError: (err) => this.renderError(storyId, err),\n      showException: (err) => this.renderException(storyId, err)\n    };\n  }\n  renderPreviewEntryError(reason, err) {\n    super.renderPreviewEntryError(reason, err), this.view.showErrorDisplay(err);\n  }\n  renderMissingStory() {\n    this.view.showNoPreview(), this.channel.emit(STORY_MISSING);\n  }\n  renderStoryLoadingException(storySpecifier, err) {\n    logger8.error(err), this.view.showErrorDisplay(err), this.channel.emit(STORY_MISSING, storySpecifier);\n  }\n  // renderException is used if we fail to render the story and it is uncaught by the app layer\n  renderException(storyId, error) {\n    let { name = \"Error\", message = String(error), stack } = error, renderId = this.currentRender?.renderId;\n    this.channel.emit(STORY_THREW_EXCEPTION, { name, message, stack }), this.channel.emit(STORY_RENDER_PHASE_CHANGED2, { newPhase: \"errored\", renderId, storyId }), this.view.showErrorDisplay(error), logger8.error(`Error rendering story '${storyId}':`), logger8.error(error);\n  }\n  // renderError is used by the various app layers to inform the user they have done something\n  // wrong -- for instance returned the wrong thing from a story\n  renderError(storyId, { title, description }) {\n    let renderId = this.currentRender?.renderId;\n    this.channel.emit(STORY_ERRORED, { title, description }), this.channel.emit(STORY_RENDER_PHASE_CHANGED2, { newPhase: \"errored\", renderId, storyId }), this.view.showErrorDisplay({ message: title, stack: description }), logger8.error(`Error rendering story ${title}: ${description}`);\n  }\n};\n\n// src/preview-api/modules/preview-web/UrlStore.ts\nvar import_picoquery2 = __toESM(require_main(), 1);\nimport { global as global6 } from \"@storybook/global\";\n\n// src/preview-api/modules/preview-web/parseArgsParam.ts\nimport { once as once3 } from \"storybook/internal/client-logger\";\nvar import_picoquery = __toESM(require_main(), 1);\nvar VALIDATION_REGEXP = /^[a-zA-Z0-9 _-]*$/, NUMBER_REGEXP = /^-?[0-9]+(\\.[0-9]+)?$/, HEX_REGEXP = /^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i, COLOR_REGEXP = /^(rgba?|hsla?)\\(([0-9]{1,3}),\\s?([0-9]{1,3})%?,\\s?([0-9]{1,3})%?,?\\s?([0-9](\\.[0-9]{1,2})?)?\\)$/i, validateArgs = (key = \"\", value) => key === null || key === \"\" || !VALIDATION_REGEXP.test(key) ? !1 : value == null || value instanceof Date || typeof value == \"number\" || typeof value == \"boolean\" ? !0 : typeof value == \"string\" ? VALIDATION_REGEXP.test(value) || NUMBER_REGEXP.test(value) || HEX_REGEXP.test(value) || COLOR_REGEXP.test(value) : Array.isArray(value) ? value.every((v) => validateArgs(key, v)) : isPlainObject(value) ? Object.entries(value).every(([k, v]) => validateArgs(k, v)) : !1, QUERY_OPTIONS = {\n  delimiter: \";\",\n  // we're parsing a single query param\n  nesting: !0,\n  arrayRepeat: !0,\n  arrayRepeatSyntax: \"bracket\",\n  nestingSyntax: \"js\",\n  // objects are encoded using dot notation\n  valueDeserializer(str) {\n    if (str.startsWith(\"!\")) {\n      if (str === \"!undefined\")\n        return;\n      if (str === \"!null\")\n        return null;\n      if (str === \"!true\")\n        return !0;\n      if (str === \"!false\")\n        return !1;\n      if (str.startsWith(\"!date(\") && str.endsWith(\")\"))\n        return new Date(str.replaceAll(\" \", \"+\").slice(6, -1));\n      if (str.startsWith(\"!hex(\") && str.endsWith(\")\"))\n        return `#${str.slice(5, -1)}`;\n      let color = str.slice(1).match(COLOR_REGEXP);\n      if (color)\n        return str.startsWith(\"!rgba\") || str.startsWith(\"!RGBA\") ? `${color[1]}(${color[2]}, ${color[3]}, ${color[4]}, ${color[5]})` : str.startsWith(\"!hsla\") || str.startsWith(\"!HSLA\") ? `${color[1]}(${color[2]}, ${color[3]}%, ${color[4]}%, ${color[5]})` : str.startsWith(\"!rgb\") || str.startsWith(\"!RGB\") ? `${color[1]}(${color[2]}, ${color[3]}, ${color[4]})` : `${color[1]}(${color[2]}, ${color[3]}%, ${color[4]}%)`;\n    }\n    return NUMBER_REGEXP.test(str) ? Number(str) : str;\n  }\n}, parseArgsParam = (argsString) => {\n  let parts = argsString.split(\";\").map((part) => part.replace(\"=\", \"~\").replace(\":\", \"=\"));\n  return Object.entries((0, import_picoquery.parse)(parts.join(\";\"), QUERY_OPTIONS)).reduce((acc, [key, value]) => validateArgs(key, value) ? Object.assign(acc, { [key]: value }) : (once3.warn(dedent`\n      Omitted potentially unsafe URL args.\n\n      More info: https://storybook.js.org/docs/writing-stories/args#setting-args-through-the-url?ref=error\n    `), acc), {});\n};\n\n// src/preview-api/modules/preview-web/UrlStore.ts\nvar { history, document: document2 } = global6;\nfunction pathToId(path) {\n  let match = (path || \"\").match(/^\\/story\\/(.+)/);\n  if (!match)\n    throw new Error(`Invalid path '${path}',  must start with '/story/'`);\n  return match[1];\n}\nvar getQueryString = ({\n  selection,\n  extraParams\n}) => {\n  let search = document2?.location.search.slice(1), { path, selectedKind, selectedStory, ...rest } = (0, import_picoquery2.parse)(search);\n  return `?${(0, import_picoquery2.stringify)({\n    ...rest,\n    ...extraParams,\n    ...selection && { id: selection.storyId, viewMode: selection.viewMode }\n  })}`;\n}, setPath = (selection) => {\n  if (!selection)\n    return;\n  let query = getQueryString({ selection }), { hash = \"\" } = document2.location;\n  document2.title = selection.storyId, history.replaceState({}, \"\", `${document2.location.pathname}${query}${hash}`);\n}, isObject = (val) => val != null && typeof val == \"object\" && Array.isArray(val) === !1, getFirstString = (v) => {\n  if (v !== void 0) {\n    if (typeof v == \"string\")\n      return v;\n    if (Array.isArray(v))\n      return getFirstString(v[0]);\n    if (isObject(v))\n      return getFirstString(\n        Object.values(v).filter(Boolean)\n      );\n  }\n}, getSelectionSpecifierFromPath = () => {\n  if (typeof document2 < \"u\") {\n    let queryStr = document2.location.search.slice(1), query = (0, import_picoquery2.parse)(queryStr), args = typeof query.args == \"string\" ? parseArgsParam(query.args) : void 0, globals = typeof query.globals == \"string\" ? parseArgsParam(query.globals) : void 0, viewMode = getFirstString(query.viewMode);\n    if (typeof viewMode != \"string\" || !viewMode)\n      viewMode = \"story\";\n    else if (!viewMode.match(/docs|story/))\n      return null;\n    let path = getFirstString(query.path), storyId = path ? pathToId(path) : getFirstString(query.id);\n    if (storyId)\n      return { storySpecifier: storyId, args, globals, viewMode };\n  }\n  return null;\n}, UrlStore = class {\n  constructor() {\n    this.selectionSpecifier = getSelectionSpecifierFromPath();\n  }\n  setSelection(selection) {\n    this.selection = selection, setPath(this.selection);\n  }\n  setQueryParams(queryParams) {\n    let query = getQueryString({ extraParams: queryParams }), { hash = \"\" } = document2.location;\n    history.replaceState({}, \"\", `${document2.location.pathname}${query}${hash}`);\n  }\n};\n\n// src/preview-api/modules/preview-web/WebView.ts\nvar import_ansi_to_html = __toESM(require_ansi_to_html(), 1), import_picoquery3 = __toESM(require_main(), 1);\nimport { logger as logger9 } from \"storybook/internal/client-logger\";\nimport { global as global7 } from \"@storybook/global\";\nvar { document: document3 } = global7, PREPARING_DELAY = 100, Mode = /* @__PURE__ */ ((Mode2) => (Mode2.MAIN = \"MAIN\", Mode2.NOPREVIEW = \"NOPREVIEW\", Mode2.PREPARING_STORY = \"PREPARING_STORY\", Mode2.PREPARING_DOCS = \"PREPARING_DOCS\", Mode2.ERROR = \"ERROR\", Mode2))(Mode || {}), classes = {\n  PREPARING_STORY: \"sb-show-preparing-story\",\n  PREPARING_DOCS: \"sb-show-preparing-docs\",\n  MAIN: \"sb-show-main\",\n  NOPREVIEW: \"sb-show-nopreview\",\n  ERROR: \"sb-show-errordisplay\"\n}, layoutClassMap = {\n  centered: \"sb-main-centered\",\n  fullscreen: \"sb-main-fullscreen\",\n  padded: \"sb-main-padded\"\n}, ansiConverter = new import_ansi_to_html.default({\n  escapeXML: !0\n}), WebView = class {\n  constructor() {\n    this.testing = !1;\n    if (typeof document3 < \"u\") {\n      let { __SPECIAL_TEST_PARAMETER__ } = (0, import_picoquery3.parse)(document3.location.search.slice(1));\n      switch (__SPECIAL_TEST_PARAMETER__) {\n        case \"preparing-story\": {\n          this.showPreparingStory(), this.testing = !0;\n          break;\n        }\n        case \"preparing-docs\": {\n          this.showPreparingDocs(), this.testing = !0;\n          break;\n        }\n        default:\n      }\n    }\n  }\n  // Get ready to render a story, returning the element to render to\n  prepareForStory(story) {\n    return this.showStory(), this.applyLayout(story.parameters.layout), document3.documentElement.scrollTop = 0, document3.documentElement.scrollLeft = 0, this.storyRoot();\n  }\n  storyRoot() {\n    return document3.getElementById(\"storybook-root\");\n  }\n  prepareForDocs() {\n    return this.showMain(), this.showDocs(), this.applyLayout(\"fullscreen\"), document3.documentElement.scrollTop = 0, document3.documentElement.scrollLeft = 0, this.docsRoot();\n  }\n  docsRoot() {\n    return document3.getElementById(\"storybook-docs\");\n  }\n  applyLayout(layout = \"padded\") {\n    if (layout === \"none\") {\n      document3.body.classList.remove(this.currentLayoutClass), this.currentLayoutClass = null;\n      return;\n    }\n    this.checkIfLayoutExists(layout);\n    let layoutClass = layoutClassMap[layout];\n    document3.body.classList.remove(this.currentLayoutClass), document3.body.classList.add(layoutClass), this.currentLayoutClass = layoutClass;\n  }\n  checkIfLayoutExists(layout) {\n    layoutClassMap[layout] || logger9.warn(\n      dedent`\n          The desired layout: ${layout} is not a valid option.\n          The possible options are: ${Object.keys(layoutClassMap).join(\", \")}, none.\n        `\n    );\n  }\n  showMode(mode) {\n    clearTimeout(this.preparingTimeout), Object.keys(Mode).forEach((otherMode) => {\n      otherMode === mode ? document3.body.classList.add(classes[otherMode]) : document3.body.classList.remove(classes[otherMode]);\n    });\n  }\n  showErrorDisplay({ message = \"\", stack = \"\" }) {\n    let header = message, detail = stack, parts = message.split(`\n`);\n    parts.length > 1 && ([header] = parts, detail = parts.slice(1).join(`\n`).replace(/^\\n/, \"\")), document3.getElementById(\"error-message\").innerHTML = ansiConverter.toHtml(header), document3.getElementById(\"error-stack\").innerHTML = ansiConverter.toHtml(detail), this.showMode(\"ERROR\" /* ERROR */);\n  }\n  showNoPreview() {\n    this.testing || (this.showMode(\"NOPREVIEW\" /* NOPREVIEW */), this.storyRoot()?.setAttribute(\"hidden\", \"true\"), this.docsRoot()?.setAttribute(\"hidden\", \"true\"));\n  }\n  showPreparingStory({ immediate = !1 } = {}) {\n    clearTimeout(this.preparingTimeout), immediate ? this.showMode(\"PREPARING_STORY\" /* PREPARING_STORY */) : this.preparingTimeout = setTimeout(\n      () => this.showMode(\"PREPARING_STORY\" /* PREPARING_STORY */),\n      PREPARING_DELAY\n    );\n  }\n  showPreparingDocs({ immediate = !1 } = {}) {\n    clearTimeout(this.preparingTimeout), immediate ? this.showMode(\"PREPARING_DOCS\" /* PREPARING_DOCS */) : this.preparingTimeout = setTimeout(() => this.showMode(\"PREPARING_DOCS\" /* PREPARING_DOCS */), PREPARING_DELAY);\n  }\n  showMain() {\n    this.showMode(\"MAIN\" /* MAIN */);\n  }\n  showDocs() {\n    this.storyRoot().setAttribute(\"hidden\", \"true\"), this.docsRoot().removeAttribute(\"hidden\");\n  }\n  showStory() {\n    this.docsRoot().setAttribute(\"hidden\", \"true\"), this.storyRoot().removeAttribute(\"hidden\");\n  }\n  showStoryDuringRender() {\n    document3.body.classList.add(classes.MAIN);\n  }\n};\n\n// src/preview-api/modules/preview-web/PreviewWeb.tsx\nvar PreviewWeb = class extends PreviewWithSelection {\n  constructor(importFn, getProjectAnnotations) {\n    super(importFn, getProjectAnnotations, new UrlStore(), new WebView());\n    this.importFn = importFn;\n    this.getProjectAnnotations = getProjectAnnotations;\n    global8.__STORYBOOK_PREVIEW__ = this;\n  }\n};\n\n// src/preview-api/modules/preview-web/simulate-pageload.ts\nimport { global as global9 } from \"@storybook/global\";\nvar { document: document4 } = global9, runScriptTypes = [\n  \"application/javascript\",\n  \"application/ecmascript\",\n  \"application/x-ecmascript\",\n  \"application/x-javascript\",\n  \"text/ecmascript\",\n  \"text/javascript\",\n  \"text/javascript1.0\",\n  \"text/javascript1.1\",\n  \"text/javascript1.2\",\n  \"text/javascript1.3\",\n  \"text/javascript1.4\",\n  \"text/javascript1.5\",\n  \"text/jscript\",\n  \"text/livescript\",\n  \"text/x-ecmascript\",\n  \"text/x-javascript\",\n  // Support modern javascript\n  \"module\"\n], SCRIPT = \"script\", SCRIPTS_ROOT_ID = \"scripts-root\";\nfunction simulateDOMContentLoaded() {\n  let DOMContentLoadedEvent = document4.createEvent(\"Event\");\n  DOMContentLoadedEvent.initEvent(\"DOMContentLoaded\", !0, !0), document4.dispatchEvent(DOMContentLoadedEvent);\n}\nfunction insertScript($script, callback, $scriptRoot) {\n  let scriptEl = document4.createElement(\"script\");\n  scriptEl.type = $script.type === \"module\" ? \"module\" : \"text/javascript\", $script.src ? (scriptEl.onload = callback, scriptEl.onerror = callback, scriptEl.src = $script.src) : scriptEl.textContent = $script.innerText, $scriptRoot ? $scriptRoot.appendChild(scriptEl) : document4.head.appendChild(scriptEl), $script.parentNode.removeChild($script), $script.src || callback();\n}\nfunction insertScriptsSequentially(scriptsToExecute, callback, index = 0) {\n  scriptsToExecute[index](() => {\n    index++, index === scriptsToExecute.length ? callback() : insertScriptsSequentially(scriptsToExecute, callback, index);\n  });\n}\nfunction simulatePageLoad($container) {\n  let $scriptsRoot = document4.getElementById(SCRIPTS_ROOT_ID);\n  $scriptsRoot ? $scriptsRoot.innerHTML = \"\" : ($scriptsRoot = document4.createElement(\"div\"), $scriptsRoot.id = SCRIPTS_ROOT_ID, document4.body.appendChild($scriptsRoot));\n  let $scripts = Array.from($container.querySelectorAll(SCRIPT));\n  if ($scripts.length) {\n    let scriptsToExecute = [];\n    $scripts.forEach(($script) => {\n      let typeAttr = $script.getAttribute(\"type\");\n      (!typeAttr || runScriptTypes.includes(typeAttr)) && scriptsToExecute.push((callback) => insertScript($script, callback, $scriptsRoot));\n    }), scriptsToExecute.length && insertScriptsSequentially(scriptsToExecute, simulateDOMContentLoaded, void 0);\n  } else\n    simulateDOMContentLoaded();\n}\n\n// src/preview-api/modules/preview-web/emitTransformCode.ts\nasync function emitTransformCode(source, context) {\n  let transform = context.parameters?.docs?.source?.transform, { id, unmappedArgs } = context, transformed = transform && source ? transform?.(source, context) : source, result = transformed ? await transformed : void 0;\n  addons.getChannel().emit(SNIPPET_RENDERED, {\n    id,\n    source: result,\n    args: unmappedArgs\n  });\n}\n\nexport {\n  mockChannel,\n  addons,\n  HooksContext,\n  applyHooks,\n  useMemo,\n  useCallback,\n  useRef,\n  useState,\n  useReducer,\n  useEffect,\n  useChannel,\n  useStoryContext,\n  useParameter,\n  useArgs,\n  useGlobals,\n  makeDecorator,\n  combineArgs,\n  normalizeArrays,\n  normalizeStory,\n  mountDestructured,\n  decorateStory,\n  sanitizeStoryContextUpdate,\n  defaultDecorateStory,\n  prepareStory,\n  prepareMeta,\n  filterArgTypes,\n  inferControls,\n  normalizeProjectAnnotations,\n  composeStepRunners,\n  composeConfigs,\n  ReporterAPI,\n  getCsfFactoryAnnotations,\n  setDefaultProjectAnnotations,\n  setProjectAnnotations,\n  composeStory,\n  composeStories,\n  createPlaywrightTest,\n  StoryStore,\n  userOrAutoTitleFromSpecifier,\n  userOrAutoTitle,\n  sortStoriesV7,\n  Preview,\n  DocsContext,\n  PreviewWithSelection,\n  UrlStore,\n  WebView,\n  PreviewWeb,\n  simulateDOMContentLoaded,\n  simulatePageLoad,\n  emitTransformCode\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}